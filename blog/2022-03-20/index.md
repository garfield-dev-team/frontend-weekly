---
slug: 3æœˆ20æ—¥å†…å®¹æ±‡æ€»
title: 3æœˆ20æ—¥å†…å®¹æ±‡æ€»
authors: [garfield]
tags: [git, ESLint, Prettier, yaml, CSS, Vue3, JSON åºåˆ—åŒ–, Golang]
---

ðŸ“’ React Hooks æºç åˆ†æž

React å‡½æ•°ç»„ä»¶é€šè¿‡ `renderWithHooks` å‡½æ•°è¿›è¡Œæ¸²æŸ“ï¼Œé‡Œé¢æœ‰ä¸ª `workingInProgress` çš„å¯¹è±¡å°±æ˜¯å½“å‰çš„ fiber èŠ‚ç‚¹ï¼Œfiber èŠ‚ç‚¹çš„ `memorizedState` å°±æ˜¯ä¿å­˜ hooks æ•°æ®çš„åœ°æ–¹ã€‚å®ƒæ˜¯ä¸€ä¸ªé€šè¿‡ `next` ä¸²è”çš„é“¾è¡¨ã€‚

è¿™ä¸ª `memorizedState` é“¾è¡¨æ˜¯ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„å‘¢ï¼Ÿç¡®å®žæœ‰ä¸ªé“¾è¡¨åˆ›å»ºçš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ mountXxxã€‚é“¾è¡¨åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼ŒåŽé¢åªéœ€è¦ updateã€‚æ‰€ä»¥ç¬¬ä¸€æ¬¡è°ƒç”¨ `useState` ä¼šæ‰§è¡Œ `mountState`ï¼ŒåŽé¢å†è°ƒç”¨ `useState` ä¼šæ‰§è¡Œ `updateState`ã€‚

æ¯ä¸ª Hook çš„ `memorizedState` é“¾è¡¨èŠ‚ç‚¹æ˜¯é€šè¿‡ `mountWorkInProgressHook` å‡½æ•°åˆ›å»ºçš„ï¼š

```js
function mountWorkInProgressHook(): Hook {
  const hook = {
    memoizedState: null,
    baseState: null,
    baseQueue: null,
    queue: null,
    next: null,
  };

  if (workInProgressHook === null) {
    // This is the first hook in the list
    currentlyRenderingFiber.memoizedState = workInProgressHook = hook;
  } else {
    // Append to the end of the list
    workInProgressHook = workInProgressHook.next = hook;
  }
  return workInProgressHook;
}
```

> å‡½æ•°ç»„ä»¶æœ¬èº«æ˜¯æ²¡æœ‰æŒ‚è½½ã€æ›´æ–°çš„æ¦‚å¿µçš„ï¼Œæ¯æ¬¡ rerender å°±æ˜¯æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œä½†æ˜¯æŒ‚è½½ã€æ›´æ–°çš„é€»è¾‘ä½“çŽ°åœ¨ Hooks é‡Œé¢ï¼Œé¦–æ¬¡æ‰§è¡Œçš„æ—¶å€™è°ƒç”¨ `mountWorkInProgressHook` åˆ›å»ºé“¾è¡¨èŠ‚ç‚¹ï¼ŒåŽç»­æ‰§è¡Œçš„æ—¶å€™è°ƒç”¨ `updateWorkInProgressHook` è®¿é—®å¹¶æ›´æ–°é“¾è¡¨èŠ‚ç‚¹

[React Hooks çš„åŽŸç†ï¼Œæœ‰çš„ç®€å•æœ‰çš„ä¸ç®€å•](https://juejin.cn/post/7075701341997236261)

[React è¿›é˜¶å®žæˆ˜æŒ‡å— - åŽŸç†ç¯‡ï¼šHooks åŽŸç†](https://juejin.cn/book/6945998773818490884/section/6959872072906440743)

ðŸ“’ å‰ç«¯å·¥ç¨‹å¸ˆå¦‚ä½•å¿«é€Ÿä½¿ç”¨ä¸€ä¸ªNLPæ¨¡åž‹

2017å¹´è°·æ­Œæå‡ºäº†Transformeræž¶æž„æ¨¡åž‹ï¼Œ2018å¹´åº•ï¼ŒåŸºäºŽTransformeræž¶æž„ï¼Œè°·æ­ŒæŽ¨å‡ºäº†bertæ¨¡åž‹ï¼Œbertæ¨¡åž‹ä¸€è¯žç”Ÿï¼Œä¾¿åœ¨å„å¤§11é¡¹NLPåŸºç¡€ä»»åŠ¡ä¸­å±•çŽ°å‡ºäº†å“è¶Šçš„æ€§èƒ½ï¼ŒçŽ°åœ¨å¾ˆå¤šæ¨¡åž‹éƒ½æ˜¯åŸºäºŽæˆ–å‚è€ƒBertæ¨¡åž‹è¿›è¡Œæ”¹é€ ã€‚

:::tip

å¦‚æžœæƒ³äº†è§£ Transformer å’Œ bertï¼Œå¯ä»¥çœ‹è¿™ä¸ªè§†é¢‘

https://www.bilibili.com/video/BV1P4411F77q

https://www.bilibili.com/video/BV1Mt411J734

:::

[å‰ç«¯å·¥ç¨‹å¸ˆå¦‚ä½•å¿«é€Ÿä½¿ç”¨ä¸€ä¸ªNLPæ¨¡åž‹](https://juejin.cn/post/7075518863814869005)

ðŸ“’ [Lerna è¿è¡Œæµç¨‹å‰–æž](https://juejin.cn/post/7075493514510860318)

â­ï¸ [Gitä¸è¦åªä¼špullå’Œpushï¼Œè¯•è¯•è¿™5æ¡æé«˜æ•ˆçŽ‡çš„å‘½ä»¤](https://juejin.cn/post/7071780876501123085)

ðŸ“’ [Reactå†…éƒ¨çš„æ€§èƒ½ä¼˜åŒ–æ²¡æœ‰è¾¾åˆ°æžè‡´ï¼Ÿ](https://juejin.cn/post/7073692220313829407)

ðŸ“’ reduce æ–¹æ³•æ³¨æ„äº‹é¡¹

|          | åˆå§‹å€¼éžç©º                                    | åˆå§‹å€¼ä¸ºç©º                                        |
| -------- | --------------------------------------------- | ------------------------------------------------- |
| æ•°ç»„éžç©º | é¦–æ¬¡æ‰§è¡Œå›žè°ƒï¼Œaccu ä¸ºåˆå§‹å€¼ï¼Œcur ä¸ºæ•°ç»„ç¬¬ä¸€é¡¹ | é¦–æ¬¡æ‰§è¡Œå›žè°ƒï¼Œaccu ä¸ºæ•°ç»„ç¬¬ä¸€é¡¹ï¼Œcur ä¸ºæ•°ç»„ç¬¬äºŒé¡¹ |
| æ•°ç»„ä¸ºç©º | ä¸æ‰§è¡Œå›žè°ƒï¼Œç›´æŽ¥è¿”å›žåˆå§‹å€¼                    | æŠ¥é”™ï¼ˆå»ºè®®ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼ é€’åˆå§‹å€¼ï¼‰                |

ðŸ“’ npm å®‰è£…ä¾èµ–é»˜è®¤æ·»åŠ  `^` å‰ç¼€ï¼Œå½“å†æ¬¡æ‰§è¡Œ npm install å‘½ä»¤æ—¶ï¼Œä¼šè‡ªåŠ¨å®‰è£…è¿™ä¸ªåŒ…åœ¨æ­¤å¤§ç‰ˆæœ¬ä¸‹çš„æœ€æ–°ç‰ˆæœ¬ã€‚å¦‚æžœæƒ³è¦ä¿®æ”¹è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
$ npm config set save-prefix='~'
```

> æ‰§è¡Œå®Œè¯¥å‘½ä»¤ä¹‹åŽï¼Œå°±ä¼šæŠŠ `^` ç¬¦å·æ”¹ä¸º `~` ç¬¦å·ã€‚å½“å†æ¬¡å®‰è£…æ–°æ¨¡å—æ—¶ï¼Œå°±ä»Žåªå…è®¸å°ç‰ˆæœ¬çš„å‡çº§å˜æˆäº†åªå…è®¸è¡¥ä¸åŒ…çš„å‡çº§

å¦‚æžœæƒ³è¦é”å®šå½“å‰çš„ç‰ˆæœ¬ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
$ npm config set save-exact true
```

> è¿™æ ·æ¯æ¬¡ `npm install xxx --save` æ—¶å°±ä¼šé”å®šä¾èµ–çš„ç‰ˆæœ¬å·ï¼Œç›¸å½“äºŽåŠ äº† `--save-exact` å‚æ•°ã€‚å»ºè®®çº¿ä¸Šçš„åº”ç”¨éƒ½é‡‡ç”¨è¿™ç§é”å®šç‰ˆæœ¬å·çš„æ–¹å¼

æ—¢ç„¶å¯ä»¥é”å®šä¾èµ–ç‰ˆæœ¬ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ lcok-file å‘¢ï¼Œä¸ªäººç†è§£é”å®šä¾èµ–åªèƒ½é”å®šå½“å‰é¡¹ç›®ä¸­çš„ä¾èµ–ç‰ˆæœ¬ï¼Œä½†æ˜¯è¿˜å­˜åœ¨é—´æŽ¥ä¾èµ–ï¼Œå³ä¾èµ–è¿˜æœ‰ä¾èµ–ï¼Œç›´æŽ¥é”å®šä¾èµ–ç‰ˆæœ¬æ— æ³•è§£å†³é—´æŽ¥ä¾èµ–çš„é—®é¢˜ï¼Œé—´æŽ¥ä¾èµ–ç‰ˆæœ¬è¿˜æ˜¯ä¸å—æŽ§åˆ¶ï¼Œéœ€è¦å€ŸåŠ© lock-file é”å®šé—´æŽ¥ä¾èµ–çš„ç‰ˆæœ¬ã€‚

ðŸ“’ å‡½æ•°å¼ç¼–ç¨‹ä¸‰ç§å½¢å¼ï¼š

- å‡½æ•°èµ‹å€¼ç»™å˜é‡
  - å¯ä½œä¸ºæ•°ç»„çš„å…ƒç´ ï¼Œè¿›è€Œå®žçŽ° compose å‡½æ•°ç»„åˆï¼Œæˆ–è€…ç®¡é“æ“ä½œ
- å‡½æ•°ä½œä¸ºå‚æ•°
  - å¸¸è§çš„æœ‰ `forEach` ã€`Promise` ã€`setTimeout` ç­‰ï¼ŒReact æŠ€æœ¯æ ˆä¹Ÿæœ‰å¾ˆå¤š API
- å‡½æ•°ä½œä¸ºè¿”å›žå€¼

ðŸ“’ [GitLab CI æ‰“é€ ä¸€æ¡è‡ªå·±çš„æµæ°´çº¿](https://juejin.cn/post/7074780794459258917)

ðŸ“’ type-challenges

type-challenges æ˜¯ä¸€ä¸ª TypeScript ç±»åž‹ä½“æ“å§¿åŠ¿åˆé›†ã€‚æœ¬é¡¹ç›®æ„åœ¨äºŽè®©ä½ æ›´å¥½çš„äº†è§£ TS çš„ç±»åž‹ç³»ç»Ÿï¼Œç¼–å†™ä½ è‡ªå·±çš„ç±»åž‹å·¥å…·ï¼Œæˆ–è€…åªæ˜¯å•çº¯çš„äº«å—æŒ‘æˆ˜çš„ä¹è¶£ï¼

> https://github.com/type-challenges/type-challenges
