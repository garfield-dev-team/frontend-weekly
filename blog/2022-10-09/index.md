---
slug: 10æœˆ9æ—¥å†…å®¹æ±‡æ€»
title: 10æœˆ9æ—¥å†…å®¹æ±‡æ€»
authors: [garfield]
tags: []
---

ğŸ“’ Next.js prefetch ç­–ç•¥

å¾ˆå¤šå…¨æ ˆæ¡†æ¶ï¼Œä¾‹å¦‚ Next.js éƒ½ä¼šåš prefetch é¢„åŠ è½½ chunkã€‚Next.js æä¾›äº†ä¸€ä¸ª `<Link />` ç»„ä»¶ï¼Œå¯ä»¥å®ç° client-side route transitionsï¼ŒåŒæ—¶è¿™ä¸ª `<Link />` è¿˜å…·æœ‰ prefetch åŠŸèƒ½ï¼š

> Any `<Link />` that is in the viewport (initially or through scroll) will be preloaded. Prefetch can be disabled by passing `prefetch={false}`. When `prefetch` is set to `false`, prefetching will still occur on hover. Pages using Static Generation will preload `JSON` files with the data for faster page transitions. Prefetching is only enabled in production.

å‚è€ƒä¸€ä¸‹ `<Link />` æºç å®ç°ï¼š

https://github.com/vercel/next.js/blob/canary/packages/next/client/link.tsx#L205

ğŸ“’ [ã€ä¸€åº“ã€‘yalc: å¯èƒ½æ˜¯æœ€å¥½çš„å‰ç«¯linkè°ƒè¯•æ–¹æ¡ˆï¼ˆå·²ç»éå¸¸è°¦è™šäº†ï¼‰](https://juejin.cn/post/7033400734746066957)

ğŸ“’ [ä½¿ç”¨antv/G2ç”Ÿæ€åŠå¹´æœ‰æ„Ÿ](https://juejin.cn/post/7043068238539784206)

ğŸ“’ [Goï¼šç¬¦å·è¡¨æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ](https://mp.weixin.qq.com/s/nH0v9wYe64--1HT_QJcKag)

ğŸ“’ Dracula UI

åˆšå¼€æºï¼Œç‰¹ç‚¹å¦‚ä¸‹ã€‚

1ã€**ä¸ºé»‘æš—æ¨¡å¼è€Œå»º**ã€‚å¤§å¤šæ•°æ¨¡æ¿éƒ½æ˜¯ä½¿ç”¨æµ…è‰²çš„ï¼Œåæ¥æ‰æ”¹æˆæ·±è‰²çš„ã€‚æ·±è‰²ä¸»é¢˜ä¸åº”è¯¥æ˜¯ä¸€ä¸ªäº‹åçš„æƒ³æ³•ï¼Œå®ƒä»¬åº”è¯¥æ˜¯ä¸€ä¸ªé¦–è¦ä»»åŠ¡ã€‚

2ã€**è®¾è®¡å¸ˆå‹å¥½**ã€‚é€šè¿‡ä½¿ç”¨ä¸€ä¸ªé«˜åº¦å¯é…ç½®çš„è®¾è®¡ç³»ç»Ÿï¼ŒåŠ å¿«åŸå‹è®¾è®¡é˜¶æ®µã€‚é€šè¿‡åˆ©ç”¨ç²¾å¿ƒåˆ¶ä½œçš„Figmaæ–‡ä»¶ï¼Œè½»æ¾è¿›è¡Œåˆä½œã€‚

3ã€**å‹å¥½çš„å¼€å‘è€…ä½“éªŒ**ã€‚ä¸ç”¨æ‹…å¿ƒç±»åï¼Œåªéœ€ä½¿ç”¨ Visual Studio çš„ä»£ç ç‰‡æ®µã€‚ä½ å¯ä»¥åˆ©ç”¨è‡ªåŠ¨å®Œæˆçš„ä¼˜åŠ¿ï¼Œä¹Ÿå¯ä»¥ä»ä½ çš„ä»£ç ç¼–è¾‘å™¨ä¸­ç›´æ¥è®¿é—®æ•´ä¸ªæ–‡æ¡£ã€‚

https://ui.draculatheme.com/

ğŸ“’ React 18 å¿«åœ¨å“ª

ä¸»è¦æ˜¯ 3 ç‚¹ã€‚

1ã€ç”±äº React 18 æœ‰ Automatic Batchingï¼Œå¤šä¸ª setState åªä¼šè§¦å‘ä¸€æ¬¡æ¸²æŸ“ï¼Œè€Œåœ¨ 18 ä¹‹å‰ï¼ŒsetState å‡ æ¬¡å°±ä¼šæ¸²æŸ“å‡ æ¬¡
2ã€React 18 å¼•å…¥äº†æ–°çš„æœåŠ¡å™¨æ¸²æŸ“æ¶æ„ï¼Œä¼šå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œè¯·æ£€æŸ¥ä½ çš„æ¡†æ¶æ˜¯å¦æ”¯æŒ
3ã€React 18 å¼•å…¥äº†ç”¨äºæŠŠçŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºå¯ç»ˆç«¯çš„ startTransitionï¼Œè™½ç„¶ä¸èƒ½è®©é¡µé¢å˜å¿«ï¼Œä½†å¦‚æœç”¨æˆ·åœ¨å¯ä¸­æ–­çš„çŠ¶æ€æ›´æ–°ä¸­ç‚¹å‡»ï¼Œä¼šè®©ä½ çš„åº”ç”¨æ›´å…·æœ‰å“åº”æ€§

https://www.reddit.com/r/reactjs/comments/xmr9tg/comment/ippsuin/

ğŸ“’ å†è§ useEvent

useEvent åŸè®¡åˆ’è§£ä¸¤ä¸ªé—®é¢˜ï¼Œ1ï¼‰æ¸²æŸ“ä¼˜åŒ–ï¼Œ2ï¼‰useEffect é‡æ–°è§¦å‘é—®é¢˜ã€‚ä½†æ˜¯å‘ç°æ²¡åŠæ³•ä¸€ä¸‹å­åšä¸¤ä»¶äº‹ã€‚äºæ˜¯ useEvent RFC åºŸå¼ƒï¼Œè¿™ä¸¤ä¸ªé—®é¢˜ä¼šæ‹†å¼€äº†æ¥è§£ã€‚æ¸²æŸ“ä¼˜åŒ–é—®é¢˜å€¾å‘ç”¨ React Forgot è§£ï¼ŒuseEffect é‡æ–°è§¦å‘é—®é¢˜ä¼šé€šè¿‡å¦ä¸€ä¸ªä¸“é—¨è§£æ­¤é—®é¢˜çš„ RFC æ¥è§£ï¼Œå‘½åä¸Šåº”è¯¥ä¸å†ä¼šç”¨ useEventã€‚

https://github.com/reactjs/rfcs/pull/220#issuecomment-1259938816

ğŸ“’ Umi x Valtio

Umi åœ¨ 4.0.23 ä¸­åŠ å…¥äº† Valtio æ’ä»¶ã€‚è¿™æ˜¯åœ¨å¤§é‡è°ƒç ”ä¹‹åï¼ŒåŸºäºä¸­å°é¡¹ç›®çš„åœºæ™¯åšçš„å†³å®šï¼Œä½¿ç”¨ Valtio ä½œä¸ºä¸‹ä¸€ä»£çš„æ•°æ®æµã€‚

ä¸ºå•¥æ˜¯ valtioï¼Ÿ

valtio çš„ç‰¹ç‚¹æ˜¯å¤–éƒ¨å¤š Store + åŸºäº Proxyã€‚1ï¼‰ä¸ªäººç”¨ä¸æƒ¯ jotai å’Œ recoil è¿™ç§ react å†…éƒ¨åŸå­åŒ–çš„æ•°æ®æµæ–¹æ¡ˆï¼Œæ„Ÿè§‰å’Œè¢« redux åŸ¹å…»èµ·æ¥çš„å¿ƒæ™ºæ¨¡å‹æœ‰å†²çªï¼Œæ‰€ä»¥ä¼šæ›´å€¾å‘äºå¤–éƒ¨ Store ä¸€äº›ï¼Œ2ï¼‰ç”±äºåœºæ™¯æ˜¯ä¸­åå°ï¼Œå¯¹äºå…¼å®¹æ€§çš„å®¹å¿åº¦æ¯”è¾ƒé«˜ï¼Œæ¯”å¦‚ä¸ç”¨å…¼å®¹ IE11ï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥ç”¨åŸºäº Proxy çš„æ•°æ®æµæ–¹æ¡ˆï¼Œè¿™ç±»æ•°æ®æµæ–¹æ¡ˆåœ¨æ›´æ–°æ•°æ®å’Œè¯»å–æ•°æ®æ—¶éƒ½æ›´ç®€å•ã€‚

ä¸ºå•¥ä¸æ˜¯ zustandï¼Ÿ

1ã€zustand å’Œ valtio æ˜¯åŒä¸€ä¸ªä½œè€…å†™çš„ï¼ŒåŠŸèƒ½è¦†ç›–ä¸Šå…¶å®æ¯”è¾ƒç±»ä¼¼ï¼Œæœ€å¤§çš„åŒºåˆ«æ˜¯ valtio åŸºäº proxy è€Œ zustand ä¸æ˜¯ã€‚ä¸ªäººæœ‰å‡ ä¸ªæ–¹é¢çš„è€ƒè™‘ï¼Œ1ï¼‰æ›´æ–°æ•°æ®ï¼Œ2ï¼‰è¯»å–æ•°æ®ï¼Œ3ï¼‰ç±»å‹æç¤ºã€‚

2ã€æ›´æ–°æ•°æ®çš„æ–¹å¼æ›´ç¬¦åˆäººæ€§ï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥ `state.todos['321'].completed = true`ï¼Œè€Œä¸ç”¨ `setState(todos => ({ â€¦todos, 321: { â€¦todos['321'], completed: true } }))`ã€‚å½“ç„¶ï¼Œè¿™ä¸€ç‚¹é proxy æ–¹æ¡ˆå¯åŸºäº immer å®ç°å’Œ proxy æ–¹æ¡ˆç±»ä¼¼çš„æ“ä½œã€‚

3ã€è¯»å–æ•°æ®é»˜è®¤é«˜æ€§èƒ½ï¼Œæ— éœ€ selectorã€‚é proxy æ–¹æ¡ˆæ¯”å¦‚ react-redux å’Œ zustand ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œé¿å…ä¸å¿…è¦çš„ re-renderï¼Œé€šå¸¸ä¼šé€šè¿‡ selector é€‰æ‹© store çš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¼šå¸¦æ¥ä¸å¿…è¦çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚åŸºäº Proxy çš„æ–¹æ¡ˆæ˜¯å“åº”å¼çš„ï¼Œæ— éœ€ selectorï¼Œé»˜è®¤é«˜æ€§èƒ½ã€‚

4ã€ç±»å‹æç¤ºçš„å·®å¼‚ä¸»è¦åœ¨æ‰©å±•ä¸Šã€‚valtio ç”¨çš„æ˜¯ç»„åˆå¼ï¼Œzustand ç”¨çš„æ˜¯ middlewareã€‚æ²¡å…·ä½“è¯•è¿‡ zustand çš„ middlewareï¼Œä½†ä¸ªäººç†è§£ï¼Œç†è®ºä¸Š middleware çš„ç±»å‹æç¤ºæ²¡æœ‰ valtio å‹å¥½ã€‚æ¯”å¦‚ valtio çš„ proxyWithHistory ä¼šæŠŠæ•°æ®ç»“æ„æ”¹æˆ `{ value, history, redo, undo, â€¦ }` è¿™ç§ï¼Œåœ¨ç±»å‹æç¤ºä¸Šå¯ä»¥å®Œç¾è¡”æ¥ã€‚

https://umijs.org/docs/max/valtio
