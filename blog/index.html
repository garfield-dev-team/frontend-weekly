<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/frontend-weekly/blog/rss.xml" title="Frontend Weekly RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/frontend-weekly/blog/atom.xml" title="Frontend Weekly Atom Feed"><title data-rh="true">Blog | Frontend Weekly</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/frontend-weekly/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | Frontend Weekly"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/frontend-weekly/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/frontend-weekly/blog"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/frontend-weekly/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/frontend-weekly/blog" hreflang="x-default"><link rel="stylesheet" href="/frontend-weekly/assets/css/styles.abaaece9.css">
<link rel="preload" href="/frontend-weekly/assets/js/runtime~main.84fc11e4.js" as="script">
<link rel="preload" href="/frontend-weekly/assets/js/main.ed827796.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/frontend-weekly/"><div class="navbar__logo"><img src="/frontend-weekly/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/frontend-weekly/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">Frontend Weekly</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/frontend-weekly/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">æŠ€æœ¯äº¤æµç¾¤</a><ul class="dropdown__menu"><li><a href="https://github.com/garfield-dev-team/frontend-weekly/tree/main/static/img/IMG_0058.JPG" target="_blank" rel="noopener noreferrer" class="dropdown__link">â­ï¸ å‰ç«¯äº¤æµç¾¤<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/garfield-dev-team/frontend-weekly/tree/main/static/img/IMG_0058.JPG" target="_blank" rel="noopener noreferrer" class="dropdown__link">ğŸŒ› äº‘å±…å±±èŒ¶å®¤<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/garfield-dev-team/frontend-weekly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_TMXw thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_V4zb margin-bottom--md">All our posts</div><ul class="sidebarItemList_uHd5 clean-list"><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/welcome">ç½®é¡¶å†…å®¹</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/6æœˆ5æ—¥å†…å®¹æ±‡æ€»">6æœˆ5æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/5æœˆ29æ—¥å†…å®¹æ±‡æ€»">5æœˆ29æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/5æœˆ22æ—¥å†…å®¹æ±‡æ€»">5æœˆ22æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/5æœˆ15æ—¥å†…å®¹æ±‡æ€»">5æœˆ15æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/5æœˆ8æ—¥å†…å®¹æ±‡æ€»">5æœˆ8æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/5æœˆ1æ—¥å†…å®¹æ±‡æ€»">5æœˆ1æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/4æœˆ24æ—¥å†…å®¹æ±‡æ€»">4æœˆ24æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/4æœˆ17æ—¥å†…å®¹æ±‡æ€»">4æœˆ17æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/4æœˆ10æ—¥å†…å®¹æ±‡æ€»">4æœˆ10æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/4æœˆ3æ—¥å†…å®¹æ±‡æ€»">4æœˆ3æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/3æœˆ27æ—¥å†…å®¹æ±‡æ€»">3æœˆ27æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/3æœˆ20æ—¥å†…å®¹æ±‡æ€»">3æœˆ20æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/3æœˆ13æ—¥å†…å®¹æ±‡æ€»">3æœˆ13æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/3æœˆ6æ—¥å†…å®¹æ±‡æ€»">3æœˆ6æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/2æœˆ27æ—¥å†…å®¹æ±‡æ€»">2æœˆ27æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/2æœˆ20æ—¥å†…å®¹æ±‡æ€»">2æœˆ20æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/2æœˆ13æ—¥å†…å®¹æ±‡æ€»">2æœˆ13æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/2æœˆ6æ—¥å†…å®¹æ±‡æ€»">2æœˆ6æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/1æœˆ30æ—¥å†…å®¹æ±‡æ€»">1æœˆ30æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/1æœˆ23æ—¥å†…å®¹æ±‡æ€»">1æœˆ23æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/1æœˆ16æ—¥å†…å®¹æ±‡æ€»">1æœˆ16æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/1æœˆ9æ—¥å†…å®¹æ±‡æ€»">1æœˆ9æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/1æœˆ2æ—¥å†…å®¹æ±‡æ€»">1æœˆ2æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/12æœˆ26æ—¥å†…å®¹æ±‡æ€»">12æœˆ26æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/12æœˆ19æ—¥å†…å®¹æ±‡æ€»">12æœˆ19æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/12æœˆ12æ—¥å†…å®¹æ±‡æ€»">12æœˆ12æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/12æœˆ5æ—¥å†…å®¹æ±‡æ€»">12æœˆ5æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/11æœˆ28æ—¥å†…å®¹æ±‡æ€»">11æœˆ28æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/11æœˆ21æ—¥å†…å®¹æ±‡æ€»">11æœˆ21æ—¥å†…å®¹æ±‡æ€»</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/frontend-weekly/blog/11æœˆ14æ—¥å†…å®¹æ±‡æ€»">11æœˆ14æ—¥å†…å®¹æ±‡æ€»</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/welcome">ç½®é¡¶å†…å®¹</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-12-12T00:00:00.000Z" itemprop="datePublished">December 12, 2022</time> Â· <!-- -->48 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>â­ï¸ æ¯å‘¨æ›´æ–°ä¼˜è´¨æŠ€æœ¯æ–‡ç« ï¼Œæ¬¢è¿ç‚¹èµå…³æ³¨ï¼</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/type-script">TypeScript</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/å‰ç«¯æ¡†æ¶">å‰ç«¯æ¡†æ¶</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/webpack">Webpack</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/æºç ç³»åˆ—">æºç ç³»åˆ—</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/ä¸šåŠ¡æˆé•¿">ä¸šåŠ¡æˆé•¿</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/ç»„ä»¶åº“å®æˆ˜">ç»„ä»¶åº“å®æˆ˜</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/ç½‘ç»œç›¸å…³">ç½‘ç»œç›¸å…³</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/æœºå™¨å­¦ä¹ ">æœºå™¨å­¦ä¹ </a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/java">Java</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/frontend-weekly/blog/tags/golang">Golang</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about ç½®é¡¶å†…å®¹" href="/frontend-weekly/blog/welcome"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/6æœˆ5æ—¥å†…å®¹æ±‡æ€»">6æœˆ5æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-06-05T00:00:00.000Z" itemprop="datePublished">June 5, 2022</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ Chrome å¦‚ä½•è°ƒè¯•ç§»åŠ¨ç«¯ H5 é¡µé¢</p><blockquote><p>chrome://inspect/#devices</p></blockquote><p>ğŸ“’ æ”¯ä»˜å®ä½“éªŒç§‘æŠ€ Umi ç³»åˆ—æ–‡ç« </p><p><a href="https://www.yuque.com/antfe/featured/uf1bok" target="_blank" rel="noopener noreferrer">Umi 4 ç‰¹æ€§ 05ï¼šç¨³å®šç™½ç›’æ€§èƒ½å¥½çš„ ESLint</a></p><p>ğŸ“’ å¦‚ä½•å›æ»š Git åˆ†æ”¯ä»£ç </p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># æ‰¾åˆ°éœ€è¦å›æ»šçš„ç‰ˆæœ¬å“ˆå¸Œï¼Œæ‰§è¡Œ git reset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> reset --hard HEAD^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ç„¶åå¼ºåˆ¶ push</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push -f -u origin pre</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://zhuanlan.zhihu.com/p/137856034" target="_blank" rel="noopener noreferrer">æ‹œæ‰˜ï¼Œä¸è¦å†é—®æˆ‘Gitå¦‚ä½•å›æ»šä»£ç </a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/Sz8u6lzkL1nnpRxGrdbYJg" target="_blank" rel="noopener noreferrer">å¦‚ä½•åä¸½çš„å®ç°ä¸€å¥—è„šæ‰‹æ¶ - ä»¥umicliå’Œè½¬è½¬zzcliä¸ºä¾‹</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/ZTI-8RI0l314Ki9oBxqRWw" target="_blank" rel="noopener noreferrer">æ·±å…¥æµ…å‡º npm &amp; yarn &amp; pnpm åŒ…ç®¡ç†æœºåˆ¶</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/LL6VZj36PKftbwaybBFmXg" target="_blank" rel="noopener noreferrer">ä¸€æ–‡å¸¦ä½ è¿›å…¥å¾®å‰ç«¯ä¸–ç•Œ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/R6Xr8SoJicZB8-P4H2SSPA" target="_blank" rel="noopener noreferrer">ä½ è¿˜åœ¨æ‰‹åŠ¨éƒ¨ç½²åŸ‹ç‚¹å—ï¼Ÿä»0åˆ°1å¼€å‘BabelåŸ‹ç‚¹è‡ªåŠ¨æ¤å…¥æ’ä»¶</a></p><p>ğŸ“’ ä¸€ä¸ªä¸‰å°æ—¶çš„ React Native é€Ÿæˆè¯¾ </p><blockquote><p><a href="https://www.youtube.com/watch?v=VozPNrt-LfE" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=VozPNrt-LfE</a></p></blockquote><p>ğŸ“’ ä½¿ç”¨ Three.jsï¼šä¸€æ¬¾æµè¡Œçš„ 3D JavaScript åº“</p><blockquote><p><a href="https://betterprogramming.pub/working-with-three-js-the-popular-3d-javascript-library-bd2e9b03c95a?gi=8c31e429644f" target="_blank" rel="noopener noreferrer">https://betterprogramming.pub/working-with-three-js-the-popular-3d-javascript-library-bd2e9b03c95a?gi=8c31e429644f</a></p></blockquote><p>ğŸ“’ Next.js åç»­è§„åˆ’çš„ RFCï¼šå³å°†åˆ°æ¥çš„é‡å¤§å˜åŒ–</p><blockquote><p><a href="https://nextjs.org/blog/layouts-rfc" target="_blank" rel="noopener noreferrer">https://nextjs.org/blog/layouts-rfc</a></p></blockquote><p>ğŸ“’ 2022 å¹´ React çŠ¶æ€ç®¡ç†åº“ç»¼è¿°</p><p>React çš„ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥çµæ´»åœ°é€‚åº”ä¸åŒçš„å¼€å‘æ–¹å¼ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬çŠ¶æ€ç®¡ç†æ–¹é¢ã€‚è¿™ç¯‡æ–‡ç« æ€»ç»“äº†å‡ ä¸ªæµè¡Œçš„çŠ¶æ€ç®¡ç†åº“ï¼ŒåŒ…æ‹¬ Zustandã€Recoilï¼ˆæ¥è‡ª Facebookï¼‰ã€XStateï¼Œå½“ç„¶è¿˜æœ‰ Reduxã€‚</p><blockquote><p><a href="https://www.albertgao.xyz/2022/02/19/react-state-management-libraries-2022/" target="_blank" rel="noopener noreferrer">https://www.albertgao.xyz/2022/02/19/react-state-management-libraries-2022/</a></p></blockquote><p>ğŸ“’ <a href="https://www.yuque.com/surfacew/fe/qg0uev" target="_blank" rel="noopener noreferrer">æ·±å…¥æµ…å‡ºå‰ç«¯åšæ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥</a></p><p>â­ï¸ â­ï¸ ç°ä»£ Monorepo å·¥ç¨‹æŠ€æœ¯é€‰å‹ï¼ŒèŠèŠæˆ‘çš„æ€è€ƒ</p><p>æ€»ç»“ä¸€ä¸‹ï¼š</p><ul><li>ä½¿ç”¨ PNPM ä½œä¸º monorepo é¡¹ç›®çš„åŒ…ç®¡ç†å·¥å…·</li><li>ä½¿ç”¨ Changesets ä½œä¸º monorepo é¡¹ç›®çš„å‘åŒ…å·¥å…·</li><li>ä½¿ç”¨ Turborepo ä½œä¸º monorepo é¡¹ç›®å¤šåŒ…ä»»åŠ¡æ‰§è¡Œå·¥å…·</li></ul><p><a href="https://mp.weixin.qq.com/s/99nozy-vtFMGcBTxYvumWA" target="_blank" rel="noopener noreferrer">ç°ä»£ Monorepo å·¥ç¨‹æŠ€æœ¯é€‰å‹ï¼ŒèŠèŠæˆ‘çš„æ€è€ƒ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/T5vXADH4nXqAxyDcKWE64Q" target="_blank" rel="noopener noreferrer">MySQL ä¸»ä»ï¼Œ6 åˆ†é’Ÿå¸¦ä½ æŒæ¡</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/1HyQLZcnZN6I27p_hbfUPg" target="_blank" rel="noopener noreferrer">ã€ç¬¬2628æœŸã€‘åŸºäºè®¾è®¡ç¨¿è¯†åˆ«çš„å¯è§†åŒ–ä½ä»£ç ç³»ç»Ÿå®è·µ</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7098211898990002207" target="_blank" rel="noopener noreferrer">å‰ç«¯é…ç½®åŒ–çœŸé¦™ï½ä¸Šç­åˆå¤šäº†60%çš„æ‘¸ğŸŸæ—¶é—´</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/5æœˆ29æ—¥å†…å®¹æ±‡æ€»">5æœˆ29æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-29T00:00:00.000Z" itemprop="datePublished">May 29, 2022</time> Â· <!-- -->11 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ å¦‚ä½•å°†æ•°ç»„è½¬ä¸ºå¯¹è±¡</p><p>ä¹‹å‰åœ¨ä¸šåŠ¡ä¸­é‡åˆ°ä¸€ä¸ªåœºæ™¯ï¼Œé…ç½® Webpack alias çš„æ—¶å€™ï¼Œä¼šå‡ºç°å¾ˆå¤šæ¨¡æ¿ä»£ç ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">resolve</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">alias</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;@&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;src&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;@foo&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;src/foo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;@bar&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;src/bar&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é‚£ä¹ˆå…¶å®æ˜¯å¯ä»¥é€šè¿‡æ•°ç»„çš„æ–¹å¼å¹²æ‰æ¨¡æ¿ä»£ç ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">constructAlias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fromEntries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">^\@(.*?)$</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;@&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@foo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@bar&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">constructAlias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>ä½¿ç”¨æ•°ç»„çš„ <code>map</code> æ–¹æ³•æ˜ å°„å‡ºä¸€ä¸ª entry æ•°ç»„ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºå½¢å¦‚ <code>[key, value][]</code> çš„ç»“æ„ï¼Œç„¶åä½¿ç”¨ <code>Object.fromEntries</code> å°† entry æ•°ç»„è½¬ä¸ºå¯¹è±¡</p></blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ<code>Object.fromEntries</code> æ˜¯ ES2019 è¯­æ³•ï¼Œæ”¯æŒ Chrome &gt;= 73 å’Œ Node.js &gt;= 12.0.0ã€‚æµè§ˆå™¨ç¯å¢ƒé—®é¢˜ä¸å¤§ï¼Œä¸€èˆ¬éƒ½ä¼šé…ç½® Babel polyfill å…¼å®¹ï¼Œä½†æ˜¯ Node.js ç¯å¢ƒå°±ä¼šå‡ºä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚ä¸€äº› CI ç¯å¢ƒçš„ Node.js ç‰ˆæœ¬å¾ˆè€ï¼Œå°±ä¼šæŠ¥é”™è¿›è€Œå¯¼è‡´æ„å»ºå¤±è´¥ã€‚å› æ­¤é€šå¸¸å¼€å‘çš„è¯ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ç”¨æ•°ç»„çš„ <code>reduce</code> æ›¿ä»£ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">constructAlias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accu</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">^\@(.*?)$</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> accu</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ An introductory guide to Contiuous Integration and Delivery/Deployment (CI/CD) for Frontend Develope</p><blockquote><p><a href="https://blog.tegadev.xyz/an-introductory-guide-to-ci-cd-for-frontend-developers" target="_blank" rel="noopener noreferrer">https://blog.tegadev.xyz/an-introductory-guide-to-ci-cd-for-frontend-developers</a></p></blockquote><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/JUXz9TOKbkO1oAzHjVfwnQ" target="_blank" rel="noopener noreferrer">åŸºäºè®¾è®¡ç¨¿è¯†åˆ«çš„å¯è§†åŒ–ä½ä»£ç ç³»ç»Ÿå®è·µ</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7102328973820067877" target="_blank" rel="noopener noreferrer">è¢«dissæ€§èƒ½å·®ï¼ŒDanè¿å¤œä¼˜åŒ–Reactæ–°æ–‡æ¡£</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7102233142567632933" target="_blank" rel="noopener noreferrer">Node.js è°ƒè¯•ä¸€è·¯èµ°æ¥ç»å†äº†ä»€ä¹ˆ</a></p><p>ğŸ“’ å¦‚ä½•è§£å†³ç»„ä»¶åº“æ‰“åŒ…æ¡ä»¶å¼•å…¥</p><p>ç”±äº <code>import</code> è¯­å¥å¿…é¡»æ”¾åœ¨é¡¶å±‚ï¼Œä¸èƒ½æ”¾åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ã€‚å¦‚æœåŒæ—¶ä¿ç•™ä¸¤ä¸ª <code>import</code> è¯­å¥åˆ™ä¼šå¯¼è‡´ä¸¤ä¸ªåŒ…éƒ½è¢«æ‰“åŒ…è¿›å»ã€‚æ‰€ä»¥è§£å†³çš„æ–¹æ¡ˆå°±æ˜¯åœ¨æ„å»ºé˜¶æ®µåŠ¨æ€ä¿®æ”¹ <code>import</code> è¯­å¥ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>è¦æ³¨æ„ä¿®æ”¹æ—¶æœºï¼Œå‡å¦‚æ‰“åŒ…å·¥å…·ä¾èµ–åˆ†æå·²ç»å®Œæˆï¼Œè¿™æ—¶å€™å†ä¿®æ”¹å°±å¤ªè¿Ÿäº†</li><li>å¦å¤–è¿˜è¦æ³¨æ„ä¸åŒæ‰“åŒ…å·¥å…·çš„å…¼å®¹æ€§ï¼Œå¦‚æœå¼€å‘ rollup æ’ä»¶ï¼Œå¯èƒ½å¯¼è‡´ webpackã€vite ç­‰å·¥å…·ä¸å…¼å®¹</li></ul><p>å› æ­¤é€‰æ‹©å¼€å‘ babel æ’ä»¶ï¼Œå¯ä»¥å…¼å®¹å„ç§æ‰“åŒ…å·¥å…·ã€‚</p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/4cZ3rJz4P5bSRSeXDbFoMQ" target="_blank" rel="noopener noreferrer">UMI3æºç è§£æç³»åˆ—ä¹‹è¿è¡Œæ—¶æ’ä»¶æœºåˆ¶</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/g1fr1fnGspi7SETyP9B6rA" target="_blank" rel="noopener noreferrer">æ¨èä¸€ä¸ªå‰ç«¯æŠ€æœ¯é€‰å‹ç¥å™¨</a></p><p>ğŸ“’ Webpack æ¨¡å—æ„å»ºç¼“å­˜</p><p>æ¨¡å—æ„å»ºç¼“å­˜ï¼Œæ¨èä½¿ç”¨ Webpack5 çš„ <code>filesystem cache</code>ï¼ŒæŠ€æœ¯æ›´æˆç†Ÿï¼Œå¯ä»¥å‚è€ƒ CRA çš„ Webpack é…ç½®ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">cache</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;filesystem&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createEnvironmentHash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">raw</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">cacheDirectory</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">appWebpackCache</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">store</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;pack&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">buildDependencies</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">defaultWebpack</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;webpack/lib/&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">__filename</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">tsconfig</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">appTsConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">appJsConfig</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">f</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">existsSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…³äºæŒä¹…åŒ–ç¼“å­˜ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>é»˜è®¤ç¼“å­˜çš„è·¯å¾„æ˜¯ <code>node_modules/.cache/webpack</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦åˆ é™¤ <code>node_modules</code>ï¼Œç›¸å½“äºç¼“å­˜ä¹Ÿè¢«æ¸…ç©ºäº†</li><li>æœ¬åœ°å’Œ CI ç¯å¢ƒçš„ç¼“å­˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæœ¬åœ°çš„ç¼“å­˜æ— æ³•åœ¨ CI ç¯å¢ƒä½¿ç”¨ã€‚åœ¨ CI ç¯å¢ƒä¸­éœ€è¦ä½¿ç”¨ CI çš„ç¼“å­˜æœºåˆ¶</li></ul><blockquote><p><a href="https://github.com/facebook/create-react-app/blob/main/packages/react-scripts/config/webpack.config.js" target="_blank" rel="noopener noreferrer">https://github.com/facebook/create-react-app/blob/main/packages/react-scripts/config/webpack.config.js</a></p></blockquote><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/2OXIGB5qQFc2isIxhm33bg" target="_blank" rel="noopener noreferrer">æœ€é«˜æ€§èƒ½çš„åŒ…ç®¡ç†å™¨-pnpm</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/dtmYRsThI3o_a7AWnxFkDw" target="_blank" rel="noopener noreferrer">ã€ç¬¬2624æœŸã€‘Fastify å¦‚ä½•å®ç°æ›´å¿«çš„ JSON åºåˆ—åŒ–</a></p><p>ğŸ“’ å¦‚ä½•è®¾ç½® npm ç§æœ‰æº</p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•å»ºä¸€ä¸ª <code>.yarnrc</code> æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># æ·˜å®æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">registry</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://registry.npmmirror.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ç§æœ‰æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@myscope:registry</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://mycustomregistry.example.org</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ ·çš„è¯ï¼Œ<code>package.json</code> ä¸­å¸¦æœ‰ <code>@myscope</code> å‰ç¼€çš„ä¾èµ–ï¼Œä¾‹å¦‚ <code>@myscope/design-system</code> éƒ½ä¼šä»ç§æœ‰æºä¸‹è½½ã€‚</p><p>ğŸ“’ <a href="https://juejin.cn/post/7101608088100143118" target="_blank" rel="noopener noreferrer">å‰ç«¯å¤šçº¿ç¨‹ç¼–ç¨‹æ¢ç´¢</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/pSoSpuLXfeghfMvEfl38WA" target="_blank" rel="noopener noreferrer">ç²¾å¦™çš„é…åˆï¼æ–‡å­—è½®æ’­ä¸å›¾ç‰‡è½®æ’­ï¼ŸCSS ä¸åœ¨è¯ä¸‹</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/3yy9V5HMDWPFwEf1cyL-lw" target="_blank" rel="noopener noreferrer">å¹¶å‘æ¸²æŸ“ä¼˜åŒ–ï¼šè®©æ–‡ä»¶æ ‘çš„æ¸²æŸ“åˆå¿«åˆç¨³</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/2MsgPh9AZtUoJpsLLdOynQ" target="_blank" rel="noopener noreferrer">UMI3æºç è§£æç³»åˆ—ä¹‹æ„å»ºåŸç†</a></p><p>â­ï¸ çœ‹äº†9ä¸ªå¼€æºçš„ Vue3 ç»„ä»¶åº“ï¼Œå‘ç°äº†è¿™äº›å‰ç«¯çš„æµè¡Œè¶‹åŠ¿</p><p>å¯¹åŒ…ç®¡ç†å™¨çš„æ€»ç»“éå¸¸å¥½ï¼Œæ¨èçœ‹ä¸€ä¸‹ã€‚</p><p><strong>npm@v3 ä¹‹å‰</strong></p><ul><li>åµŒå¥—ç»“æ„ï¼ˆnestï¼‰ï¼Œä¼šå‡ºç°å¤§é‡é‡å¤è£…åŒ…çš„é—®é¢˜</li><li>å› ä¸ºæ˜¯æ ‘å‹ç»“æ„ï¼Œ<code>node_modules</code> åµŒå¥—å±‚çº§è¿‡æ·±ï¼Œå¯¼è‡´æ–‡ä»¶è·¯å¾„è¿‡é•¿</li><li>æ¨¡å—å®ä¾‹ä¸èƒ½å…±äº«ï¼Œä¾‹å¦‚åœ¨ä¸¤ä¸ªä¸åŒåŒ…å¼•å…¥çš„ React ä¸æ˜¯åŒä¸€ä¸ªæ¨¡å—å®ä¾‹</li></ul><p><strong>npm@v3 / yarn</strong></p><ul><li>åˆ†èº«ä¾èµ–ï¼šnpm@v3 ä½¿ç”¨æ‰å¹³åŒ–ï¼ˆflatï¼‰çš„æ–¹å¼å®‰è£…ä¾èµ–ï¼Œä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†é‡å¤è£…åŒ…çš„é—®é¢˜ï¼Œä½†æ˜¯æ³¨æ„å¹¶æ²¡æœ‰å®Œå…¨è§£å†³ï¼Œä¾‹å¦‚ A å’Œ B ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„ Cï¼Œä¼šå¯¼è‡´ C è¢«å®‰è£…ä¸¤æ¬¡</li><li>å¹½çµä¾èµ–ï¼šç”±äºä½¿ç”¨æ‰å¹³åŒ–æ–¹å¼å®‰è£…ï¼Œ<code>package.json</code> é‡Œå¹¶æ²¡æœ‰å†™å…¥çš„åŒ…ç«Ÿç„¶ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†</li><li>å¹³é“ºå‡å°‘å®‰è£…æ²¡æœ‰å‡çœæ—¶é—´ï¼Œå› ä¸ºæ‰å¹³åŒ–ç®—æ³•æ¯”è¾ƒå¤æ‚ï¼Œæ—¶é—´å±…ç„¶è¿˜å¢åŠ äº†</li></ul><p><strong>npm@v5 / yarn</strong></p><p>è¯¥ç‰ˆæœ¬å¼•å…¥äº†ä¸€ä¸ª <code>lock</code> æ–‡ä»¶ï¼Œä»¥è§£å†³ <code>node_modules</code> å®‰è£…ä¸­çš„ä¸ç¡®å®šå› ç´ ã€‚è¿™ä½¿å¾—æ— è®ºä½ å®‰è£…å¤šå°‘æ¬¡ï¼Œéƒ½èƒ½æœ‰ä¸€ä¸ªä¸€æ ·ç»“æ„çš„<code>node_modules</code>ã€‚</p><p>ç„¶è€Œï¼Œå¹³é“ºå¼çš„ç®—æ³•çš„å¤æ‚æ€§ï¼Œå¹½çµä¾èµ–ä¹‹ç±»çš„é—®é¢˜è¿˜æ˜¯æ²¡æœ‰è§£å†³ã€‚</p><p><a href="https://juejin.cn/post/7092766235380678687" target="_blank" rel="noopener noreferrer">çœ‹äº†9ä¸ªå¼€æºçš„ Vue3 ç»„ä»¶åº“ï¼Œå‘ç°äº†è¿™äº›å‰ç«¯çš„æµè¡Œè¶‹åŠ¿</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/yxsiWiZi08B5tC3Ab7DKWg" target="_blank" rel="noopener noreferrer">Node.js Web æ¡†æ¶ Midway å…¥é—¨å®æˆ˜</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/jU0awhez7QzN_nKrm4BNwg" target="_blank" rel="noopener noreferrer">è‚äº†ä¸€ä¸ªæœˆçš„ DDDï¼Œä¸€æ–‡å¸¦ä½ æŒæ¡</a></p><p>ğŸ“’ ä½¿ç”¨ rollup æ„å»ºç¬¬ä¸‰æ–¹åº“åŒ…æ‹¬å“ªäº›è¿‡ç¨‹</p><ul><li>æµè§ˆå™¨ä¸å…¼å®¹çš„è¯­æ³•è½¬æ¢<ul><li>Vue æ–‡ä»¶å¤„ç†ï¼š<code>rollup-plugin-vue</code></li><li>JSXã€TS è¯­æ³•ç¼–è¯‘ï¼š<code>rollup-plugin-babel</code></li><li>æ”¯æŒ CSS åŠ è½½ã€æ·»åŠ å‰ç¼€ã€å‹ç¼©ã€scss/less é¢„ç¼–è¯‘ï¼š<code>rollup-plugin-postcss</code></li></ul></li><li>ç¼–è¯‘å…¼å®¹<ul><li>ä»…é™è¯­æ³•è½¬æ¢ï¼Œä¸å»ºè®® polyfillï¼š<code>rollup-plugin-babel</code></li></ul></li><li>æ··æ·†å‹ç¼©<ul><li>å¯¹åº”ï¼š<code>rollup-plugin-terser</code></li></ul></li><li>æ‰“åŒ…ä¸ºä¸€ä»½æ–‡ä»¶ï¼ˆæ³¨æ„ <code>peerDependencies</code> å¤–éƒ¨åŒ–ï¼‰ï¼Œå¤šç§æ‰“åŒ…æ ¼å¼ï¼Œç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ç­‰</li><li>å·¥ç¨‹è´¨é‡ä¿éšœï¼Œä¾‹å¦‚ ESLintã€TS ç±»å‹æ£€æŸ¥ã€å•å…ƒæµ‹è¯•ç­‰</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>å‰é¢ä¸¤æ­¥å¯ä»¥é¿å…ä¸šåŠ¡é¡¹ç›®çš„ <code>babel-loader</code> å¤„ç† <code>node_modules</code> ä¸‹çš„æ¨¡å—ï¼Œæå‡æ„å»ºæ•ˆç‡ã€‚</p></div></div><p>ğŸ“’ å¦‚ä½•å®ç°ä¸»é¢˜åˆ‡æ¢</p><p>å…³é”®çœ‹åœºæ™¯ï¼Œå¦‚æœéœ€è¦åœ¨è¿è¡Œç¯å¢ƒåŠ¨æ€åˆ‡æ¢ï¼Œå°±éœ€è¦æ‰“åŒ…ä¸¤å¥—æ ·å¼ï¼Œç„¶åé€šè¿‡åª’ä½“æŸ¥è¯¢ä¹‹ç±»çš„æ–¹å¼è¿›è¡Œåˆ‡æ¢ã€‚å¦‚æœä¸éœ€è¦åŠ¨æ€åˆ‡æ¢ï¼Œå¯ä»¥åœ¨æ„å»ºçš„æ—¶å€™è¿›è¡Œå˜é‡æ³¨å…¥ã€‚</p><p>è‡ªå·±å¼€å‘çš„ç»„ä»¶åº“æ˜¯å¦æœ‰å¿…è¦è®¾ç½®ä¸»é¢˜ï¼Ÿæ ·å¼éƒ½ä¸æ‰“åŒ…ï¼Œless å˜é‡æ³¨å…¥è‚¯å®šæ²¡ç”¨çš„ï¼›å¦‚æœæä¸ª <code>theme-reset.less</code>ï¼Œè‚¯å®šä¼šæ±¡æŸ“åˆ°å…¨å±€ã€‚æœ€å¥½è¿˜æ˜¯åœ¨ä¸šåŠ¡å·¥ç¨‹é‡Œé¢è®¾ç½®ä¸»é¢˜ã€‚</p><p>ğŸ“’ å¦‚ä½•åšé¦–å±æ€§èƒ½ä¼˜åŒ–</p><p><strong>1. è·¯ç”±æ‡’åŠ è½½</strong></p><p>é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯è§£å†³èµ„æºå†—ä½™é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰éœ€æŠ•å–‚ JS èµ„æºï¼ŒåªæŠŠæ¸²æŸ“å½“å‰é¡µé¢éœ€è¦çš„èµ„æºæŠ•å–‚ç»™æµè§ˆå™¨ï¼Œå¯¹åº”çš„æ–¹æ¡ˆæ˜¯è·¯ç”±æ‡’åŠ è½½ã€‚</p><p><strong>2. åˆ†åŒ…ä¼˜åŒ–</strong></p><p>åœ¨æŒ‰éœ€æŠ•å–‚ JS èµ„æºçš„åŸºç¡€ä¸Šï¼Œå¯¹äºä¸€äº›ä¸éœ€é¢‘ç¹ä¿®æ”¹ã€ä½“ç§¯åˆå¾ˆå¤§çš„ä¾èµ–è¿›è¡Œæ‹†åŒ…å¤„ç†ï¼Œä¾‹å¦‚ <code>react</code>ã€<code>react-dom</code>ï¼Œå•ç‹¬åˆ†åŒ…è®¾ç½®å¼ºç¼“å­˜ã€‚</p><p><strong>3. æœåŠ¡ç«¯æ¸²æŸ“</strong></p><p>å¦‚æœæŒ‰éœ€æŠ•å–‚ JS èµ„æºè¿˜æ˜¯å¤ªæ…¢ï¼Œå¯ä»¥è€ƒè™‘æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼Œåœ¨æœåŠ¡ç«¯ç›´æ¥æŠŠå½“å‰é¡µé¢çš„ HTML ä¸¢ç»™æµè§ˆå™¨ï¼Œå¯ä»¥ç†è§£ä¸ºæŒ‰éœ€æŠ•å–‚ HTML é¡µé¢ã€‚</p><p><strong>4. é™æ€ç”Ÿæˆ &amp;&amp; æ··åˆæ¸²æŸ“</strong></p><p>æœåŠ¡ç«¯æ¸²æŸ“å¯ä»¥ç†è§£ä¸ºåœ¨æœåŠ¡ç«¯è°ƒæ¥å£æ¸²æŸ“å‡º HTML ä¸¢ç»™æµè§ˆå™¨ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯å­˜åœ¨æ€§èƒ½å¼€é”€ã€‚å¯¹äºä¸€äº›ä¸éœ€è¦åŠ¨æ€æ•°æ®çš„é¡µé¢ï¼Œä¾‹å¦‚æ–‡æ¡£ã€åšå®¢ç­‰ï¼Œå¯ä»¥è€ƒè™‘é™æ€ç”Ÿæˆï¼ˆSSGï¼‰ï¼Œå³åœ¨æ„å»ºçš„æ—¶å€™å°±æ¸²æŸ“å‡º HTMLï¼Œå¯ä»¥æå¤§æå‡é¦–å±æ€§èƒ½ï¼Œå½“ç„¶æ›´å¤šæ—¶å€™æ˜¯ SSG å’Œ SSR æ··åˆæ¸²æŸ“ã€‚</p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/KwmNzTdjMB-ljQ0ysEGalg" target="_blank" rel="noopener noreferrer">æ·±å…¥ç†è§£ Linux CPU ä¸Šä¸‹æ–‡åˆ‡æ¢</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/qUiiUkKOyW-QnBz1WEOTwQ" target="_blank" rel="noopener noreferrer">ä¸­åå° CSS Modules æœ€ä½³å®è·µ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/5UHSGnnAr1-j37AgJ6t0eQ" target="_blank" rel="noopener noreferrer">åœ¨ React ä¸­å®ç°æ¡ä»¶æ¸²æŸ“çš„ 7 ç§æ–¹æ³•</a></p><p>â­ï¸ <a href="https://mp.weixin.qq.com/s/PhuFfNAhvXAqW4eSbUqpKQ" target="_blank" rel="noopener noreferrer">2022å¹´å€¼å¾—ä½¿ç”¨çš„ Node.js æ¡†æ¶</a></p><p>ğŸ“’ è§£å†³ Vite æ— æ³•å…¨å±€å¯ç”¨ css module çš„é—®é¢˜</p><p>åœ¨è¿™é‡Œæ‰“ä¸ªæ–­ç‚¹çœ‹çœ‹ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_YYkX">packages/vite/src/node/plugins/css.ts:688</div><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  modules</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> modulesOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  preprocessorOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  devSourcemap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">css</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isModule </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> modulesOptions </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> cssModuleRE</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <code>useRef</code> åœ¨åˆ—è¡¨æ¸²æŸ“åœºæ™¯éœ€è¦ç‰¹åˆ«æ³¨æ„</p><p>åœ¨åˆ—è¡¨æ¸²æŸ“çš„æ—¶å€™ï¼Œä¸èƒ½å¯¹åˆ—è¡¨çš„æ¯ä¸€é¡¹ä½¿ç”¨ <code>ref</code>ï¼Œå¦åˆ™ä¼šå‡ºç° bugã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåº”è¯¥å°†åˆ—è¡¨çš„æ¯ä¸€é¡¹å°è£…ä¸ºç»„ä»¶ï¼Œåœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ <code>ref</code>ï¼š</p><div class="language-tsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-tsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IProps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  questionList</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FC</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">IProps</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> questionList </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ref </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">questionList</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">classNames</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">list-item</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">index</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">ref</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ 100 è¡Œä»£ç å®ç° React è·¯ç”±</p><blockquote><p><a href="https://github.com/ashok-khanna/react-snippets/blob/main/Router.js" target="_blank" rel="noopener noreferrer">https://github.com/ashok-khanna/react-snippets/blob/main/Router.js</a></p></blockquote><blockquote><p><a href="https://juejin.cn/post/7100736564979826695" target="_blank" rel="noopener noreferrer">ç²¾è¯»ã€Šreact-snippets - Router æºç ã€‹</a></p></blockquote><p>ğŸ“’ å¦‚ä½•å®ç°å¤šè¡Œæ–‡æœ¬çœç•¥</p><p>è¿™ä¸ªåŠŸèƒ½ä¸éœ€è¦è‡ªå·±å®ç°ï¼Œè‡ªå·±å®ç°è¿˜å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚åªéœ€è¦ä½¿ç”¨ antd çš„ <code>Typography</code> ç»„ä»¶å°±å¯ä»¥äº†ï¼š</p><div class="language-tsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-tsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Typography</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;antd&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Paragraph</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Typography</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FC</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Paragraph</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">ellipsis</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"> rows</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript number" style="color:#36acaa">2</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"> expandable</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript boolean" style="color:#36acaa">true</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript builtin" style="color:#00009f">symbol</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;more&#x27;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Paragraph</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <a href="https://juejin.cn/post/7100747501338099749" target="_blank" rel="noopener noreferrer">HTTP çš„ç¼“å­˜ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/4MmBSD-d-9T5-kFhcWNlTA" target="_blank" rel="noopener noreferrer">vscodeæ’ä»¶åŸç†æµ…æä¸å®æˆ˜</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/5æœˆ22æ—¥å†…å®¹æ±‡æ€»">5æœˆ22æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-22T00:00:00.000Z" itemprop="datePublished">May 22, 2022</time> Â· <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ PNPM æºç ç»“æ„ - å‰ç«¯åŒ…ç®¡ç†å·¥å…·å…·æœ‰å“ªäº›åŠŸèƒ½</p><p>é¦–å…ˆ pnpm æ•´ä¸ªé¡¹ç›®çš„ä¸»å…¥å£åŒ…æ–‡ä»¶ä¸º <code>packages/pnpm</code> è¿™ä¸ªåŒ…é‡Œé¢ï¼Œè¿™ä¸ªåŒ…åç§°ä¹Ÿç›´æ¥å«åš <code>pnpm </code>ï¼Œå…¶ä¸­ <code>main.ts</code> æ–‡ä»¶æ˜¯å…¶å…¥å£æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šå¤„ç†æ‰ç”¨æˆ·ä¼ è¿›æ¥çš„ä¸€äº›å‚æ•°ï¼Œç„¶åæ ¹æ®å¤„ç†åçš„ä¸åŒçš„å‚æ•°å¯¹å„å‘½ä»¤åšä¸€ä¸ªä¸‹å‘æ‰§è¡Œå·¥ä½œï¼Œä¸‹å‘åçš„å‘½ä»¤å‚æ•°å†åˆ°å„ä¸ªåŒ…é‡Œé¢å»ï¼Œä»è€Œæ‰§è¡Œé‡Œé¢å¯¹åº”çš„é€»è¾‘ã€‚</p><p>å¤„ç†å‚æ•°ç”¨åˆ°çš„åŒ…ä¸º <code>@pnpm/parse-cli-args</code> ï¼Œå®ƒä¼šæ¥æ”¶åˆ°ç”¨æˆ·ä¼ é€’è¿›æ¥çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œç„¶åå°†å…¶å¤„ç†æˆä¸€ä¸ª pnpm å†…éƒ¨çš„ç»Ÿä¸€æ ¼å¼ï¼Œä¾‹å¦‚ç”¨æˆ·è¾“å…¥å¦‚ä¸‹å‘½ä»¤:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">pnpm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -D axios</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™é‡Œä¼ è¿›æ¥çš„ä¸€äº›å‚æ•°éƒ½ä¼šè¢« <code>parseCliArgs</code> è¿™ä¸ªæ–¹æ³•å¤„ç†:</p><p>ä¾‹å¦‚ <code>add</code> ä¼šè¢«å¤„ç†ç»™ <code>cmd</code> å­—æ®µï¼Œä¸€äº›è£¸çš„å‚æ•°ä¾‹å¦‚ <code>axios</code> ä¼šè¢«æ”¾è¿› <code>cliParams</code> è¿™ä¸ªæ•°ç»„ä¸­ï¼Œ<code>-D</code> è¿™ä¸ªå‚æ•°åœ¨ <code>cliOptions</code> é‡Œé¢å»ã€‚å¤„ç†åçš„è¿™äº›å˜é‡ä»¥åŠå‚æ•°ç”¨äºä¸»å…¥å£æ–‡ä»¶åç»­ä»£ç æ‰§è¡Œé€»è¾‘çš„åˆ¤æ–­ã€‚å…·ä½“çš„åˆ¤æ–­é€»è¾‘å¯ä»¥åœ¨è°ƒè¯•çš„æ—¶å€™é‡åˆ°äº†ï¼Œå†å»çœ‹å¯¹åº”çš„å…¥å£é€»è¾‘åˆ¤æ–­è°ƒè¯•å³å¯ï¼Œè¿™é‡Œä¸åšå…·ä½“çš„ä»‹ç»ã€‚</p><p>åœ¨ <code>main.ts</code> ä¸­ä¼šé€šè¿‡è°ƒç”¨å½“å‰åŒ…ä¸‹é¢çš„ <code>cmd</code> ç›®å½•ä¸‹é¢çš„æ–¹æ³•(<code>pnpmCmds</code>)ï¼Œæ¥å®Œæˆå„å‘½ä»¤çš„åˆ†å‘ã€‚</p><ul><li>ä¾èµ–ç®¡ç†ï¼šå¦‚æœ cmd å€¼ä¸º <code>add</code> ã€<code>install</code> ã€<code>update</code> ç­‰è¿™äº›æ¶‰åŠå’Œä¾èµ–å®‰è£…ç›¸å…³çš„åŒ…ï¼Œåˆ™ä¼šèµ° <code>@pnpm/plugin-commands-installation</code> è¿™ä¸ªåŒ…é‡Œé¢å¯¹åº”çš„å­å‘½ä»¤é€»è¾‘(åŸºæœ¬ä¸Š pnpm æ‰€æœ‰çš„æ ¸å¿ƒæ¨¡å—éƒ½å›´ç»•ä¾èµ–å®‰è£…è¿™ä¸€å—å±•å¼€)</li><li>æ‰“åŒ…å‘å¸ƒï¼šå¦‚æœ cmd å€¼ä¸º <code>pack</code> ã€<code>publish</code> è¿™ä¸€ç±»æ¶‰åŠåˆ°æ‰“åŒ…å‘å¸ƒçš„åŒ…ï¼Œåˆ™ä¼šèµ° <code>@pnpm/plugin-commands-publishing</code> è¿™ä¸ªåŒ…çš„é€»è¾‘</li><li>å‘½ä»¤æ‰§è¡Œï¼šå¦‚æœ cmd å€¼ä¸º <code>run</code> ã€<code>exec</code> ã€ <code>dlx</code> ç­‰è¿™äº›å’Œå‘½ä»¤æ‰§è¡Œç›¸å…³çš„æ–¹æ³•ï¼Œåˆ™ä¼šèµ° <code>@pnpm/plugin-commands-script-runners</code> è¿™ä¸ªåŒ…çš„é€»è¾‘</li></ul><p>ğŸ“’ å­¦ä¹  swr è·å–æ•°æ®çš„æ€è·¯</p><p>æœ€è¿‘é‡åˆ°å¾ˆå¤šåˆ—è¡¨æ¸²æŸ“çš„åœºæ™¯ï¼Œä¾‹å¦‚æ ¹æ®ç­›é€‰é¡¹å’Œåˆ†é¡µå‚æ•°è·å–åˆ—è¡¨æ•°æ®ã€‚åœ¨ä»£ç ä¸­çœ‹åˆ°è™½ç„¶ç”¨äº† React Hooksï¼Œä½†æ˜¯è·å–æ•°æ®ä¾æ—§æ˜¯ jQuery æ—¶ä»£çš„ <strong>å‘½ä»¤å¼</strong> å†™æ³•ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå‰ç«¯æ¡†æ¶éƒ½æ˜¯æ•°æ®é©±åŠ¨ã€å£°æ˜å¼æ¸²æŸ“çš„ï¼Œå³æ¸²æŸ“è§†å›¾ä¸éœ€è¦å‘½ä»¤å¼åœ°æ“ä½œ DOMï¼Œè€Œæ˜¯å£°æ˜å¼åœ°ä¿®æ”¹æ•°æ®å°±è¡Œã€‚å› æ­¤ï¼Œè·å–æ•°æ®ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>å£°æ˜å¼</strong> å†™æ³•ï¼Œè¿™æ ·ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚</p><div class="language-jsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-jsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> useSWR </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;swr&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Profile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useSWR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/api/user&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fetcher</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">failed to load</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">loading...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">hello </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><a href="https://swr.vercel.app/docs/getting-started" target="_blank" rel="noopener noreferrer">https://swr.vercel.app/docs/getting-started</a></p></blockquote><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/ovwjufnPmCoYNLMkv5xv2g" target="_blank" rel="noopener noreferrer">ã€ç¬¬2618æœŸã€‘æ‰‹æŠŠæ‰‹æ•™ä½ å®šåˆ¶ä¸€å¥—é€‚åˆå›¢é˜Ÿçš„å¾®å‰ç«¯ä½“ç³»</a></p><p>ğŸ“’ Vite ç›¸å…³ issue æ¢³ç†</p><p><a href="https://github.com/vitejs/vite/discussions/8232" target="_blank" rel="noopener noreferrer">https://github.com/vitejs/vite/discussions/8232</a></p><p>ğŸ“’ Chrome debugger å°æŠ€å·§</p><p>åœ¨ Chrome æµè§ˆå™¨ä¸­æ‰“æ–­ç‚¹è°ƒè¯•ï¼Œæ­¤æ—¶åˆ‡åˆ°æ§åˆ¶å°ï¼Œå¯ä»¥è®¿é—®æ–­ç‚¹ä½ç½®ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è®¿é—®ã€ç”šè‡³ä¿®æ”¹å˜é‡ã€‚</p><p>â­ï¸ <a href="https://juejin.cn/post/7099402445989609479" target="_blank" rel="noopener noreferrer">å‰ç«¯å¿…å­¦çš„åŠ¨ç”»å®ç°æ€è·¯ï¼Œé«˜é€¼æ ¼çš„æ•ˆæœè€æ¿çœ‹äº†éƒ½ä¼šå¤§å£°ç§°èµ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/LSlgpazCwtceQWjHsMPCAg" target="_blank" rel="noopener noreferrer">ã€ç¬¬2617æœŸã€‘React ç»„ä»¶åº“ CSS æ ·å¼æ–¹æ¡ˆåˆ†æ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/X4ni2i9bvolHGfCdf3SzIA" target="_blank" rel="noopener noreferrer">ã€ç¬¬2616æœŸã€‘è§£é‡ŠJavaScriptçš„å†…å­˜ç®¡ç†</a></p><p>ğŸ“’ UMI3æºç è§£æç³»åˆ—ä¹‹æ’ä»¶åŒ–æ¶æ„æ ¸å¿ƒ</p><p>æ’ä»¶æœºåˆ¶å®ç°çš„æ–¹å¼ï¼š</p><ul><li>umiï¼šåŸºäº tapable çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œåœ¨è·¯ç”±ã€ç”Ÿæˆæ–‡ä»¶ã€æ„å»ºæ‰“åŒ…ã€HTML æ“ä½œã€å‘½ä»¤ç­‰æ–¹é¢æä¾›èƒ½åŠ›</li><li>babelï¼šåŸºäº visitor çš„è®¿é—®è€…æ¨¡å¼ï¼Œå¯¹äº AST çš„æ“ä½œç­‰</li><li>rollupï¼šåŸºäº hook çš„å›è°ƒæ¨¡å¼ï¼Œå®šåˆ¶æ„å»ºå’Œæ‰“åŒ…é˜¶æ®µçš„èƒ½åŠ›</li><li>webpackï¼šåŸºäº tapable çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œloader ä¸èƒ½å®ç°çš„éƒ½é å®ƒ</li><li>vue-cliï¼šåŸºäº hook çš„å›è°ƒæ¨¡å¼ï¼Œåœ¨ç”Ÿæˆé¡¹ç›®ã€é¡¹ç›®è¿è¡Œå’Œ vue ui é˜¶æ®µæä¾›èƒ½åŠ›</li></ul><p><a href="https://mp.weixin.qq.com/s/y-6Uf1hNBF19MabHEtqnJA" target="_blank" rel="noopener noreferrer">UMI3æºç è§£æç³»åˆ—ä¹‹æ’ä»¶åŒ–æ¶æ„æ ¸å¿ƒ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/OVCWcqpMw09T7ml-mn-OcA" target="_blank" rel="noopener noreferrer">å†™äº†ä¸€ä¸ªåŸºäº MacOS + iTerm2 è‡ªåŠ¨æ‰§è¡ŒåŒ–æ‰§è¡Œå·¥å…·</a></p><p>ğŸ“’ ä»‹ç»å…¨æ–°çš„ JSX è½¬æ¢</p><p>ç”±äºæµè§ˆå™¨æ— æ³•è¯†åˆ« JSX è¯­æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ Babelã€TypeScript ç­‰å·¥å…·å°† JSX ç¼–è¯‘ä¸ºæµè§ˆå™¨èƒ½è¯†åˆ«çš„ render å‡½æ•°ã€‚åœ¨ React 17 ä¹‹å‰ï¼ŒJSX ä¼šè½¬æ¢ä¸º <code>React.createElement(...)</code> è°ƒç”¨ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;h1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Hello world&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ­£æ˜¯å› ä¸º JSX ä¼šè½¬æ¢ä¸º <code>React.createElement(...)</code>ï¼Œæ‰€ä»¥æ¯ä¸ªç»„ä»¶é¡¶éƒ¨å¿…é¡»å¯¼å…¥ <code>React</code></p></blockquote><p>åœ¨ React 17 ç‰ˆæœ¬ï¼ŒReact çš„ package ä¸­å¼•å…¥äº†ä¸¤ä¸ªæ–°å…¥å£ï¼Œè¿™äº›å…¥å£åªä¼šè¢« Babel å’Œ TypeScript ç­‰ç¼–è¯‘å™¨ä½¿ç”¨ã€‚æ–°çš„ JSX è½¬æ¢ä¸ä¼šå°† JSX è½¬æ¢ä¸º React.createElementï¼Œè€Œæ˜¯è‡ªåŠ¨ä» React çš„ package ä¸­å¼•å…¥æ–°çš„å…¥å£å‡½æ•°å¹¶è°ƒç”¨ã€‚ä¸‹æ–¹æ˜¯æ–° JSX è¢«è½¬æ¢ç¼–è¯‘åçš„ç»“æœï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ç”±ç¼–è¯‘å™¨å¼•å…¥ï¼ˆç¦æ­¢è‡ªå·±å¼•å…¥ï¼ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> jsx </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> _jsx </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react/jsx-runtime&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_jsx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;h1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Hello world&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ³¨æ„ï¼Œæ­¤æ—¶æºä»£ç æ— éœ€å¼•å…¥ React å³å¯ä½¿ç”¨ JSX äº†ï¼ï¼ˆä½†æ˜¯å¦‚æœä½¿ç”¨ React æä¾›çš„ Hook æˆ–å…¶ä»–å¯¼å‡ºï¼Œè¿™ç§æƒ…å†µä¸‹ä»éœ€å¼•å…¥ Reactï¼‰</p></blockquote><p>æ–°çš„ JSX è½¬æ¢å¯¹åº”çš„é…ç½®æ˜¯ <code>runtime: &quot;automatic&quot;</code>ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// babel.config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">presets</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;@babel/preset-react&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æ–°çš„ JSX è½¬æ¢ -&gt; automatic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æ—§çš„ JSX è½¬æ¢ -&gt; classic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">runtime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;automatic&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>å¯ä»¥ç›´æ¥åœ¨ Babel Playground çœ‹ç¼–è¯‘ç»“æœï¼š</p><p><a href="https://babeljs.io/repl" target="_blank" rel="noopener noreferrer">https://babeljs.io/repl</a></p><p>å®˜æ–¹æ–‡æ¡£è¡¨ç¤ºï¼Œæ–°çš„ JSX è½¬æ¢ä¼šç•¥å¾®ä¼˜åŒ–åŒ…ä½“ç§¯ï¼Œä¸ªäººè®¤ä¸ºä¼˜åŒ–è¿˜æ˜¯æ¯”è¾ƒæœ‰é™ã€‚è™½è¯´ <code>React.createElement()</code> å˜æˆäº†æ›´çŸ­çš„è°ƒç”¨ï¼Œä½†æ˜¯åˆå¤šå‡ºæ¥ä¸€æ®µè¿è¡Œæ—¶ä»£ç ã€‚</p><p><a href="https://react.docschina.org/blog/2020/09/22/introducing-the-new-jsx-transform.html" target="_blank" rel="noopener noreferrer">https://react.docschina.org/blog/2020/09/22/introducing-the-new-jsx-transform.html</a></p></div></div><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/OrekHmMrn8UlisTrvt3MNA" target="_blank" rel="noopener noreferrer">ä» Turborepo çœ‹ Monorepo å·¥å…·çš„ä»»åŠ¡ç¼–æ’èƒ½åŠ›</a></p><p>ğŸ“’ å¤§ç‰›ä¹¦å• | å­¦ä¹  Golang èµ„æ–™</p><ul><li>Golang å…¥é—¨ï¼š<a href="https://go.dev/learn/" target="_blank" rel="noopener noreferrer">https://go.dev/learn/</a></li><li>Golang è¿›é˜¶ï¼š<a href="https://github.com/golang/go/wiki#learning-more-about-go" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/wiki#learning-more-about-go</a></li></ul><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/GryL1QVARtMB8-WIzd7xQQ" target="_blank" rel="noopener noreferrer">è§£å†³å‰ç«¯å¸¸è§é—®é¢˜ï¼šç«æ€æ¡ä»¶</a></p><p>ğŸ“’ React Router v6 æ–°æ‰‹æŒ‡å—</p><blockquote><p><a href="https://www.youtube.com/watch?v=59IXY5IDrBA" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=59IXY5IDrBA</a></p></blockquote><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/jCNcAD8y3IElZN6OPv1Qfw" target="_blank" rel="noopener noreferrer">[<!-- -->è°ƒç ”æŠ¥å‘Š<!-- -->]<!-- --> æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·æ±‡æ€»</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/3v54arsDRRw6agyr3MtPRg" target="_blank" rel="noopener noreferrer">Google æœ€æ–°çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼ŒLCP æå‡30%ï¼</a></p><p>ğŸ“’ React useEventï¼šç –å®¶è¯´çš„æ²¡é—®é¢˜</p><p>useEvent ä¼šå°†ä¸€ä¸ªå‡½æ•°ã€ŒæŒä¹…åŒ–ã€ï¼ŒåŒæ—¶å¯ä»¥ä¿è¯å‡½æ•°å†…éƒ¨çš„å˜é‡å¼•ç”¨æ°¸è¿œæ˜¯æœ€æ–°çš„ã€‚å¦‚æœä½ ç”¨è¿‡ ahooks çš„ <code>useMemoizedFn</code>ï¼Œå®ç°çš„æ•ˆæœæ˜¯å‡ ä¹ä¸€è‡´çš„ã€‚å†å¼ºè°ƒä¸‹ <code>useEvent</code> çš„ä¸¤ä¸ªç‰¹æ€§ï¼š</p><ul><li>å‡½æ•°åœ°å€æ°¸è¿œæ˜¯ä¸å˜çš„</li><li>å‡½æ•°å†…å¼•ç”¨çš„å˜é‡æ°¸è¿œæ˜¯æœ€æ–°çš„</li></ul><p>é€šè¿‡ <code>useEvent</code> ä»£æ›¿ <code>useCallback</code> åï¼Œä¸ç”¨å†™ <code>deps</code> å‡½æ•°äº†ï¼Œå¹¶ä¸”å‡½æ•°åœ°å€æ°¸è¿œæ˜¯å›ºå®šçš„ï¼Œå†…éƒ¨çš„ state å˜é‡ä¹Ÿæ°¸è¿œæ˜¯æœ€æ–°çš„ã€‚</p><p>useEvent çš„å®ç°åŸç†æ¯”è¾ƒç®€å•ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">handler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handlerRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨äºç¡®ä¿å‡½æ•°å†…å¼•ç”¨çš„å˜é‡æ°¸è¿œæ˜¯æœ€æ–°çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useLayoutEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    handlerRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨äºç¡®ä¿è¿”å›çš„å‡½æ•°åœ°å€æ°¸è¿œä¸å˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter spread operator" style="color:#393A34">...</span><span class="token parameter">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> handlerRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://mp.weixin.qq.com/s/-6bQKIjH6WPcfuiCFtsjng" target="_blank" rel="noopener noreferrer">React useEventï¼šç –å®¶è¯´çš„æ²¡é—®é¢˜</a></p><p>ğŸ“’ ä¸ºä»€ä¹ˆç”¨ Vite æ‰“åŒ… React ç»„ä»¶åº“</p><ul><li>ç”Ÿäº§ç¯å¢ƒ rollup æ‰“åŒ… + å¼€å‘ç¯å¢ƒ devServer</li><li>å¼€å‘ç¯å¢ƒå¯ä»¥é€šè¿‡ <code>@vitejs/plugin-react</code> æ’ä»¶æ”¯æŒ fast-refresh</li><li>ç”Ÿäº§ç¯å¢ƒé»˜è®¤ä½¿ç”¨ esbuild ä»£ç å‹ç¼©ï¼Œæ•ˆç‡æ˜¯ terser çš„ 20-40 å€</li><li>esbuild åœ¨è¯­æ³•è½¬æ¢è¿™å—å°šä¸å®Œå–„ï¼Œä½†æ˜¯ç»„ä»¶åº“æ‰“åŒ…ä¸ç”¨è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ï¼Œå…¼å®¹æ€§é—®é¢˜äº¤ç»™ä¸šåŠ¡é¡¹ç›®è§£å†³</li><li>Vite æä¾›äº†å¾ˆå¤š esbuild å°šä¸æ”¯æŒçš„ç‰¹æ€§ï¼ˆä¾‹å¦‚ CSS æ¨¡å—åŒ–ç­‰ï¼‰</li><li>å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒå‡ ä¹å¯ä»¥å¤ç”¨ä¸€å¥—é…ç½®ï¼ˆVite æŠ¹å¹³äº† esbulid å’Œ rollup é…ç½®å·®å¼‚ï¼‰</li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/5æœˆ15æ—¥å†…å®¹æ±‡æ€»">5æœˆ15æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-15T00:00:00.000Z" itemprop="datePublished">May 15, 2022</time> Â· <!-- -->18 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ è§£å†³ Vite æ‰“åŒ… React ç»„ä»¶åº“æ— æ³•æ’é™¤ peerDependencies çš„é—®é¢˜</p><p><a href="https://zhuanlan.zhihu.com/p/354572830" target="_blank" rel="noopener noreferrer">è½®å­ç³»åˆ—ï¼šä½¿ç”¨viteä»é›¶å¼€å‘Reactç»„ä»¶åº“</a></p><p><a href="https://zhuanlan.zhihu.com/p/500883016" target="_blank" rel="noopener noreferrer">å¦‚ä½•ä½¿ç”¨Rollupæ‰“åŒ…Reactç»„ä»¶åº“</a></p><p>ä½¿ç”¨ dumi å®ç°ç»„ä»¶åº“æ–‡æ¡£è‡ªåŠ¨åŒ–</p><p><a href="https://d.umijs.org/zh-CN/guide/advanced#%E7%BB%84%E4%BB%B6-api-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90" target="_blank" rel="noopener noreferrer">https://d.umijs.org/zh-CN/guide/advanced#%E7%BB%84%E4%BB%B6-api-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7095354780079357966" target="_blank" rel="noopener noreferrer">NodeJsè¿›é˜¶å¼€å‘ã€æ€§èƒ½ä¼˜åŒ–æŒ‡å—</a></p><p>ğŸ“’ ä½¿ç”¨ <code>URLSearchParams</code> æ³¨æ„äº‹é¡¹</p><p>å¾ˆå¤šåŒå­¦éƒ½ä¼šç”¨ <code>URLSearchParams</code> è§£æã€æ‹¼æ¥ query å‚æ•°ï¼Œéå¸¸æ–¹ä¾¿ï¼Œè€Œä¸”è¿˜èƒ½è‡ªåŠ¨è¿›è¡Œå‚æ•°ç¼–ç ã€è§£ç ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ‰å‡ ä¸ªæ³¨æ„äº‹é¡¹ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 1. å½“æŸä¸ª value ä¸º undefined æ—¶ï¼Œä¼šç›´æ¥è½¬ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥åˆ° URL ä¸Š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;dby&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;dm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2333</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;dby=undefined&amp;dm=2333&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨é€»è¾‘æˆ–æ“ä½œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;dby&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;dby=&amp;dm=2333&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2. get ä¸€ä¸ªä¸å­˜åœ¨çš„å€¼ï¼Œè¿”å›çš„æ˜¯ nullï¼Œå› æ­¤ TS ä¼šæ¨å¯¼ä¸ºè”åˆç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string | null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨é€»è¾‘æˆ–æ“ä½œï¼Œå®ç°ç±»å‹å®ˆå«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <a href="https://juejin.cn/post/6938201650012094495" target="_blank" rel="noopener noreferrer">å†™ç»™å‰ç«¯çš„æ‰‹åŠ¨å†…å­˜ç®¡ç†åŸºç¡€å…¥é—¨ï¼ˆä¸€ï¼‰è¿”ç’å½’çœŸï¼šä»å¼•ç”¨ç±»å‹åˆ°è£¸æŒ‡é’ˆ</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7097406514360483877" target="_blank" rel="noopener noreferrer">Reactå¦‚ä½•åŸç”Ÿå®ç°é˜²æŠ–</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7096070620105932813" target="_blank" rel="noopener noreferrer">ä½ æƒ³çŸ¥é“viteæ ¸å¿ƒåŸç†å—ï¼Œæˆ‘æ¥æ‰‹å†™å‘Šè¯‰ä½ ï¼ˆ80è¡Œæºä»£ç ï¼‰</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7094909263847358472" target="_blank" rel="noopener noreferrer">Rust å…¥é—¨ - èµ„æºä¸ç”Ÿå‘½å‘¨æœŸ</a></p><p>ğŸ“’ <a href="https://dev.to/wiseai/the-ultimate-guide-to-software-engineering-545e" target="_blank" rel="noopener noreferrer">The Ultimate Guide To Software Engineering</a></p><p>ğŸ“’ Tree shakingé—®é¢˜æ’æŸ¥æŒ‡å—æ¥å•¦</p><p>Tree shakingåœ¨ä¸åŒå·¥å…·é‡Œçš„æ„ä¹‰ä¸å¤ªç»Ÿä¸€ï¼Œä¸ºäº†ç»Ÿä¸€åç»­è®¨è®ºï¼Œæˆ‘ä»¬è§„èŒƒå„ä¸ªæœ¯è¯­ï¼š</p><ul><li>minifyï¼šç¼–è¯‘ä¼˜åŒ–æ‰‹æ®µï¼ŒæŒ‡åœ¨ä¸å½±å“ä»£ç è¯­ä¹‰çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½çš„å‡å°ç¨‹åºçš„ä½“ç§¯ï¼Œå¸¸è§çš„ minify å·¥å…·å¦‚ terserã€uglifyï¼Œswc å’Œ esbuid ä¹Ÿè‡ªå¸¦ minify åŠŸèƒ½</li><li>Dead code elimination(DCE)ï¼šå³æ­»ä»£ç ä¼˜åŒ–ï¼Œä¸€ç§ç¼–è¯‘å™¨ä¼˜åŒ–æ‰‹æ®µï¼Œç”¨äºç§»é™¤ä¸å½±å“ç¨‹åºç»“æœçš„ä»£ç ï¼Œå®ç°DCEçš„æ‰‹æ®µæœ‰å¾ˆå¤šç§ï¼Œå¦‚ const folding (å¸¸é‡æŠ˜å )ã€Control flow analysisã€ä¹ŸåŒ…æ‹¬ä¸‹é¢çš„ LTO</li><li>Link Time Optimizationï¼šæŒ‡ link æœŸä¼˜åŒ–çš„æ‰‹æ®µï¼Œå¯ä»¥è¿›è¡Œè·¨æ¨¡å—çš„åˆ†æä¼˜åŒ–ï¼Œå¦‚å¯ä»¥åˆ†ææ¨¡å—ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œåˆ æ‰å…¶ä»–æ¨¡å—æœªä½¿ç”¨çš„å¯¼å‡ºå˜é‡ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œè·¨æ¨¡å—å¯¹ç¬¦å·è¿›è¡Œ mangle <a href="http://johanengelen.github.io/ldc/2016/11/10/Link-Time-Optimization-LDC.html" target="_blank" rel="noopener noreferrer">http://johanengelen.github.io/ldc/2016/11/10/Link-Time-Optimization-LDC.html</a></li><li>Tree shakingï¼šä¸€ç§åœ¨ Javascript ç¤¾åŒºæµè¡Œçš„ä¸€ä¸ªæœ¯è¯­ï¼Œæ˜¯ä¸€ç§æ­»ä»£ç ä¼˜åŒ–æ‰‹æ®µï¼Œå…¶ä¾èµ–äº ES2015 çš„æ¨¡å—è¯­æ³•ï¼Œç”± rollup å¼•å…¥ã€‚è¿™é‡Œçš„ tree shaking é€šå¸¸æŒ‡çš„æ˜¯åŸºäº module çš„è·¨æ¨¡å—æ­»ä»£ç åˆ é™¤æŠ€æœ¯ï¼Œå³åŸºäº LTO çš„ DCEï¼Œå…¶åŒºåˆ«äºä¸€èˆ¬çš„ DCE åœ¨äºï¼Œå…¶åªè¿›è¡Œ top-level å’Œè·¨æ¨¡å—å¼•ç”¨åˆ†æï¼Œå¹¶ä¸ä¼šå»å°è¯•ä¼˜åŒ–å¦‚å‡½æ•°é‡Œçš„å®ç°çš„ DCE</li></ul><blockquote><p>Tree shaking is a term commonly used in the JavaScript context for dead-code elimination. It relies on the static structure of ES2015 module syntax, i.e. import and export. The name and concept have been popularized by the ES2015 module bundler rollup.   </p><p><a href="https://webpack.js.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">https://webpack.js.org/guides/tree-shaking/</a></p></blockquote><ul><li>mangleï¼šå³ç¬¦å·å‹ç¼©ï¼Œå°†å˜é‡åä»¥æ›´çŸ­çš„å˜é‡åè¿›è¡Œæ›¿æ¢</li><li>å‰¯ä½œç”¨ï¼šå¯¹ç¨‹åºçŠ¶æ€é€ æˆå½±å“ï¼Œæ­»ä»£ç ä¼˜åŒ–ä¸€èˆ¬ä¸èƒ½åˆ é™¤å‰¯ä½œç”¨ä»£ç ï¼Œå³ä½¿å‰¯ä½œç”¨ä»£ç çš„ç»“æœåœ¨å…¶ä»–åœ°æ–¹æ²¡ç”¨åˆ°</li><li>æ¨¡å—å†…éƒ¨å‰¯ä½œç”¨ï¼šå‰¯ä½œç”¨å½±å“èŒƒå›´ä»…é™äºå½“å‰æ¨¡å—ï¼Œå¦‚æœå¤–éƒ¨æ¨¡å—ä¸ä¾èµ–å½“å‰æ¨¡å—ï¼Œé‚£ä¹ˆè¯¥å‰¯ä½œç”¨ä»£ç å¯ä»¥è·Ÿéšå½“å‰æ¨¡å—ä¸€èµ·è¢«åˆ é™¤ï¼Œå¦‚æœå¤–éƒ¨æ¨¡å—ä¾èµ–äº†å½“å‰æ¨¡å—ï¼Œåˆ™è¯¥å‰¯ä½œç”¨ä»£ç ä¸èƒ½è¢«åˆ é™¤</li></ul><p><img loading="lazy" alt="image" src="/frontend-weekly/assets/images/tree_shaking-19829ee33097b669151380439207d188.png" width="654" height="573" class="img_E7b_"></p><p>å› æ­¤æˆ‘ä»¬çš„åç»­è®¨è®ºï¼Œæ‰€è¯´çš„ tree shaking å‡æ˜¯æŒ‡åŸºäº LTO çš„ DCEï¼Œè€Œ DCE æŒ‡çš„æ˜¯ä¸åŒ…å« tree shaking çš„å…¶ä»– DCE éƒ¨åˆ†ã€‚</p><blockquote><p>ç®€å•æ¥è¯´å³æ˜¯ï¼Œtree shaking è´Ÿè´£ç§»é™¤æœªå¼•ç”¨çš„ top-level è¯­å¥ï¼Œè€Œ DCE åˆ é™¤æ— ç”¨çš„è¯­å¥</p></blockquote><p><a href="https://mp.weixin.qq.com/s/P3mzw_vmOR6K_Mj-963o3g" target="_blank" rel="noopener noreferrer">Tree shakingé—®é¢˜æ’æŸ¥æŒ‡å—æ¥å•¦</a></p><p>ğŸ“’ <!-- -->[<!-- -->ç§‘æ™®<!-- -->]<!-- --> JSä¸­Objectçš„keysæ˜¯æ— åºçš„å—</p><p><strong>1. <code>Object.keys()</code> è¿”å›ç±»å‹å§‹ç»ˆä¸º <code>string[]</code></strong></p><p>å› ä¸º JS å¯¹è±¡ key çš„ç±»å‹åªæœ‰ä¸‰ç§ï¼š<code>number</code>ã€<code>string</code>ã€<code>Symbol</code>ï¼Œéœ€è¦æ³¨æ„ <code>number</code> ç±»å‹åº•å±‚ä¹Ÿæ˜¯æŒ‰ <code>string</code> è¿›è¡Œå­˜å‚¨ï¼Œè€Œ <code>Symbol</code> ç±»å‹ä¸å¯æšä¸¾ã€‚</p><p><strong>2. ES2015 ä¹‹å <code>Object.keys()</code> è¾“å‡ºé¡ºåºæ˜¯å¯ä»¥é¢„æµ‹çš„</strong></p><p>æˆ‘ä»¬è¯´æ™®é€šå¯¹è±¡çš„ Key æ˜¯æ— åºçš„ï¼Œä¸å¯é çš„ï¼ŒæŒ‡çš„æ˜¯ä¸èƒ½æ­£ç¡®ç»´æŠ¤æ’å…¥é¡ºåºï¼Œä¸ä¹‹ç›¸å¯¹çš„æ˜¯ Map å®ä¾‹ä¼šç»´æŠ¤é”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚</p><p>åœ¨ ES2015 ä¹‹åï¼Œæ™®é€šå¯¹è±¡ Key é¡ºåºæ˜¯å¯é¢„æµ‹çš„ã€‚å…ˆæŒ‰ç…§è‡ªç„¶æ•°å‡åºè¿›è¡Œæ’åºï¼Œç„¶åæŒ‰ç…§éæ•°å­—çš„ String çš„åŠ å…¥æ—¶é—´æ’åºï¼Œç„¶åæŒ‰ç…§ Symbol çš„æ—¶é—´é¡ºåºè¿›è¡Œæ’åºã€‚ä¹Ÿå°±æ˜¯è¯´ä»–ä»¬ä¼šå…ˆæŒ‰ç…§ä¸Šè¿°çš„åˆ†ç±»è¿›è¡Œæ‹†åˆ†ï¼Œå…ˆæŒ‰ç…§è‡ªç„¶æ•°ã€éè‡ªç„¶æ•°ã€Symbol çš„é¡ºåºè¿›è¡Œæ’åºï¼Œç„¶åæ ¹æ®ä¸Šè¿°ä¸‰ç§ç±»å‹ä¸‹å†…éƒ¨çš„é¡ºåºè¿›è¡Œæ’åºã€‚</p><blockquote><p>ä½¿ç”¨ <code>Object.keys()</code> åªä¼šè¾“å‡ºå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§çš„ keyï¼Œä¸å« <code>Symbol</code> ç±»å‹çš„ keyã€‚å¦‚æœè¦è¾“å‡º <code>Symbol</code> ç±»å‹ keyï¼Œå¯ä»¥ä½¿ç”¨ <code>Reflect.ownKeys()</code></p></blockquote><p><a href="https://mp.weixin.qq.com/s/qyyrQNC6q6p496OdZIQ6ew" target="_blank" rel="noopener noreferrer">[<!-- -->ç§‘æ™®<!-- -->]<!-- --> JSä¸­Objectçš„keysæ˜¯æ— åºçš„å—</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/FPupefVg4zphOfIERZOvHQ" target="_blank" rel="noopener noreferrer">å¦‚ä½•è®¾è®¡æ›´ä¼˜é›…çš„ React ç»„ä»¶</a></p><p>ğŸ“’ ä»£ç è¦†ç›–ç‡åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šçš„ä¸€ç§å¯è¡Œåº”ç”¨</p><p>ç”±äº JS èµ„æºéœ€è¦é€šè¿‡ç½‘ç»œåŠ è½½ï¼Œä»£ç çš„ä½“ç§¯ç›´æ¥å½±å“é¡µé¢åŠ è½½æ€§èƒ½ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬â€œå–‚â€ç»™æµè§ˆå™¨çš„ä»£ç ï¼Œå¹¶ä¸ä¼šå…¨éƒ¨æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åšåˆ†åŒ…ä¼˜åŒ–ï¼Œå³ code-splitingï¼Œåªâ€œå–‚â€ç»™æµè§ˆå™¨æ¸²æŸ“å½“å‰é¡µé¢æ‰€éœ€çš„èµ„æºã€‚</p><p>æ³¨æ„åŒºåˆ†ä»¥ä¸‹ä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li><p>Dead code</p><p>ä¹Ÿå«æ— ç”¨ä»£ç ï¼Œè¿™ä¸ªæ¦‚å¿µåº”æ˜¯åœ¨ç¼–è¯‘æ—¶é™æ€åˆ†æå‡ºçš„å¯¹æ‰§è¡Œæ— å½±å“çš„ä»£ç ã€‚é€šå¸¸æˆ‘ä»¬ç”¨ Tree Shaking åœ¨ç¼–è¯‘æ—¶ç§»é™¤è¿™äº› dead code ä»¥å‡å°ä»£ç ä½“ç§¯ã€‚</p></li><li><p>å†—ä½™ä»£ç </p><p>ä»£ç è¦†ç›–ç‡ä¸­çš„æ¦‚å¿µï¼Œé€‚ç”¨äºè¿è¡Œæ—¶ï¼Œè€Œ Dead code é€‚ç”¨äºç¼–è¯‘æ—¶ã€‚Dead code æ˜¯ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå°†å…¶å‰”é™¤ã€‚å†—ä½™ä»£ç æ˜¯æŸäº›ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘ä¹‹ä¸‹å¹¶ä¸ä¼šæ‰§è¡Œåˆ°è¿™äº›ä»£ç é€»è¾‘ï¼ˆæ¯”å¦‚ï¼šåœ¨é¦–å±åŠ è½½æ—¶ï¼ŒæŸä¸ªå‰ç«¯ç»„ä»¶å®Œå…¨ä¸ä¼šåŠ è½½ï¼Œé‚£ä¹ˆå¯¹äºâ€œé¦–å±â€è¿™ä¸ªä¸šåŠ¡é€»è¾‘ç”¨ä¾‹æ¥è®²ï¼Œè¯¥å‰ç«¯ä»£ç å°±æ˜¯å†—ä½™çš„ï¼‰ã€‚</p></li></ul><p>å¦‚ä½•è¿›è¡Œåˆç†åˆ†åŒ…å‘¢ï¼Ÿè¿™å°±éœ€è¦ç»Ÿè®¡ä»£ç è¦†ç›–ç‡ã€‚ä»£ç è¦†ç›–ç‡ï¼ˆCode coverageï¼‰æ˜¯è½¯ä»¶æµ‹è¯•ä¸­çš„ä¸€ç§åº¦é‡æŒ‡æ ‡ã€‚å³æè¿°æµ‹è¯•è¿‡ç¨‹ä¸­ï¼ˆè¿è¡Œæ—¶ï¼‰è¢«æ‰§è¡Œçš„æºä»£ç å å…¨éƒ¨æºä»£ç çš„æ¯”ä¾‹ã€‚</p><p>å¦‚ä½•ç»Ÿè®¡ä»£ç è¦†ç›–ç‡ï¼š</p><p><strong>1. Chrome æµè§ˆå™¨ Dev Tools</strong></p><p>chrome æµè§ˆå™¨çš„ DevTools ç»™æˆ‘ä»¬æä¾›äº†åº¦é‡é¡µé¢ä»£ç ï¼ˆJSã€CSSï¼‰è¦†ç›–ç‡çš„å·¥å…· Coverageã€‚ä½¿ç”¨æ–¹å¼ï¼šDev tools â€”â€” More tools â€”â€” Coverage</p><p>ç”±äºä¸€èˆ¬éƒ½ä¼šå¯¹ JSã€CSS èµ„æºè¿›è¡Œæ··æ·†å‹ç¼©ï¼Œå› æ­¤å»ºè®®å¯¼å…¥ Source Map ä»¥ä¾¿æŸ¥çœ‹æºä»£ç çš„è¦†ç›–ç‡ã€‚</p><p><strong>2. Istanbulï¼ˆNYCï¼‰</strong></p><p>Istanbulæˆ–è€… NYC(New York Cityï¼ŒåŸºäº istanbul å®ç°) æ˜¯åº¦é‡ JavaScript ç¨‹åºçš„ä»£ç è¦†ç›–ç‡å·¥å…·ï¼Œç›®å‰ç»å¤§å¤šæ•°çš„nodeä»£ç æµ‹è¯•æ¡†æ¶ä½¿ç”¨è¯¥å·¥å…·æ¥è·å¾—æµ‹è¯•æŠ¥å‘Šï¼Œå…¶æœ‰å››ä¸ªæµ‹é‡ç»´åº¦ï¼š</p><ul><li>line coverageï¼ˆè¡Œè¦†ç›–ç‡ï¼‰ï¼šæ¯ä¸€è¡Œæ˜¯å¦éƒ½æ‰§è¡Œäº† ã€ä¸€èˆ¬æˆ‘ä»¬å…³æ³¨è¿™ä¸ªä¿¡æ¯ã€‘</li><li>function coverageï¼ˆå‡½æ•°è¦†ç›–ç‡ï¼‰ï¼šæ¯ä¸ªå‡½æ•°æ˜¯å¦éƒ½è°ƒç”¨äº†</li><li>branch coverageï¼ˆåˆ†æ”¯è¦†ç›–ç‡ï¼‰ï¼šæ˜¯å¦æ¯ä¸ª if ä»£ç å—éƒ½æ‰§è¡Œäº†</li><li>statement coverageï¼ˆè¯­å¥è¦†ç›–ç‡ï¼‰ï¼šæ˜¯å¦æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†</li></ul><p>ç¼ºç‚¹ï¼šç›®å‰ä½¿ç”¨ istanbul åº¦é‡ç½‘é¡µå‰ç«¯JSä»£ç è¦†ç›–ç‡æ²¡æœ‰éä¾µå…¥çš„æ–¹æ¡ˆï¼Œé‡‡ç”¨çš„æ˜¯åœ¨ç¼–è¯‘æ„å»ºæ—¶ä¿®æ”¹æ„å»ºç»“æœçš„æ–¹å¼åŸ‹å…¥ç»Ÿè®¡ä»£ç ï¼Œå†åœ¨è¿è¡Œæ—¶è¿›è¡Œç»Ÿè®¡å±•ç¤ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ babel-plugin-istanbul æ’ä»¶åœ¨å¯¹æºä»£ç åœ¨ AST çº§åˆ«è¿›è¡ŒåŒ…è£…é‡å†™ï¼Œè¿™ç§ç¼–è¯‘æ–¹å¼ä¹Ÿå« ä»£ç æ’æ¡© / æ’æ¡©æ„å»ºï¼ˆinstrumentï¼‰ã€‚</p><p><a href="https://mp.weixin.qq.com/s/VQq3Ly3ZEAFpYVIvV3Uhiw" target="_blank" rel="noopener noreferrer">ä»£ç è¦†ç›–ç‡åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šçš„ä¸€ç§å¯è¡Œåº”ç”¨</a></p><p>ğŸ“’ å…³äºâ€œç¯å¢ƒå˜é‡â€éœ€è¦æ³¨æ„çš„é—®é¢˜</p><p><strong>1. ä¸ºä»€ä¹ˆä½¿ç”¨ cross-env è®¾ç½®ç¯å¢ƒå˜é‡</strong></p><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨ npm scripts è®¾ç½® Node.js çš„ç¯å¢ƒå˜é‡ï¼Œé€šå¸¸éƒ½ä¼šä½¿ç”¨ cross-env è¿™ä¸ªåº“ã€‚å…¶å®è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨ MacOS å’Œ linux ç³»ç»Ÿç›´æ¥é€šè¿‡ shell å‘½ä»¤å°±å¯ä»¥äº†ï¼Œä¾‹å¦‚ <code>PORT=8066</code>ï¼Œä½†æ˜¯ Win è®¾ç½®çš„æ–¹å¼ä¸å¤ªä¸€æ ·ï¼Œæ‰€ä»¥ cross-env å®é™…ä¸Šæ˜¯å®ç°äº†è·¨å¹³å°è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p><p><strong>2. <code>.env</code> æ–‡ä»¶æ˜¯å¦‚ä½•ç”Ÿæ•ˆçš„</strong></p><p>å¯ä»¥ä½¿ç”¨ <code>dotenv</code> è¿™ä¸ªåº“ï¼Œå¯ä»¥å°† <code>.env</code> æ–‡ä»¶ä¸‹çš„å†…å®¹åŠ è½½åˆ° Node.js çš„ <code>process.env</code> å¯¹è±¡ä¸­ï¼Œæ³¨æ„ key å’Œ value éƒ½æ˜¯ string ç±»å‹ã€‚</p><p><strong>3. å‰ç«¯é¡¹ç›®çš„ç¯å¢ƒå˜é‡æ˜¯å¦‚ä½•ç”Ÿæ•ˆçš„</strong></p><p>å‰ç«¯é¡¹ç›®çš„ç¯å¢ƒå˜é‡ï¼Œå®é™…ä¸Šä¸æ˜¯çœŸæ­£çš„ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºæµè§ˆå™¨ç¯å¢ƒä¸‹æ˜¯è®¿é—®ä¸åˆ° <code>process</code> å¯¹è±¡çš„ï¼Œéœ€è¦é€šè¿‡ <code>DefinePlugin</code> åœ¨æ‰“åŒ…æ„å»ºçš„æ—¶å€™ï¼Œå°†å˜é‡æ›¿æ¢ä¸ºå¯¹åº”çš„å€¼ã€‚</p><p>æ³¨æ„è¿™é‡Œæœ‰ä¸ªå‘ï¼Œ<code>DefinePlugin</code> é»˜è®¤ç›´æ¥è¿›è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œå¦‚æœæƒ³è¦æ›¿æ¢ä¸ºå­—ç¬¦ä¸²å­—é¢é‡ï¼Œåˆ™éœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­å†åŠ ä¸€ä¸ªå¼•å·ï¼Œæˆ–è€…ç”¨ <code>JSON.scringify</code> åŒ…è£¹ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// webpack.config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">webpack</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">DefinePlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">__DEV__</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ›¿æ¢ä¸ºå¸ƒå°”å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;process.env.NODE_ENV&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;development&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ›¿æ¢ä¸ºå­—ç¬¦ä¸²å­—é¢é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æºç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__DEV__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NODE_ENV</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;development&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ›¿æ¢å¾—åˆ°çš„ç»“æœ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;development&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;development&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨ DefinePlugin é‡åˆ°çš„é—®é¢˜</p><p>åœ¨å¼€å‘ä¸€ä¸ªç»„ä»¶åº“ï¼Œéœ€è¦åŒºåˆ†è¿è¡Œç¯å¢ƒï¼Œæ ¹æ®ç¯å¢ƒæ‰“åŒ…ç›¸åº”çš„æ¨¡å—ä»£ç ã€‚æ ¹æ® Webpack ä»£ç ä¼˜åŒ–ï¼ˆç”Ÿäº§ç¯å¢ƒé»˜è®¤å¯ç”¨ï¼‰çš„æ—¶å€™ï¼Œterser ä¼šåš DCEï¼ˆæ— ç”¨ä»£ç ç§»é™¤ï¼‰å¤„ç†ï¼Œè¿›è€Œä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åœ¨ Webpack ä»£ç ä¼˜åŒ–çš„æ—¶å€™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// terser ä¼šè¯†åˆ«å‡ºâ€œä¸šåŠ¡2â€çš„ä»£ç ä¸ºæ— ç”¨ä»£ç ï¼Œè¿›è€Œç§»é™¤æ‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// åªä¿ç•™â€œä¸šåŠ¡1â€çš„ä»£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸šåŠ¡ 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸šåŠ¡ 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åŸå…ˆçš„æ–¹å¼åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å®šä¹‰å¸¸é‡ï¼Œç„¶åå…¶ä»–æ¨¡å—å¼•å…¥å¸¸é‡è¿›è¡Œåˆ¤æ–­ã€‚è¿™é‡Œè¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ Webpack ä»£ç ä¼˜åŒ–çš„æ—¶å€™ï¼Œterser å¹¶ä¸ä¼šåšç¨‹åºæµåˆ†æï¼Œä¹Ÿå°±æ˜¯è¯´è®¿é—®ä¸åˆ°æ¨¡å—çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œterser å¯èƒ½è¿˜æ˜¯ä¼šå°†æ¨¡å—å¯¼å‡ºçš„å¸¸é‡å½“åšå˜é‡å¤„ç†ï¼Œä»è€Œå¯¼è‡´ DCE å¤±æ•ˆã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½é€šè¿‡æ¨¡å—æ–¹å¼å¼•å…¥å¸¸é‡ï¼Œè€Œæ˜¯è¦ç”¨ <code>DefinePlugin</code> ç›´æ¥æŠŠå˜é‡æ›¿æ¢ä¸ºå¯¹åº”çš„å­—é¢é‡ã€‚</p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/y0QGSI-VZcy9CCe_cHezlw" target="_blank" rel="noopener noreferrer">æ²»ç†é¡¹ç›®æ¨¡å—ä¾èµ–å…³ç³»ï¼Œè¯•è¯•è¿™è‰˜ã€Œä¾èµ–å·¡æ´‹èˆ°ã€</a></p><p>ğŸ“’ ã€å‰ç«¯éƒ¨ç½²åäºŒç¯‡ã€‘ä½¿ç”¨ CI ä¸­çš„ç¼“å­˜è¿›è¡Œ Pipeline ä¼˜åŒ–</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ webpack 5 è¿›è¡Œæ„å»ºæ—¶ï¼Œå¦‚æœä½¿ç”¨äº† <code>filesystem cache</code>ï¼Œå› ä¸ºåœ¨ç£ç›˜ä¸­å«æœ‰ç¼“å­˜ (node_modules/.cache)ï¼ŒäºŒæ¬¡æ„å»ºå¾€å¾€æ¯”ä¸€æ¬¡æ„å»ºå¿«é€Ÿåå‡ å€ã€‚</p><p>è€Œåœ¨ CICD ä¸­ï¼Œè¿™äº›éƒ½å¤±å»äº†æ„ä¹‰ï¼Œå› ä¸º CICD æ¯æ¬¡ Job éƒ½ç›¸å½“äºæ–°å»ºäº†ä¸€ä¸ªç›®å½•ï¼Œã€Œæ¯æ¬¡æ„å»ºéƒ½ç›¸å½“äºæ˜¯é¦–æ¬¡æ„å»ºã€ã€‚</p><p>ä½†æ˜¯ï¼ŒCI æä¾›äº†ä¸€äº›ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥å°†ä¸€äº›èµ„æºè¿›è¡Œç¼“å­˜ã€‚å¦‚æœæ¯æ¬¡å¯ä»¥å°†ç¼“å­˜å–å‡ºæ¥ï¼Œåˆ™å¤§å¤§åŠ é€Ÿäº†å‰ç«¯éƒ¨ç½²çš„é€Ÿåº¦ã€‚</p><p><a href="https://mp.weixin.qq.com/s/7300HTz9nOOuCq_xTwXHhg" target="_blank" rel="noopener noreferrer">ã€å‰ç«¯éƒ¨ç½²åäºŒç¯‡ã€‘ä½¿ç”¨ CI ä¸­çš„ç¼“å­˜è¿›è¡Œ Pipeline ä¼˜åŒ–</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/f8mYoozpLrnSfWcRHTMa7A" target="_blank" rel="noopener noreferrer">UMI3æºç è§£æç³»åˆ—ä¹‹æ ¸å¿ƒserviceç±»åˆå§‹åŒ–</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/fPcdVCqWvkPqAdVK7JHacg" target="_blank" rel="noopener noreferrer">ã€ç¬¬2610æœŸã€‘JavaScript Containers</a></p><p>ğŸ“’ ã€å‰ç«¯éƒ¨ç½²åä¸€ç¯‡ã€‘é€šè¿‡ CICD å®è·µ Lintã€Testã€Performance ç­‰å‰ç«¯è´¨é‡ä¿éšœå·¥ç¨‹</p><p>åœ¨ CI æ“ä½œä¿éšœä»£ç è´¨é‡çš„ç¯èŠ‚ä¸­ï¼Œå¯ç¡®å®šä»¥ä¸‹æ—¶æœº:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 1. å½“åŠŸèƒ½åˆ†æ”¯ä»£ç  push åˆ°è¿œç¨‹ä»“åº“åï¼Œè¿›è¡Œ CI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;feature/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 2. å½“åŠŸèƒ½åˆ†æ”¯ä»£ç  push åˆ°è¿œç¨‹ä»“åº“ä»¥åŠæ˜¯ Pull Request åï¼Œè¿›è¡Œ CI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># å½“æ–°å»ºäº†ä¸€ä¸ª PR æ—¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> opened</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># å½“æäº¤ PR çš„åˆ†æ”¯ï¼Œæœªåˆå¹¶å‰å¹¶æ‹¥æœ‰æ–°çš„ Commit æ—¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> synchronize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;feature/**&#x27;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>CRA å†…éƒ¨ä½¿ç”¨ <code>ESLint Plugin</code> è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œè€Œéå‘½ä»¤çš„æ–¹å¼ã€‚å½“ ESLint å­˜åœ¨é—®é¢˜æ—¶ï¼ŒCRA å¦‚æœåˆ¤æ–­å½“å‰æ˜¯ CI ç¯å¢ƒï¼Œåˆ™ç›´æ¥æŠ¥é”™å¹¶é€€å‡ºè¿›ç¨‹ï¼Œå¯¼è‡´æ‰“åŒ…å¤±è´¥ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ESLintPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Plugin options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">failOnError</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isEnvDevelopment </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> emitErrorsAsWarnings</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Lint å’Œ Test ä»…æ˜¯ CI ä¸­æœ€å¸¸è§çš„é˜¶æ®µã€‚ä¸ºäº†ä¿éšœæˆ‘ä»¬çš„å‰ç«¯ä»£ç è´¨é‡ï¼Œè¿˜å¯ä»¥æ·»åŠ ä»¥ä¸‹é˜¶æ®µï¼š</p><ul><li>Audit: ä½¿ç”¨ npm audit æˆ–è€… snyk æ£€æŸ¥ä¾èµ–çš„å®‰å…¨é£é™©</li><li>Quality: ä½¿ç”¨ SonarQube æ£€æŸ¥ä»£ç è´¨é‡</li><li>Container Image: ä½¿ç”¨ trivy æ‰«æå®¹å™¨é•œåƒå®‰å…¨é£é™©</li><li>End to End: ä½¿ç”¨ Playwright è¿›è¡Œ UI è‡ªåŠ¨åŒ–æµ‹è¯•</li><li>Bundle Chunk Size Limit: ä½¿ç”¨ size-limit é™åˆ¶æ‰“åŒ…ä½“ç§¯ï¼Œæ‰“åŒ…ä½“ç§¯è¿‡å¤§åˆ™æ— æ³•é€šè¿‡åˆå¹¶</li><li>Performance (Lighthouse CI): ä½¿ç”¨ lighthouse CI ä¸ºæ¯æ¬¡ PR é€šè¿‡ Lighthouse æ‰“åˆ†ï¼Œå¦‚æ‰“åˆ†è¿‡ä½åˆ™æ— æ³•é€šè¿‡åˆå¹¶</li></ul><p>æœ‰äº›ç»†å¿ƒå¹¶çŸ¥è¯†é¢å¹¿æ³›çš„åŒå­¦å¯èƒ½æ³¨æ„åˆ°äº†ï¼ŒæŸäº› CI å·¥ä½œä¹Ÿå¯åœ¨ Git Hooks å®Œæˆï¼Œç¡®å®å¦‚æ­¤ã€‚</p><p>å®ƒä»¬çš„æœ€å¤§çš„åŒºåˆ«åœ¨äºä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯æ£€æŸ¥ï¼Œä¸€ä¸ªæ˜¯æœåŠ¡ç«¯æ£€æŸ¥ã€‚è€Œå®¢æˆ·ç«¯æ£€æŸ¥æ˜¯å¤©ç”Ÿä¸å¯ä¿¡ä»»çš„ã€‚</p><p>è€Œé’ˆå¯¹ <code>git hooks</code> è€Œè¨€ï¼Œå¾ˆå®¹æ˜“é€šè¿‡ <code>git commit --no-verify</code> è€Œè·³è¿‡ã€‚</p><p><a href="https://mp.weixin.qq.com/s/D7nXxYUMdMuo1du6fHnT-g" target="_blank" rel="noopener noreferrer">ã€å‰ç«¯éƒ¨ç½²åä¸€ç¯‡ã€‘é€šè¿‡ CICD å®è·µ Lintã€Testã€Performance ç­‰å‰ç«¯è´¨é‡ä¿éšœå·¥ç¨‹</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/fhSMz8BEIyjFGVnJtcVrKg" target="_blank" rel="noopener noreferrer">ã€ç¬¬2609æœŸã€‘Javascriptä¹‹è¿ªç±³ç‰¹æ³•åˆ™</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/01sTK6w4BFUzoRc2NKCs1w" target="_blank" rel="noopener noreferrer">React å¹¶å‘æ¸²æŸ“çš„å‰ä¸–ä»Šç”Ÿ</a></p><p>ğŸ“’ å¦‚ä½•ä¼˜é›…å®ç°è½®è¯¢</p><ul><li>åˆçº§ï¼šä½¿ç”¨å®šæ—¶å™¨ï¼ˆ<code>setInterval</code>ï¼‰</li><li>ä¸­çº§ï¼šä½¿ç”¨åŸºäºäº‹ä»¶å¾ªç¯çš„é€’å½’ï¼ˆ<code>setTimeout</code> é€’å½’è°ƒç”¨ï¼‰</li><li>é«˜çº§ï¼šä½¿ç”¨è½®è¯¢è°ƒåº¦å™¨</li></ul><p>ğŸ“’ npm åŒ…çš„å…¥å£ç‚¹</p><p>æ³¨æ„ <code>exports</code> å­—æ®µä¼˜å…ˆçº§æœ€é«˜ï¼Œå½“æä¾› <code>exports</code> å­—æ®µåï¼Œ<code>main</code>ã€<code>module</code> å­—æ®µä¼šè¢«è¦†ç›–ã€‚</p><p><code>exports</code> å¯ä»¥æ›´å®¹æ˜“åœ°æ§åˆ¶å­ç›®å½•çš„è®¿é—®è·¯å¾„ï¼Œä¸åœ¨ <code>exports</code> å­—æ®µä¸­çš„æ¨¡å—ï¼Œå³ä½¿ç›´æ¥è®¿é—®è·¯å¾„ï¼Œä¹Ÿæ— æ³•å¼•ç”¨ï¼</p><p><a href="https://juejin.cn/post/7025809061660590087" target="_blank" rel="noopener noreferrer">å·¥ç¨‹åŒ–çŸ¥è¯†å¡ç‰‡ 014: å‘åŒ…ç¯‡ä¹‹ package.json ä¸­ mainã€exportã€module çš„åŒºåˆ«ä½•åœ¨</a></p><p><a href="http://nodejs.cn/api/packages.html#main-entry-point-export" target="_blank" rel="noopener noreferrer">http://nodejs.cn/api/packages.html#main-entry-point-export</a></p><p>ğŸ“’ ä½¿ç”¨ Next.js å’Œ MDX æ„å»ºä½ è‡ªå·±çš„åšå®¢</p><blockquote><p><a href="https://www.freecodecamp.org/news/how-to-build-your-own-blog-with-next-js-and-mdx/" target="_blank" rel="noopener noreferrer">https://www.freecodecamp.org/news/how-to-build-your-own-blog-with-next-js-and-mdx/</a></p></blockquote><p>ğŸ“’ React Concurrent çš„æ•…äº‹</p><blockquote><p><a href="https://www.youtube.com/watch?v=NZoRlVi3MjQ" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=NZoRlVi3MjQ</a></p></blockquote><p>â­ï¸ <a href="https://mp.weixin.qq.com/s/toQUgqJHeUbFZMtxfzFCxw" target="_blank" rel="noopener noreferrer">TCP é‡ä¼ ã€æ»‘åŠ¨çª—å£ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§å¥½éš¾ï¼Ÿçœ‹å®Œå›¾è§£å°±ä¸æ„äº†</a></p><p>â­ï¸ <a href="https://mp.weixin.qq.com/s/9kHoRk6QIYOFUR_PCmHY6g" target="_blank" rel="noopener noreferrer">TCP å°±æ²¡ä»€ä¹ˆç¼ºé™·å—ï¼Ÿ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/b9Ye4iShgTSAcm0ce6m_9Q" target="_blank" rel="noopener noreferrer">React Server Componentsï¼šæˆ‘ä»¬å³å°†å’Œ API å‘Šåˆ«ï¼Ÿ</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/5æœˆ8æ—¥å†…å®¹æ±‡æ€»">5æœˆ8æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-08T00:00:00.000Z" itemprop="datePublished">May 8, 2022</time> Â· <!-- -->16 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ ä»é›¶å¼€å§‹æ„å»º JavaScript Bundler</p><p>Jest ä½œè€…çš„æœ€æ–°ç³»åˆ—æ–‡ç« ï¼Œå¹¶ä¸”é…å¥—è§†é¢‘ï¼Œå†…å®¹ç»å¯¹ç¡¬æ ¸ã€‚</p><blockquote><p><a href="https://cpojer.net/posts/building-a-javascript-bundler" target="_blank" rel="noopener noreferrer">https://cpojer.net/posts/building-a-javascript-bundler</a></p></blockquote><p>ğŸ“’ JavaScript æ¡†æ¶çš„å››ä¸ªæ—¶ä»£</p><p>è¿™ç¯‡æ–‡ç« ä½œè€…ä»¥è‡ªèº«å¤šå¹´çš„å¼€å‘ç»å†è¿˜åŸäº† JavaScript æ¡†æ¶çš„å‘å±•å†ç¨‹ï¼Œå¹¶åˆ’åˆ†å‡ºäº†å››ä¸ªæ—¶ä»£ã€‚</p><ul><li>è¿œå¤æ—¶ä»£ï¼šæ— æ¡†æ¶</li><li>æ¡†æ¶åˆæœŸï¼šBackbone.jsã€Angular 1ã€Knockout.jsã€SproutCoreã€Ember.jsã€Meteor.js</li><li>ä»¥ç»„ä»¶ä¸ºä¸­å¿ƒçš„æ—¶ä»£ï¼šReact.jsã€Vue.jsã€Svelteã€Polymer.js</li><li>å…¨æ ˆæ¡†æ¶ï¼šNext.jsã€Nuxt.jsã€Remixã€SvelteKitã€Gastby å’Œ Astro</li></ul><blockquote><p><a href="https://www.pzuraq.com/blog/four-eras-of-javascript-frameworks" target="_blank" rel="noopener noreferrer">https://www.pzuraq.com/blog/four-eras-of-javascript-frameworks</a></p></blockquote><p>ğŸ“’ pnpm v7.0.0</p><p>pnpm å‘å¸ƒäº† v7.0.0ï¼Œå¸¦æ¥äº†å¤§é‡çš„æ›´æ–°ã€‚å¦‚ï¼šä¸å†æ”¯æŒ Node.js 12ã€<code>pnpm run &lt;script&gt;</code> è„šæœ¬åç§°åçš„æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°éƒ½ä¼šä¼ é€’ç»™ argv ç­‰ç­‰ã€‚</p><blockquote><p><a href="https://github.com/pnpm/pnpm/releases/tag/v7.0.0" target="_blank" rel="noopener noreferrer">https://github.com/pnpm/pnpm/releases/tag/v7.0.0</a></p></blockquote><p>â­ï¸ 2022 å¹´çš„å‰ç«¯è¡Œä¸šï¼Œå’‹æ ·å•¦</p><p>ESRï¼ˆEdge Side Renderingï¼Œè¾¹ç¼˜æ¸²æŸ“ï¼‰æ˜¯æœ€è¿‘çš„ä¸€å¤§çƒ­é—¨è¶‹åŠ¿ï¼Œå¯ä»¥ç›´æ¥åœ¨ CDN çº§åˆ«å®ç°æŒ‰éœ€æ¸²æŸ“ã€‚Nuxt 3ã€Remix ä»¥åŠ Sveltekit ç­‰æ¡†æ¶éƒ½åœ¨æœç€è¿™ä¸ªæ–¹å‘å‘å±•ï¼Œç›®æµ‹ä¼šåœ¨æœªæ¥çš„ä¸€åˆ°ä¸¤å¹´ä¼šæˆä¸ºä¸€å¤§ç„¦ç‚¹ã€‚</p><p><a href="https://mp.weixin.qq.com/s/SLi0MQru1bh539ricvQCew" target="_blank" rel="noopener noreferrer">2022 å¹´çš„å‰ç«¯è¡Œä¸šï¼Œå’‹æ ·å•¦</a></p><p>ğŸ“’ <a href="https://github.com/nodejs/docker-node#create-a-dockerfile-in-your-nodejs-app-project" target="_blank" rel="noopener noreferrer">docker-node - Node.js å®˜æ–¹ Docker é•œåƒ</a></p><p>ğŸ“’ JS æ–°çš„æ—¥æœŸ APIï¼šTemporal</p><p>è¿™é¡¹ç‰¹æ€§ææ¡ˆæ—¶é—´ä¸º 2021 å¹´ 7 æœˆï¼Œä¸åˆ°ä¸€å¹´çš„æ—¶é—´å·²ç»è¿›å±•åˆ° stage-3 é˜¶æ®µï¼Œç›®å‰ç»„å§”ä¼šå·²ç»åœ¨åœ¨åšå®ƒçš„åŠŸèƒ½å®ç°ï¼Œæœ‰æœ›åœ¨ä¸‹ä¸ªç‰ˆæœ¬æ¨å‡ºã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>è¯¥é¡¹ææ¡ˆçš„åˆè¡·æ¥è‡ªè¿™ç¯‡æ–‡ç« ï¼Œå› ä¸º JavaScript æœ€åˆå…³äºæ—¥æœŸçš„å®ç°æ˜¯ç…§æ¬çš„ Java æ–¹æ¡ˆï¼Œä½†ç”±äºå„ç§é™åˆ¶å’Œé—®é¢˜ï¼ŒJava æ—©åœ¨ 1997 å¹´å°±å®ç° Calendar åšäº†åŠŸèƒ½æ”¹è¿›ï¼Œè€Œ JavaScript æ—¶è‡³ä»Šæ—¥ç”¨çš„è¿˜æ˜¯è€æ—§æ–¹æ¡ˆï¼Œæ”¹è¿›ä¼˜åŒ–å®åœ¨æ˜¯è¿«åœ¨çœ‰ç«ã€‚</p><p><a href="https://maggiepint.com/2017/04/09/fixing-javascript-date-getting-started/" target="_blank" rel="noopener noreferrer">https://maggiepint.com/2017/04/09/fixing-javascript-date-getting-started/</a></p></div></div><p>å®˜æ–¹æ–‡æ¡£ï¼ˆæ‰“å¼€æ§åˆ¶å°å°±å¯ä»¥ä½“éªŒ Polyfillï¼‰ï¼š</p><blockquote><p><a href="https://tc39.es/proposal-temporal/docs/" target="_blank" rel="noopener noreferrer">https://tc39.es/proposal-temporal/docs/</a></p></blockquote><p>æˆ–è€…åœ¨ RunKit ä¸Šä½“éªŒï¼ˆæµè§ˆå™¨ç«¯è¿è¡Œ node æ¨¡å—ï¼‰ï¼š</p><blockquote><p><a href="https://npm.runkit.com/proposal-temporal" target="_blank" rel="noopener noreferrer">https://npm.runkit.com/proposal-temporal</a></p></blockquote><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/zt7x2KjMT_cWvLVVa2-Hww" target="_blank" rel="noopener noreferrer">ã€å·¥ç¨‹åŒ–ã€‘æ¢ç´¢webpack5ä¸­çš„Module Federation</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/xd6hjcxCm5dpRF95QawmxA" target="_blank" rel="noopener noreferrer">æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ Webpack å°†å¯åŠ¨æ—¶é—´å‡å°‘ 80%</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7094424941541457933" target="_blank" rel="noopener noreferrer">Reactå®˜æ–¹å›¢é˜Ÿå‡ºæ‰‹ï¼Œè¡¥é½åŸç”ŸHookçŸ­æ¿</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7094296981001994277" target="_blank" rel="noopener noreferrer">ä½ å¯èƒ½å¹¶æ²¡æœ‰ç†è§£çš„ babel é…ç½®çš„åŸç†</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7083009375387779085" target="_blank" rel="noopener noreferrer">å‰ç«¯æŠ¢é¥­ç¢—ç³»åˆ—ä¹‹Dockerè¿›é˜¶éƒ¨ç½²</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7069609959985512484" target="_blank" rel="noopener noreferrer">å‰ç«¯æŠ¢é¥­ç¢—ç³»åˆ—ä¹‹åˆè¯†Dockerå®¹å™¨åŒ–éƒ¨ç½²</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7052307032971411463" target="_blank" rel="noopener noreferrer">ä»é›¶å¼€å§‹å‘å¸ƒè‡ªå·±çš„NPMåŒ…</a></p><p>â­ï¸ <a href="https://mp.weixin.qq.com/s/-B5M7pjIWZzFNvq-hyr1Mw" target="_blank" rel="noopener noreferrer">Umi 4 ç‰¹æ€§åˆé›†ï¼Œæ¯” Vite è¿˜è¦å¿«ï¼Ÿ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/1QZ37jf_6av1i_ESTPvfaQ" target="_blank" rel="noopener noreferrer">HTTPåˆ†å—ä¼ è¾“ å¦‚ä½•åœ¨ React18 ä¸­åº”ç”¨</a></p><p>ğŸ“’ <a href="https://www.bilibili.com/video/BV1j44y1g74m" target="_blank" rel="noopener noreferrer">ä¸‹é›†ã€Reactæ€§èƒ½ä¼˜åŒ–ï¼Œä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</a></p><p>ğŸ“’ htmlparser2 8.0ï¼šå¿«é€Ÿä¸”é«˜å®¹é”™çš„ HTML å’Œ XML è§£æå™¨</p><blockquote><p><a href="https://github.com/fb55/htmlparser2" target="_blank" rel="noopener noreferrer">https://github.com/fb55/htmlparser2</a></p></blockquote><p>ğŸ“’ Node v18 test æ¨¡å—</p><p>æ³¨æ„ Node v18 test æ¨¡å—æ˜¯ç¬¬ä¸€ä¸ª Prefix-Only Core Modulesï¼Œä¹Ÿå°±æ˜¯è¯´åŠ è½½è¯¥æ¨¡å—å¿…é¡»å¸¦ä¸Š <code>node:</code> å‰ç¼€ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">test</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;node:test&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Uses the node: prefix. Loads from core.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">assert</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;assert&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Does not use the node: prefix. Loads from core.</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>å‡å¦‚æ²¡æœ‰å¸¦ä¸Š <code>node:</code> å‰ç¼€ï¼Œåˆ™ä¼šå°è¯•ä»ç”¨æˆ·ç©ºé—´åŠ è½½ <code>test</code> æ¨¡å—ã€‚ä½†æ˜¯å¯¹äº Node å…¶ä»–å†…ç½®æ¨¡å—æ¥è¯´ï¼ŒåŠ ä¸åŠ  <code>node:</code> å‰ç¼€éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><blockquote><p><a href="https://fusebit.io/blog/node-18-prefix-only-modules/" target="_blank" rel="noopener noreferrer">https://fusebit.io/blog/node-18-prefix-only-modules/</a></p></blockquote></div></div><p>ğŸ“’ Node v16.15.0 (LTS) å‘å¸ƒ</p><p>ç°åœ¨ Node v16 å¯ä»¥ä½¿ç”¨å®éªŒæ€§æ”¯æŒçš„ Fetch API äº†</p><blockquote><p><a href="https://nodejs.org/en/blog/release/v16.15.0/" target="_blank" rel="noopener noreferrer">https://nodejs.org/en/blog/release/v16.15.0/</a></p></blockquote><p>ğŸ“’ å‡çº§åˆ° React 18 æ‰€å¯¹åº”çš„ TypeScript ç±»å‹å®šä¹‰çš„æ”¹åŠ¨</p><blockquote><p><a href="https://blog.logrocket.com/upgrading-react-18-typescript/" target="_blank" rel="noopener noreferrer">https://blog.logrocket.com/upgrading-react-18-typescript/</a></p></blockquote><p>ğŸ“’ å¦‚ä½•ç†è§£ React Hooks çš„é—­åŒ…é™·é˜±</p><p>å‡½æ•°ç»„ä»¶æ›´æ–°ï¼Œå®é™…ä¸Šå°±æ˜¯å‡½æ•°é‡æ–°æ‰§è¡Œï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ‰€æœ‰å˜é‡ã€å‡½æ•°é‡æ–°åˆ›å»ºï¼Œhooks é‡æ–°æ‰§è¡Œã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨çš„å˜é‡å°±ä¼šé”€æ¯ã€è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚å½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–æƒ…å†µï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œå‡½æ•° <code>baz</code> ä¾èµ–äº† <code>bar</code> å†…éƒ¨çš„å˜é‡ <code>a</code>ï¼Œå¹¶ä¸” <code>baz</code> ä½œä¸ºè¿”å›å€¼ä¼ é€’ç»™äº† <code>foo</code>ï¼Œå› æ­¤ <code>a</code> å¹¶ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ï¼Œè€Œæ˜¯ä¼šä½œä¸ºé—­åŒ…ç¼“å­˜ä¸‹æ¥ã€‚åªè¦ <code>foo</code> çš„å¼•ç”¨ä¸è§£é™¤ï¼Œ<code>a</code> å°±ä¼šä¸€ç›´ç¼“å­˜ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">baz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å†æ¥çœ‹è¿™ä¸ªåœºæ™¯ï¼š<code>useEffect</code> çš„å›è°ƒå‡½æ•°ä¾èµ–äº† state å˜é‡ï¼Œè€Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªå›è°ƒå‡½æ•°åœ¨ä¸‹æ¬¡ rerender ä¹‹å‰éƒ½æ˜¯ç¼“å­˜åœ¨ fiber èŠ‚ç‚¹ä¸Šçš„ï¼Œè¿™æ ·ä¸€æ¥å°±åˆ›å»ºäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°ç»„ä»¶å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œä½†æ˜¯ state å˜é‡ä»ä¼šè¢«ç¼“å­˜ä¸‹æ¥ã€‚</p><p>å½“ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œstate å˜é‡ä¹Ÿä¼šé‡æ–°ç”Ÿæˆï¼Œä½†æ˜¯ <code>useEffect</code> å›è°ƒå‡½æ•°ä»ç„¶å¼•ç”¨äº†æ—§çš„é—­åŒ…ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆ <code>useEffect</code> ä¾èµ–é¡¹å˜åŒ–ã€å›è°ƒå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œæ€»æ˜¯å¯ä»¥è·å–åˆ°æ–°çš„å€¼å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæ¯æ¬¡å‡½æ•°ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œ<code>useEffect</code> éƒ½ä¼šé‡æ–°æ‰§è¡Œï¼Œå›è°ƒå‡½æ•°ä¹Ÿä¼šé‡æ–°ç”Ÿæˆï¼ˆä½†ä¸ä¸€å®šéƒ½ä¼šæ‰§è¡Œï¼‰ï¼Œåœ¨ <code>updateEffectImpl</code> å†…éƒ¨ç”¨é‡æ–°ç”Ÿæˆçš„å‡½æ•°æ›¿æ¢äº† fiber èŠ‚ç‚¹ç¼“å­˜çš„å‡½æ•°ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå›è°ƒå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå§‹ç»ˆéƒ½èƒ½è·å–åˆ°æœ€æ–°çš„å€¼äº†ã€‚</p><p>ä½ å¯èƒ½ä¼šè§‰å¾—è¿™æ ·æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœåœ¨ <code>useEffect</code> ä¸­ä½¿ç”¨å®šæ—¶å™¨ï¼Œå¤§æ¦‚ç‡éƒ½ä¼šé‡åˆ°é—­åŒ…é™·é˜±ã€‚</p><p>å¦ä¸€ä¸ªä¼šé‡åˆ°é—­åŒ…é™·é˜±çš„æ˜¯ <code>useCallback</code>ã€‚å¾ˆå¤šåŒå­¦è§‰å¾— <code>useCallback</code> ä¾èµ–é¡¹ä¼¼ä¹æ²¡ä»€ä¹ˆç”¨ï¼Œä¹ æƒ¯æ€§ä¼ é€’ç©ºæ•°ç»„ï¼Œè¿™å°±ä¼šå¯¼è‡´å‡½æ•°ä¸€ç›´è¢«ç¼“å­˜ï¼Œå‡å¦‚å†…éƒ¨ä¾èµ–äº† state å˜é‡ï¼Œåˆ™å§‹ç»ˆä¼šç¼“å­˜æ—§çš„é—­åŒ…ã€‚æ­£ç¡®åšæ³•åº”è¯¥æ˜¯æŠŠ state å˜é‡æ·»åŠ åˆ°ä¾èµ–é¡¹æ•°ç»„ä¸­ï¼Œåœ¨ state æ”¹å˜çš„æ—¶å€™é‡æ–°ç”Ÿæˆå‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥è·å–åˆ°æœ€æ–°çš„å€¼ã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>å‡½æ•°ç»„ä»¶ rerender è¿‡ç¨‹ä¸­ï¼Œç¼“å­˜çŠ¶æ€çš„ fiber èŠ‚ç‚¹ï¼ˆç›¸å½“äºç»„ä»¶å®ä¾‹ï¼‰å¹¶ä¸ä¼šé”€æ¯ï¼Œä½†å‡½æ•°ç»„ä»¶æ˜¯é‡æ–°æ‰§è¡Œäº†ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå¦‚æœ useEffect å›è°ƒä¾èµ–äº† state å˜é‡ï¼Œåˆ™ä¼šä¸€ç›´ç¼“å­˜æ—§çš„é—­åŒ…ã€‚æ‰€ä»¥è¦é¿å…é—­åŒ…é™·é˜±ï¼Œåªéœ€è¦ <strong>ä¿è¯æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œå‡½æ•°éƒ½é‡æ–°ç”Ÿæˆ</strong> å°±è¡Œã€‚</p></div></div><p>ğŸ“’ TypeScript å°æŠ€å·§ï¼šå¸¸é‡æ–­è¨€</p><p>åœ¨è®²å¸¸é‡æ–­è¨€ä¹‹å‰ï¼Œå…ˆæä¸€ä¸‹ï¼ŒTS ä¼šåŒºåˆ«å¯¹å¾…å¯ä¿®æ”¹å’Œä¸å¯ä¿®æ”¹çš„å€¼çš„ç±»å‹æ¨æ–­ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ¨æ–­æˆå•å€¼ç±»å‹ &#x27;dbydm&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> immutable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dbydm&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ¨æ–­æˆé€šç”¨çš„ string ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> mutable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dn&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç”±äºå¯¹è±¡çš„å±æ€§éƒ½å…·æœ‰å¯ä¿®æ”¹æ€§ï¼ŒTS éƒ½ä¼šå¯¹å®ƒä»¬ã€Œä»å®½ã€ç±»å‹æ¨æ–­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä¾‹å¦‚ä¸‹é¢çš„ prop çš„ç±»å‹è¢«æ¨æ–­ä¸º string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> prop</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å†æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼Œä¾‹å¦‚æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç”¨ ref ç»´æŠ¤çŠ¶æ€çš„ hookï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> useRenderlessState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> stateRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">setState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> stateRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nextState</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">stateRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤æ—¶æˆ‘ä»¬ä¼šå‘ç°ä¸Šé¢ hook çš„è¿”å›å€¼çš„ç±»å‹è¢«æ¨å¯¼æˆäº†å¦‚ä¸‹çš„æ•°ç»„ç±»å‹ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™å°±å¯¼è‡´æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™æ— æ³•å¯¹å®ƒè¿›è¡Œå‡†ç¡®çš„è§£æ„ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setValue</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRenderlessState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¯ä»¥ <strong>æ˜¾ç¤ºå£°æ˜è¿”å›ç±»å‹</strong> æˆ–è€… <strong>å¯¹è¿”å›å€¼åšç±»å‹æ–­è¨€</strong>ï¼Œå‘Šè¯‰ TS è¿”å›å€¼ç±»å‹æ˜¯å…ƒç»„è€Œä¸æ˜¯æ•°ç»„ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ˜¾ç¤ºå£°æ˜è¿”å›ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> useRenderlessState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/*...*/</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¯¹è¿”å›å€¼å¯¹ç±»å‹æ–­è¨€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> useRenderlessState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> setValue</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šé¢çš„ä¸¤ç§å†™æ³•éƒ½å„æœ‰å†—ä½™æˆåˆ†ï¼Œç®—ä¸ä¸Šä¼˜é›…ã€‚</p><p>å…¶å®ä»è¯­ä¹‰å±‚é¢æ¥åˆ†æï¼ŒTS ä¹‹æ‰€ä»¥æ²¡èƒ½å°†è¿”å›å€¼æ¨æ–­ä¸ºå…ƒç»„ç±»å‹æ˜¯å› ä¸ºå®ƒè®¤ä¸ºè¯¥è¿”å›å€¼ä»æœ‰å¯èƒ½è¢« push å€¼ï¼Œè¢«ä¿®æ”¹ã€‚æ‰€ä»¥æˆ‘ä»¬çœŸæ­£éœ€è¦åšçš„æ˜¯å‘Šè¯‰ TSï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ª finalï¼Œå…¶æœ¬èº«å’Œå±æ€§éƒ½æ˜¯ä¸å¯ç¯¡æ”¹çš„ï¼Œè€Œè¿™æ­£æ˜¯å¸¸é‡æ–­è¨€æ‰€åšçš„äº‹ã€‚</p><p>å¸¸é‡æ–­è¨€å¯ä»¥æŠŠä¸€ä¸ªå€¼æ ‡è®°ä¸ºä¸€ä¸ªä¸å¯ç¯¡æ”¹çš„å¸¸é‡ï¼Œä»è€Œè®© TS ä»¥æœ€ä¸¥æ ¼çš„ç­–ç•¥æ¥è¿›è¡Œç±»å‹æ¨æ–­ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> useRenderlessState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™ä¸‹ <code>useRenderlessState</code> çš„è¿”å›ç±»å‹å°±è¢«æ¨æ–­æˆäº†å¦‚ä¸‹çš„ readonly å€¼ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p><code>as const</code> ä¸ ES6 <code>const</code> å¸¸é‡å£°æ˜çš„åŒºåˆ«ï¼š</p><ul><li><code>const</code> å¸¸é‡å£°æ˜æ˜¯ ES6 çš„è¯­æ³•ï¼Œå¯¹ TS è€Œè¨€ï¼Œå®ƒåªèƒ½åæ˜ è¯¥å¸¸é‡æœ¬èº«æ˜¯ä¸å¯è¢«é‡æ–°èµ‹å€¼çš„ï¼Œå®ƒçš„å­å±æ€§ä»ç„¶å¯ä»¥è¢«ä¿®æ”¹ï¼Œæ•… TS åªä¼šå¯¹å®ƒä»¬åšæ¾æ•£çš„ç±»å‹æ¨æ–­</li><li><code>as const</code> æ˜¯ TS çš„è¯­æ³•ï¼Œå®ƒå‘Šè¯‰ TS å®ƒæ‰€æ–­è¨€çš„å€¼ä»¥åŠè¯¥å€¼çš„æ‰€æœ‰å±‚çº§çš„å­å±æ€§éƒ½æ˜¯ä¸å¯ç¯¡æ”¹çš„ï¼Œæ•…å¯¹æ¯ä¸€çº§å­å±æ€§éƒ½ä¼šåšæœ€ä¸¥æ ¼çš„ç±»å‹æ¨æ–­ï¼ˆæ‰€æœ‰çš„å­—é¢é‡éƒ½ä¼šè¢«æ¨æ–­ä¸ºå•å€¼ç±»å‹ï¼‰</li></ul><p>å¸¸é‡æ–­è¨€å¯ä»¥è®©æˆ‘ä»¬ä¸éœ€è¦ <code>enum</code> å…³é”®å­—å°±èƒ½å®šä¹‰æšä¸¾å¯¹è±¡ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">EnvEnum</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">DEV</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;development&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">PROD</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;production&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">TEST</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;test&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p><a href="https://zhuanlan.zhihu.com/p/121558249" target="_blank" rel="noopener noreferrer">TypeScript å¤œç‚¹å¿ƒï¼šå¸¸é‡æ–­è¨€</a></p><p>ğŸ“’ äº†è§£ <code>Symbol.toStringTag</code> çš„ç”¨æ³•å—</p><p><code>Symbol.toStringTag</code> æ˜¯ä¸€ä¸ªå†…ç½® symbolï¼Œå®ƒé€šå¸¸ä½œä¸ºå¯¹è±¡çš„å±æ€§é”®ä½¿ç”¨ï¼Œå¯¹åº”çš„å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œç”¨æ¥è¡¨ç¤ºè¯¥å¯¹è±¡çš„è‡ªå®šä¹‰ç±»å‹æ ‡ç­¾ã€‚é€šå¸¸åªæœ‰å†…ç½®çš„ <code>Object.prototype.toString()</code> æ–¹æ³•ä¼šå»è¯»å–è¿™ä¸ªæ ‡ç­¾å¹¶æŠŠå®ƒåŒ…å«åœ¨è‡ªå·±çš„è¿”å›å€¼é‡Œã€‚</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">toStringTag</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;æµ‹è¯•å†…å®¹&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;[object Object]&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bar</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;[object æµ‹è¯•å†…å®¹]&#x27;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag" target="_blank" rel="noopener noreferrer">Symbol.toStringTag - MDN æ–‡æ¡£</a></p><p>ğŸ“’ å‡½æ•°ç»„åˆä¸­çš„ <code>compose</code>ã€<code>flow</code>ã€<code>pipe</code></p><p><code>compose</code> å®ç°å¦‚ä¸‹ï¼Œæ³¨æ„è°ƒç”¨é¡ºåºæ˜¯åè¿‡æ¥çš„ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">compose</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter spread operator" style="color:#393A34">...</span><span class="token parameter">fns</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">x0</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> fns</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduceRight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ¥å—å‚æ•°åï¼Œè¿”å›ä¸€ä¸ªå¾…æ‰§è¡Œå‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// éœ€è¦å†æ¥å—ä¸€ä¸ªåˆå§‹å€¼æ‰å¼€å§‹æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> processComment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    linkify</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    imagify</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emphasize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    headalize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>flow</code> å®ç°å¦‚ä¸‹ï¼Œæ³¨æ„è¿™é‡Œè°ƒç”¨é¡ºåºæ˜¯ä»å·¦åˆ°å³ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">flow</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter spread operator" style="color:#393A34">...</span><span class="token parameter">fns</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">x0</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> fns</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ³¨æ„è¿™é‡Œä»ç„¶æ˜¯è¿”å›ä¸€ä¸ªå¾…æ‰§è¡Œå‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> processComment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">flow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    headalize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emphasize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    imagify</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    linkify</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    codify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>pipe</code> å®ç°å¦‚ä¸‹ï¼Œè°ƒç”¨é¡ºåºä¹Ÿæ˜¯ä»å·¦åˆ°å³ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ³¨æ„ pipe ç›´æ¥æ‰§è¡Œæ‰€æœ‰çš„å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è€Œ flow è¿”å›ä¸€ä¸ªå¾…æ‰§è¡Œå‡½æ•°ï¼Œéœ€è¦å†æ¥å—ä¸€ä¸ªåˆå§‹å€¼æ‰å¼€å§‹æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">pipe</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x0</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter spread operator" style="color:#393A34">...</span><span class="token parameter">fns</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> fns</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">map</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">f</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">arr</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">filter</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">p</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">arr</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">take</span><span class="token plain">   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">n</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">arr</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">join</span><span class="token plain">   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">s</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">arr</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> comments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">commentStrs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">noNazi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">take</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">emphasize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">itemize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;\n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://jrsinclair.com/articles/2022/javascript-function-composition-whats-the-big-deal/" target="_blank" rel="noopener noreferrer">ä»€ä¹ˆæ˜¯ JavaScript çš„å‡½æ•°ç»„åˆ</a></p><p>ğŸ“’ åŸºäºä¾èµ–å€’ç½®åŸåˆ™å®ç°æ’ä»¶æœºåˆ¶</p><p>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰</p><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼šä¾èµ–ä¸€ä¸ªæŠ½è±¡çš„æœåŠ¡æ¥å£ï¼Œè€Œä¸æ˜¯å»ä¾èµ–ä¸€ä¸ªå…·ä½“çš„æœåŠ¡æ‰§è¡Œè€…ï¼Œä»ä¾èµ–å…·ä½“å®ç°è½¬å‘åˆ°ä¾èµ–æŠ½è±¡æ¥å£ï¼Œå€’ç½®è¿‡æ¥</p></blockquote><p>ä¾‹å¦‚åœ¨ Webpack ä¸­åŒ…å«ä¸€å¥—æ’ä»¶æœºåˆ¶ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebpackBar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">webpack</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">HotModuleReplacementPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;css/[name].[contenthash:8].css&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">chunkFilename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;[id].css&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../public/index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;React App&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;index.html&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Webpack æ’ä»¶éœ€è¦å®ç°ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œå³ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compiler</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ICompiler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">MyPlugin</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ„é€ å™¨å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ¥å—é…ç½®å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compiler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ · Webpack åªéœ€è¦éå† <code>plugins</code> æ•°ç»„ï¼Œé¡ºæ¬¡è°ƒç”¨æ¯ä¸ªæ’ä»¶ä¸Šçš„ <code>apply</code> æ–¹æ³•ï¼Œä¼ å…¥ <code>compiler</code> å¯¹è±¡å³å¯ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">plugins</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plugin </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compiler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é¡ºä¾¿æä¸€ä¸‹ï¼Œæœ‰åŒå­¦ä¼šé—®ï¼Œä¸ºå•¥æ’ä»¶è¦å†™æˆ class çš„å½¢å¼ï¼Œç›´æ¥ç”¨ä¸€ä¸ªå¯¹è±¡å¯ä»¥å—ï¼Œä¾‹å¦‚ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">MyPlugin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compiler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>ç›´æ¥ç”¨ä¸€ä¸ªå¯¹è±¡ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ç”¨ class æ˜¾ç„¶æ›´çµæ´»ï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ¥å—é…ç½®å‚æ•°</p></blockquote><p>ğŸ“’ æµè§ˆå™¨ JavaScript å’Œ Node.js çš„åŒºåˆ«</p><ul><li>API åŒºåˆ«ï¼šæµè§ˆå™¨ JavaScript æ˜¯é¢å‘æµè§ˆå™¨ç¼–ç¨‹ï¼Œè°ƒç”¨æµè§ˆå™¨çš„ APIï¼Œä¾‹å¦‚ <code>document</code>ã€<code>window</code>ã€‚è€Œ Node.js æ˜¯é¢å‘æ“ä½œç³»ç»Ÿç¼–ç¨‹ï¼Œæ²¡æœ‰æµè§ˆå™¨ APIï¼Œç›¸åå¯ä»¥è°ƒç”¨ Node æä¾›çš„æ ‡å‡†åº“ï¼Œä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’</li><li>è¿è¡Œç¯å¢ƒåŒºåˆ«ï¼šæµè§ˆå™¨ JavaScript çš„ç‰¹æ®Šæ€§ï¼ˆJS ä»£ç éœ€è¦ç»è¿‡ç½‘ç»œè¯·æ±‚ï¼Œåœ¨å®¢æˆ·ç«¯ä¸‹è½½å¹¶æ‰§è¡Œï¼‰ï¼Œå› æ­¤æ— æ³•é€‰æ‹©è¿è¡Œç¯å¢ƒï¼Œéœ€è¦è€ƒè™‘è¯­æ³•ã€API å…¼å®¹æ€§é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ Babel å¤„ç†ã€‚è€Œ Node.js é€šå¸¸åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒã€CI ç¯å¢ƒã€æœåŠ¡ç«¯è¿è¡Œï¼Œå¯ä»¥æ§åˆ¶è¿è¡Œç¯å¢ƒï¼Œæ— éœ€è€ƒè™‘å…¼å®¹æ€§é—®é¢˜</li><li>æ¨¡å—è§„èŒƒåŒºåˆ«ï¼šæµè§ˆå™¨åŸæœ¬æ²¡æœ‰æ¨¡å—æœºåˆ¶ï¼Œä½†å¯ä»¥è‡ªè¡Œå®ç°æ¨¡å—å‘½åç©ºé—´æœºåˆ¶ï¼ˆä¾‹å¦‚ <code>browserify</code>ã€<code>webpack</code>ï¼‰ï¼Œä» Chrome 61 å¼€å§‹æ”¯æŒ <code>&lt;script type=&quot;module&quot;&gt;</code>ï¼Œå³æµè§ˆå™¨åŸç”Ÿæ”¯æŒ <code>import</code> å‘½ä»¤åŠ è½½æ¨¡å—ï¼ˆéœ€è¦æ³¨æ„è¿™ç§æ–¹å¼ä¹Ÿæ˜¯è¦ç»è¿‡ç½‘ç»œè¯·æ±‚ï¼‰ã€‚è€Œ Node.js è‡ªå¸¦äº†ä¸€å¥— CommonJS æ¨¡å—æœºåˆ¶ï¼Œåœ¨ Node 14 ä¹‹åæ”¯æŒ ES Module è§„èŒƒï¼ˆæ³¨æ„ CommonJS ä»ç„¶æ˜¯é»˜è®¤å¯ç”¨çš„æ¨¡å—è§„èŒƒï¼‰</li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/5æœˆ1æ—¥å†…å®¹æ±‡æ€»">5æœˆ1æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-01T00:00:00.000Z" itemprop="datePublished">May 1, 2022</time> Â· <!-- -->18 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ <a href="https://juejin.cn/post/7092283403277434893" target="_blank" rel="noopener noreferrer">å®ç°ä¸€ä¸ª Code Penï¼šï¼ˆä¸‰ï¼‰10 è¡Œä»£ç å®ç°ä»£ç æ ¼å¼åŒ–</a></p><p>ğŸ“’ ä¸ºä»€ä¹ˆç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—</p><p>å¾ˆå¤šæ—¶å€™ç”¨æ•°ç»„ä¹Ÿèƒ½å®ç°é˜Ÿåˆ—ï¼Œæˆ‘ä»¬çŸ¥é“æ•°ç»„å°¾éƒ¨æ“ä½œï¼ˆä¾‹å¦‚ <code>push</code>ã€<code>pop</code>ï¼‰æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ <code>O(1)</code>ï¼Œä½†å¦‚æœåœ¨æ•°ç»„å¤´éƒ¨å¢åˆ å…ƒç´ ï¼ˆä¾‹å¦‚ <code>shift</code>ã€<code>unshift</code>ï¼‰ï¼Œéœ€è¦ç§»åŠ¨å…¶ä»–å…ƒç´ çš„ä¸‹æ ‡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code>ã€‚</p><p>è€Œé“¾è¡¨å¢åˆ å…ƒç´ å®é™…ä¸Šéƒ½æ˜¯ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘ï¼Œä¸éœ€è¦ç§»åŠ¨ä¸‹æ ‡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ <code>O(1)</code>ã€‚é“¾è¡¨åªæœ‰æŸ¥æ‰¾å…ƒç´ éœ€è¦éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code>ï¼Œä½†æ˜¯é˜Ÿåˆ—å¹¶ä¸éœ€è¦æŸ¥æ‰¾ï¼Œè€Œä¸”é“¾è¡¨çš„ <code>size</code> å±æ€§å¯ä»¥åœ¨å¢åˆ æ“ä½œçš„æ—¶å€™è¿›è¡Œç»´æŠ¤ï¼Œæ‰€ä»¥ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—éå¸¸åˆé€‚ã€‚</p><p>æ€è€ƒé¢˜ï¼šå¦‚ä½•åœ¨å¸¸æ•°æ—¶é—´å†…åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´ ã€‚æˆ‘ä»¬çŸ¥é“ <code>splice</code> åˆ é™¤å…ƒç´ ä¹Ÿéœ€è¦ç§»åŠ¨å…¶ä»–å…ƒç´ ä¸‹æ ‡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code>ï¼Œä½†æ˜¯åœ¨æ•°ç»„å°¾éƒ¨æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ <code>O(1)</code>ï¼Œå› æ­¤å¯ä»¥å…ˆæŠŠè¦åˆ é™¤çš„å…ƒç´ äº¤æ¢åˆ°æ•°ç»„å°¾éƒ¨ï¼Œç„¶åç›´æ¥åˆ é™¤å°¾éƒ¨å…ƒç´ å³å¯ã€‚</p><p>ğŸ“’ <a href="https://zhuanlan.zhihu.com/p/445217118" target="_blank" rel="noopener noreferrer">å†™ç»™å‰ç«¯çš„ K8S ä¸Šæ‰‹æŒ‡å—</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/wJxj5QbOHwH9cKmqU5eSQw" target="_blank" rel="noopener noreferrer">Webé¡µé¢å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–æŒ‡å—</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/3PSFMt9cQ1ZCoYQrdOCM6Q" target="_blank" rel="noopener noreferrer">ç³»ç»Ÿå›°å¢ƒä¸è½¯ä»¶å¤æ‚åº¦ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬çš„ç³»ç»Ÿä¼šå¦‚æ­¤å¤æ‚</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/MYLi4mSgoi5KXj4-_OgT3A" target="_blank" rel="noopener noreferrer">ã€ç¬¬2602æœŸã€‘è®¾ç½® NPM Registry çš„ 4 ç§å§¿åŠ¿</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/tWbeOTx0JpiZOD0YaC1P2A" target="_blank" rel="noopener noreferrer">å‰ç«¯ç®—æ³•ç³»ç»Ÿç»ƒä¹ : æ ˆå’Œé˜Ÿåˆ—ç¯‡</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/6974262139062059045" target="_blank" rel="noopener noreferrer">æ€ä¹ˆè§£å†³MySQLæ­»é”é—®é¢˜çš„</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/OlOMm20cSRaQESiZ_DC7mQ" target="_blank" rel="noopener noreferrer">ã€ç¬¬2598æœŸã€‘ServiceWorker ç¼“å­˜ä¸ HTTP ç¼“å­˜</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/U00My70CqPtmCE1MbSNdFA" target="_blank" rel="noopener noreferrer">Monorepo çš„è¿‡å»ã€ç°åœ¨ã€å’Œæœªæ¥</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/JMl8LOsNYlttxO-KyVK-Vw" target="_blank" rel="noopener noreferrer">ã€ç¬¬2597æœŸã€‘å¦‚ä½•ç”¨JavaScriptå®ç°ä¸€é—¨ç¼–ç¨‹è¯­è¨€ - AST</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/n6kjr2IFn1fb-_-DFUnD1Q" target="_blank" rel="noopener noreferrer">TS ç±»å‹ä½“æ“ï¼šç´¢å¼•ç±»å‹çš„æ˜ å°„å†æ˜ å°„</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/9VaUq9FOm2_nKNCGaH-7rw" target="_blank" rel="noopener noreferrer">ESBuild &amp; SWCæµ…è°ˆ: æ–°ä¸€ä»£æ„å»ºå·¥å…·</a></p><p>ğŸ“’ InnoDBåŸç†ç¯‡ï¼šå¦‚ä½•ç”¨å¥½ç´¢å¼•</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ InnoDB ç´¢å¼•ç»“æ„æ˜¯ B+ æ ‘ç»„ç»‡çš„ï¼Œä½†æ˜¯æ ¹æ® <strong>æ•°æ®å­˜å‚¨å½¢å¼ä¸åŒ</strong> å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯ <strong>èšç°‡ç´¢å¼•</strong> ä¸ <strong>äºŒçº§ç´¢å¼•</strong>ã€‚</p><p>å…¶å®èšç°‡ç´¢å¼•çš„æœ¬è´¨å°±æ˜¯ä¸»é”®ç´¢å¼•ã€‚å› ä¸ºæ¯å¼ è¡¨åªèƒ½æ‹¥æœ‰ä¸€ä¸ªä¸»é”®å­—æ®µï¼Œæ‰€ä»¥æ¯å¼ è¡¨åªæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚å¦å¤–èšç°‡ç´¢å¼•è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œè¡¨çš„æ•°æ®å’Œä¸»é”®æ˜¯ä¸€èµ·å­˜å‚¨çš„ï¼Œå®ƒçš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯æ•´å¼ è¡¨çš„è¡Œæ•°æ®ï¼ˆæ ‘çš„æœ€åä¸€å±‚ï¼‰ï¼Œå¶å­èŠ‚ç‚¹åˆç§°ä¸ºæ•°æ®é¡µã€‚</p><blockquote><p>å¾ˆç®€å•è®°ä½ä¸€å¥è¯ï¼š<strong>æ‰¾åˆ°äº†ç´¢å¼•å°±æ‰¾åˆ°äº†è¡Œæ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•å°±æ˜¯èšç°‡ç´¢å¼•</strong></p></blockquote><p>çŸ¥é“äº†èšç°‡ç´¢å¼•ï¼Œå†æ¥çœ‹çœ‹äºŒçº§ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Œç®€å•æ¦‚æ‹¬ï¼Œ<strong>é™¤ä¸»é”®ç´¢å¼•ä»¥å¤–çš„ç´¢å¼•ï¼Œéƒ½æ˜¯äºŒçº§ç´¢å¼•</strong>ï¼Œåƒæˆ‘ä»¬å¹³æ—¶å»ºç«‹çš„è”åˆç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ç­‰ã€‚</p><p>äºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ç´¢å¼•å€¼ + ä¸»é”® <code>id</code>ã€‚æ‰€ä»¥äºŒçº§ç´¢å¼•ä¸èšç°‡ç´¢å¼•çš„åŒºåˆ«åœ¨äº <strong>å¶å­èŠ‚ç‚¹æ˜¯å¦å­˜æ”¾æ•´è¡Œè®°å½•</strong>ã€‚</p><blockquote><p>ä¹Ÿå°±æ„å‘³ç€ï¼Œä»…ä»…é äºŒçº§ç´¢å¼•æ— æ³•æ‹¿åˆ°å®Œæ•´è¡Œæ•°æ®ï¼Œåªèƒ½æ‹¿åˆ° <code>id</code> ä¿¡æ¯</p></blockquote><p>å‡è®¾ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»é”®åˆ—ä¸º <code>id</code> çš„è¡¨ï¼Œè¡¨ä¸­æœ‰å­—æ®µ <code>k</code>ï¼Œ<code>k</code> ä¸Šæœ‰ç´¢å¼•ã€‚</p><p>æˆ‘ä»¬æ‰§è¡Œä¸€æ¡ä¸»é”®æŸ¥è¯¢è¯­å¥ <code>select * from T where id = 100</code>ï¼Œåªéœ€è¦æœç´¢ <code>id</code> èšç°‡ç´¢å¼•æ ‘å°±èƒ½æŸ¥è¯¢æ•´è¡Œæ•°æ®ã€‚</p><p>æ¥ç€å†æ‰§è¡Œä¸€æ¡ <code>select * from T where k = 1</code>ï¼Œæ­¤æ—¶è¦æœç´¢ <code>k</code> çš„äºŒçº§ç´¢å¼•æ ‘ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>åœ¨ <code>k</code> ç´¢å¼•æ ‘ä¸Šæ‰¾ <code>k = 1</code> çš„è®°å½•ï¼Œå–å¾— <code>id = 100</code></li><li>å†åˆ°èšç°‡ç´¢å¼•æ ‘æŸ¥ <code>id = 100</code> å¯¹åº”çš„è¡Œæ•°æ®</li><li>å›åˆ° <code>k</code> ç´¢å¼•æ ‘å–ä¸‹ä¸€ä¸ªå€¼ <code>k = 2</code>ï¼Œä¸æ»¡è¶³æ¡ä»¶ï¼Œå¾ªç¯ç»“æŸ</li></ul><p>ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œå›åˆ°èšç°‡ç´¢å¼•æ ‘æœç´¢çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸º <strong>å›è¡¨</strong>ã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºäºäºŒçº§ç´¢å¼•çš„æŸ¥è¯¢éœ€è¦å¤šæ‰«æä¸€æ£µèšç°‡ç´¢å¼•æ ‘ï¼Œå› æ­¤åœ¨å¼€å‘ä¸­å°½é‡ä½¿ç”¨ä¸»é”®æŸ¥è¯¢</p></blockquote><p>å¯æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦ä½¿ç”¨äºŒçº§ç´¢å¼•æŸ¥è¯¢ï¼Œæœ‰æ²¡æœ‰åŠæ³•é¿å…å›è¡¨å‘¢ï¼Ÿ</p><p>åŠæ³•æ˜¯æœ‰çš„ï¼Œä½†éœ€è¦ç»“åˆä¸šåŠ¡åœºæ™¯æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚æœ¬æ¬¡æŸ¥è¯¢åªè¿”å› <code>id</code> å€¼ï¼ŒæŸ¥è¯¢è¯­å¥å¯ä»¥è¿™æ ·å†™ <code>select id from T where k = 1</code>ï¼Œè¿‡ç¨‹å¦‚ä¸‹</p><ul><li>åœ¨ <code>k</code> ç´¢å¼•æ ‘ä¸Šæ‰¾ <code>k = 1</code> çš„è®°å½•ï¼Œå–å¾— <code>id = 100</code></li><li>è¿”å› <code>id</code> å€¼</li><li>å›åˆ° <code>k</code> ç´¢å¼•æ ‘å–ä¸‹ä¸€ä¸ªå€¼ <code>k = 2</code>ï¼Œä¸æ»¡è¶³æ¡ä»¶ï¼Œå¾ªç¯ç»“æŸ</li></ul><p>åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œç´¢å¼• <code>k</code> å·²ç»è¦†ç›–äº†æˆ‘ä»¬çš„æŸ¥è¯¢éœ€æ±‚ï¼Œä¸éœ€è¦å›è¡¨ï¼Œè¿™ä¸ªæ“ä½œç§°ä¸º<strong>è¦†ç›–ç´¢å¼•</strong>ã€‚</p><blockquote><p>ç”±äºè¦†ç›–ç´¢å¼•å¯ä»¥å‡å°‘æ ‘çš„æœç´¢æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œæ‰€ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ</p></blockquote><p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªé«˜é¢‘çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ ¹æ® <code>k</code> æŸ¥è¯¢ï¼Œè¿”å› <code>name</code>ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ <code>k</code> ç´¢å¼•å˜æ›´æˆ <code>k</code> ä¸ <code>name</code> çš„è”åˆç´¢å¼•ã€‚</p><p><a href="https://mp.weixin.qq.com/s/yaza2iQ93BCvOW-uduS-yw" target="_blank" rel="noopener noreferrer">InnoDBåŸç†ç¯‡ï¼šå¦‚ä½•ç”¨å¥½ç´¢å¼•</a></p><p><a href="https://mp.weixin.qq.com/s?__biz=MzAwMDg2OTAxNg==&amp;mid=2652055534&amp;idx=1&amp;sn=6bce05f55b7a290a16e71d3885bfbaf0&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">InnoDBåŸç†ç¯‡ï¼šèŠèŠæ•°æ®é¡µå˜æˆç´¢å¼•è¿™ä»¶äº‹</a></p><p>ğŸ“’ ä¸€åˆ†é’Ÿçœ‹æ‡‚TCPç²˜åŒ…æ‹†åŒ…</p><p>TCP æ˜¯ä¸€ä¸ªé¢å‘ã€Œæµã€çš„åè®®ï¼Œæ‰€è°“æµå°±æ˜¯æ²¡æœ‰ç•Œé™çš„ä¸€é•¿ä¸²äºŒè¿›åˆ¶æ•°æ®ã€‚åœ¨å®é™…çš„ä¼ è¾“è¿‡ç¨‹ä¸­ï¼ŒTCP ä¼šæ ¹æ®ç½‘ç»œæƒ…å†µå°†æ•°æ®åŒ…è¿›è¡Œæ‹†åˆ†æˆ–è€…æ‹¼è£…ï¼Œå¦‚æœä¸šåŠ¡æ²¡æœ‰å®šä¹‰ä¸€ä¸ªæ˜ç¡®çš„ç•Œé™è§„åˆ™ï¼Œåœ¨åº”ç”¨å±‚çš„ä¸šåŠ¡ä¸Šå°±ä¼šå‡ºç°ç²˜åŒ…æ‹†åŒ…çš„ç°è±¡ã€‚</p><p>é’ˆå¯¹ TCP ç²˜åŒ…æ‹†åŒ…çš„ç°è±¡ï¼Œå¸¸è§çš„è§£å†³æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li>å‘é€ç«¯ç»™æ¯ä¸ªæ•°æ®åŒ… <strong>æ·»åŠ åŒ…é¦–éƒ¨</strong>ã€‚</li><li>å‘é€ç«¯å°†æ¯ä¸ªæ•°æ®åŒ… <strong>å°è£…ä¸ºå›ºå®šé•¿åº¦</strong>ã€‚</li><li>å¯ä»¥åœ¨æ•°æ®åŒ…ä¹‹é—´ <strong>è®¾ç½®è¾¹ç•Œ</strong>ã€‚</li></ol><p>ä¸ºäº†è§£å†³ç²˜åŒ…æ‹†åŒ…ï¼ŒNetty æ¡†æ¶ä¹Ÿæä¾›äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„ç¼–è§£ç å™¨ï¼Œæå¤§ç®€åŒ–ç½‘ç»œç¼–ç¨‹è§£å†³æ­¤ç±»é—®é¢˜çš„éš¾åº¦ã€‚</p><p><a href="https://mp.weixin.qq.com/s/5lfw37ElEwG8aTeJvPbdeg" target="_blank" rel="noopener noreferrer">ä¸€åˆ†é’Ÿçœ‹æ‡‚TCPç²˜åŒ…æ‹†åŒ…</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7091486488201805861" target="_blank" rel="noopener noreferrer">ä»€ä¹ˆæ˜¯æœ‰åŒºåˆ†åº¦çš„å¥½çš„é¢è¯•é—®é¢˜ï¼Œæ¥çœ‹çœ‹å­—èŠ‚è·³åŠ¨è¿™é“å®ç°å¼‚æ­¥ sum çš„é—®é¢˜</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7091492741678366734" target="_blank" rel="noopener noreferrer">ã€å‰ç«¯éƒ¨ç½²ç¬¬ä¸‰ç¯‡ã€‘é€šè¿‡ docker å­¦ä¹  nginx é…ç½®ï¼ŒåŠåŸºäº nginx éƒ¨ç½²æœ€ç®€å‰ç«¯é¡¹ç›®</a></p><p>ğŸ“’ ä½¿ç”¨ CRA æ­å»º React + TS é¡¹ç›®</p><p><a href="https://juejin.cn/post/7087811040591675428" target="_blank" rel="noopener noreferrer">éƒ½ 2022 å¹´äº†ï¼Œæ‰‹åŠ¨æ­å»º React å¼€å‘ç¯å¢ƒå¾ˆéš¾å—</a></p><p><a href="https://juejin.cn/post/7039583726375796749" target="_blank" rel="noopener noreferrer">ä¼šå†™ TypeScript ä½†ä½ çœŸçš„ä¼š TS ç¼–è¯‘é…ç½®å—</a></p><p><a href="https://juejin.cn/post/7071066976830881823" target="_blank" rel="noopener noreferrer">ç”¨ Redux åšçŠ¶æ€ç®¡ç†ï¼ŒçœŸçš„å¾ˆç®€å•ğŸ¦†</a></p><p><a href="https://juejin.cn/post/7069555976717729805" target="_blank" rel="noopener noreferrer">ã€ŒReactè¿›é˜¶ã€react-router v6 é€šå…³æŒ‡å—</a></p><p>ğŸ“’ Usage With TypeScript - Redux Toolkit</p><p><a href="https://redux-toolkit.js.org/usage/usage-with-typescript" target="_blank" rel="noopener noreferrer">https://redux-toolkit.js.org/usage/usage-with-typescript</a></p><p>ğŸ“’ å…¨å±€çŠ¶æ€å’ŒçŠ¶æ€ç®¡ç†çš„åŒºåˆ«</p><p>å…¨å±€çŠ¶æ€å¯ä»¥å¾ˆç®€å•ï¼Œä¾‹å¦‚åªè¦ä¸€ä¸ª JS å¯¹è±¡ <code>{}</code> å°±å¯ä»¥å®ç°ï¼Œä½†æ˜¯å¦‚æœå°è¯•ä¿®æ”¹å…¨å±€çŠ¶æ€çš„å€¼ï¼Œæ— æ³•è§¦å‘ç»„ä»¶æ›´æ–°ã€‚</p><p>çŠ¶æ€ç®¡ç†ï¼Œé™¤äº†å…·æœ‰å…¨å±€çŠ¶æ€çš„åŠŸèƒ½ï¼Œè¿˜æä¾›äº†ä¸€å¥—å‘å¸ƒè®¢é˜…æœºåˆ¶ï¼Œå³çŠ¶æ€æ”¹å˜çš„æ—¶å€™é€šçŸ¥å¯¹åº”ç»„ä»¶æ›´æ–°ã€‚</p><p>Redux æœ¬èº«å…¶å®å°±æ˜¯å…¨å±€çŠ¶æ€ï¼Œä¸ºäº†å®ç°çŠ¶æ€æ”¹å˜é€šçŸ¥ç»„ä»¶æ›´æ–°ï¼Œè¿˜éœ€è¦ä¸€ä¸ª UI-bindingï¼Œå³ React-reduxã€‚</p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/m_znGU_NaxveZi0Q5LSvyA" target="_blank" rel="noopener noreferrer">æµ…è°ˆV8åƒåœ¾å›æ”¶æœºåˆ¶</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/5HqfRGqPyAhFt0krPgMHOQ" target="_blank" rel="noopener noreferrer">æ‰“é€  Go è¯­è¨€æœ€å¿«çš„æ’åºç®—æ³•</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7091177467498463239" target="_blank" rel="noopener noreferrer">å®ç°ä¸€ä¸ª Codepenï¼šï¼ˆäºŒï¼‰åœ¨ Next.js ä¸­ä½¿ç”¨ Monaco Editor</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7091079487592333349" target="_blank" rel="noopener noreferrer">ã€æ¶æ„å¸ˆï¼ˆç¬¬åå…«ç¯‡ï¼‰ã€‘è„šæ‰‹æ¶ä¹‹é¡¹ç›®æ¨¡æ¿çš„å®‰è£…</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7091103648100384804" target="_blank" rel="noopener noreferrer">ã€å‰ç«¯éƒ¨ç½²ç¬¬äºŒç¯‡ã€‘åŸºäº docker/compose éƒ¨ç½²ä¸€ä¸ªæœ€ç®€å•çš„å‰ç«¯é¡¹ç›®</a></p><p>ğŸ“’ 7 æ®µå°ä»£ç ï¼Œç©è½¬Javaç¨‹åºå¸¸è§çš„å´©æºƒåœºæ™¯</p><p>å¦‚ä½•æ’æŸ¥ CPU é£™å‡é—®é¢˜ï¼Œè·å–é—®é¢˜ä»£ç é€šå¸¸å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨ top å‘½ä»¤ï¼ŒæŸ¥æ‰¾åˆ°ä½¿ç”¨ CPU æœ€å¤šçš„æŸä¸ªè¿›ç¨‹ï¼Œè®°å½•å®ƒçš„ pidã€‚ä½¿ç”¨ Shift + P å¿«æ·é”®å¯ä»¥æŒ‰ CPU çš„ä½¿ç”¨ç‡è¿›è¡Œæ’åº</li><li>å†æ¬¡ä½¿ç”¨ top å‘½ä»¤ï¼ŒåŠ  -H å‚æ•°ï¼ŒæŸ¥çœ‹æŸä¸ªè¿›ç¨‹ä¸­ä½¿ç”¨ CPU æœ€å¤šçš„æŸä¸ªçº¿ç¨‹ï¼Œè®°å½•çº¿ç¨‹çš„ ID</li><li>ä½¿ç”¨ printf å‡½æ•°ï¼Œå°†åè¿›åˆ¶çš„ tid è½¬åŒ–æˆåå…­è¿›åˆ¶</li><li>ä½¿ç”¨ jstack å‘½ä»¤ï¼ŒæŸ¥çœ‹ Java è¿›ç¨‹çš„çº¿ç¨‹æ ˆ</li><li>ä½¿ç”¨ less å‘½ä»¤æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶ï¼Œå¹¶æŸ¥æ‰¾åˆšæ‰è½¬åŒ–çš„åå…­è¿›åˆ¶ tidï¼Œæ‰¾åˆ°å‘ç”Ÿé—®é¢˜çš„çº¿ç¨‹ä¸Šä¸‹æ–‡</li></ol><p><a href="https://mp.weixin.qq.com/s/YcyC1Jm4H7uGvSg3rCkDig" target="_blank" rel="noopener noreferrer">7 æ®µå°ä»£ç ï¼Œç©è½¬Javaç¨‹åºå¸¸è§çš„å´©æºƒåœºæ™¯</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/ZralWEfG2WJfZ-G-x9biow" target="_blank" rel="noopener noreferrer">çœ‹å®Œè¿™ç¯‡ä½ ä¸€å®šèƒ½æŒæ¡Linux</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/SHbt1jmgGaHQs1eeyJQ-qA" target="_blank" rel="noopener noreferrer">ObjectMapperï¼Œåˆ«å†åƒä¸ªäºŒè´§ä¸€æ ·ä¸€ç›´newäº†</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/bYtTRjqQylYKO9D1jbadSA" target="_blank" rel="noopener noreferrer">[<!-- -->ç§‘æ™®<!-- -->]<!-- --> Service Worker å…¥é—¨æŒ‡å—</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7065693195799265287" target="_blank" rel="noopener noreferrer">ç™¾è¡Œä»£ç å¸¦ä½ å®ç°é€šè¿‡872æ¡Promise/A+ç”¨ä¾‹çš„Promise</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/kpi82Rb66bUQuA_G0hrqBw" target="_blank" rel="noopener noreferrer">å‰ç«¯å†å²é¡¹ç›®çš„ Vite è¿ç§»å®è·µæ€»ç»“</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7090686619253997599" target="_blank" rel="noopener noreferrer">æ‰‹å†™ css-modules æ¥æ·±å…¥ç†è§£å®ƒçš„åŸç†</a></p><p>ğŸ“’ åœ¨ Webpack 5 ä¸­å¼€å¯æ‡’ç¼–è¯‘ï¼ˆLazy Compilationï¼‰</p><p>Webpack 5 çš„å®éªŒç‰¹æ€§ï¼Œå¯ä»¥é’ˆå¯¹å¤šå…¥å£ï¼ˆInitial Chunkï¼‰å’ŒåŠ¨æ€åŠ è½½ï¼ˆAsync Chunkï¼‰è¿›è¡Œæ‡’ç¼–è¯‘ã€‚å¼€å¯æ‡’ç¼–è¯‘ä¹‹åï¼Œå¯ä»¥å®ç°æŒ‰éœ€ç¼–è¯‘ï¼Œæå‡å¯åŠ¨é€Ÿåº¦ï¼Œè‹¥å†é…åˆ Webpack 5 æŒä¹…åŒ–ç¼“å­˜ï¼Œåˆ™å¯ä»¥ç›´æ¥ç§’æ€ Viteã€‚</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// â€¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">experiments</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">lazyCompilation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">imports</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">entries</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>ç”±äºå®éªŒç‰¹æ€§å…·æœ‰ç›¸å¯¹å®½æ¾çš„è¯­ä¹‰ç‰ˆæœ¬ï¼Œå¯èƒ½ä¼šæœ‰é‡å¤§çš„å˜æ›´ï¼Œæ‰€ä»¥ä½ éœ€è¦é”å®š Webpack çš„å°ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ <code>&quot;webpack&quot;: &quot;~5.4.3&quot;</code>ï¼Œæˆ–è€…é”å®šç‰ˆæœ¬å·</p></blockquote><p><a href="https://juejin.cn/post/7090372816784064526" target="_blank" rel="noopener noreferrer">åœ¨ Webpack 5 ä¸­å¼€å¯æ‡’ç¼–è¯‘ï¼ˆLazy Compilationï¼‰</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/Ba-3fMQXNXqIzVTjVUrWtQ" target="_blank" rel="noopener noreferrer">æµ…è°ˆæ–‡æ¡£çš„å®æ—¶ååŒç¼–è¾‘</a></p><p>ğŸ“’ è…¾è®¯ä¸€é¢ï¼šCORSä¸ºä»€ä¹ˆèƒ½ä¿éšœå®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆåªå¯¹å¤æ‚è¯·æ±‚åšé¢„æ£€</p><p>é¦–å…ˆä¸ºä»€ä¹ˆè¦æœ‰åŒæºç­–ç•¥ï¼Ÿæµè§ˆå™¨éœ€è¦è®°ä½ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼ˆå³ç™»å½•å‡­è¯ï¼‰ï¼Œè¿™æ ·ç”¨æˆ·ä¸‹æ¬¡è®¿é—®é¡µé¢å°±æ— éœ€é‡å¤ç™»å½•ã€‚è¿™æ ·çš„è¯ï¼Œå°±éœ€è¦æœ‰ä¸€äº›å®‰å…¨ç­–ç•¥ï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç° CSRF æ”»å‡»ç­‰é—®é¢˜ã€‚å¦‚æœæ˜¯å…¶ä»–çš„ http client åˆ™æ²¡æœ‰åŒæºç­–ç•¥ã€‚</p><blockquote><p>CORSç­–ç•¥çš„å¿ƒæ™ºæ¨¡å‹æ˜¯ï¼šæ‰€æœ‰è·¨åŸŸè¯·æ±‚éƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œæµè§ˆå™¨è¦å¸¦ä¸Šæ¥æºç»™æœåŠ¡å™¨æ£€éªŒ</p></blockquote><p>åŒæºç­–ç•¥ä¼šé™åˆ¶å“ªäº›è¡Œä¸ºï¼š</p><ul><li>è·¨åŸŸæƒ…å†µä¸‹è·å– DOM å…ƒç´ ï¼ˆä¾‹å¦‚è·¨åŸŸçš„ <code>iframe</code>ï¼‰ã€localStorageã€Cookie ç­‰</li><li>è·¨åŸŸæƒ…å†µä¸‹å‘é€ ajax è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæ‹’ç»è§£æå“åº”æŠ¥æ–‡</li></ul><blockquote><p>æ³¨æ„ï¼Œæµè§ˆå™¨é»˜è®¤çš„è¡¨å•æäº¤ä¸å—åŒæºç­–ç•¥é™åˆ¶</p></blockquote><p>CORS å³è·¨åŸŸèµ„æºå…±äº«ï¼Œè¿™é‡Œæ³¨æ„ CORS çš„ç›®çš„ä¸æ˜¯æ‹¦æˆªè¯·æ±‚ï¼Œåå€’æ˜¯ä¸ºäº†è®©å…¶èƒ½æ­£å¸¸è¯·æ±‚ã€‚CORS çš„è¯ç”ŸèƒŒæ™¯å°±æ˜¯åŒæºç­–ç•¥ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å½“ä¸¥è‹›çš„è§„å®šï¼Œå®ƒç¦æ­¢äº†è·¨åŸŸçš„AJAXè¯·æ±‚ã€‚ä½†å®é™…çš„å¼€å‘ä¸­åˆæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œäºæ˜¯å¼€ä¸€ä¸ªå£å­â€”â€”åªè¦é…ç½®äº†CORSçš„å¯¹åº”è§„åˆ™ï¼Œè·¨åŸŸè¯·æ±‚å°±èƒ½æ­£å¸¸è¿›è¡Œã€‚</p><p>å¦‚ä½•é…ç½® CORSï¼Ÿå‰ç«¯åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´æ·»åŠ  <code>Origin</code> å­—æ®µï¼Œè¿™æ ·åç«¯å°±èƒ½çŸ¥é“è¯·æ±‚çš„æ¥æºï¼Œç„¶ååç«¯åœ¨å“åº”å¤´æ·»åŠ  <code>Access-Control-Allow-Origin</code>ï¼Œè¿™ä¸ªå€¼å°±æ˜¯å‰ç«¯å‘é€çš„æ¥æºåœ°å€ï¼ˆæˆ–è€…ç›´æ¥åŠ  <code>*</code> è¡¨ç¤ºå…è®¸æ‰€æœ‰åœ°å€ï¼‰ã€‚</p><p>è·¨åŸŸè¯·æ±‚çš„æµç¨‹ï¼ŒCORSæŠŠè¯·æ±‚åˆ†æˆç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚ï¼Œåˆ’åˆ†çš„ä¾æ®æ˜¯â€œæ˜¯å¦ä¼šäº§ç”Ÿå‰¯ä½œç”¨â€ã€‚åŒæ—¶æ»¡è¶³ä¸‹é¢è¿™ä¸¤ä¸ªæ¡ä»¶çš„æ˜¯ <strong>ç®€å•è¯·æ±‚</strong>ï¼Œå¦åˆ™å°±æ˜¯ <strong>éç®€å•è¯·æ±‚</strong>ï¼š</p><ul><li>è¯·æ±‚æ–¹æ³•æ˜¯ HEAD/GET/POST</li><li>è¯·æ±‚ä½“çš„ Conent-Type åªèƒ½æ˜¯ <code>form-urlencoded</code>ã€<code>form-data</code>ã€<code>text/plain</code></li></ul><p>å¯¹äºç®€å•è¯·æ±‚ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œå¹¶ä¸”è‡ªåŠ¨åŠ ä¸Šè¯·æ±‚çš„æ¥æº <code>origin</code> ç»™æœåŠ¡å™¨æ£€æŸ¥ï¼›</li><li>æœåŠ¡å™¨è¿”å›æ•°æ®ï¼Œå¹¶è¿”å›æ£€æŸ¥ç»“æœï¼Œé…ç½®CORSå“åº”å¤´ï¼›</li><li>æµè§ˆå™¨æ£€æŸ¥CORSå“åº”å¤´ï¼Œå¦‚æœåŒ…å«äº†å½“å‰çš„æºåˆ™æ”¾è¡Œï¼Œåä¹‹æ‹¦æˆªï¼›</li></ol><blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œæµè§ˆå™¨æ˜¯æ‹¦æˆªå“åº”ï¼Œè€Œä¸æ˜¯æ‹¦æˆªè¯·æ±‚ï¼Œè·¨åŸŸè¯·æ±‚æ˜¯å‘å‡ºå»çš„ï¼Œå¹¶ä¸”æœåŠ¡ç«¯åšäº†å“åº”ï¼Œåªæ˜¯æµè§ˆå™¨æ‹¦æˆªäº†ä¸‹æ¥</p></blockquote><p>å¯¹äºå¤æ‚è¯·æ±‚ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æµè§ˆå™¨å‘èµ·é¢„æ£€è¯·æ±‚ï¼Œå¸¦ä¸Šè¯·æ±‚çš„æ¥æº <code>origin</code>ï¼Œä¸åŒ…å«è¯·æ±‚ä½“ï¼›</li><li>æœåŠ¡å™¨è¿”å›æ£€æŸ¥ç»“æœï¼Œé…ç½®CORSå¤´ï¼›</li><li>æµè§ˆå™¨å‘èµ·çœŸæ­£è¯·æ±‚ï¼›</li><li>æµè§ˆå™¨è¿”å›æ•°æ®ï¼›</li></ol><blockquote><p>æµè§ˆå™¨ä¼šæ£€æŸ¥ç¬¬2æ­¥ä¸­æ‹¿åˆ°çš„CORSå¤´ï¼Œå¦‚æœæ²¡æœ‰åŒ…å«å½“å‰çš„æºï¼Œåç»­çš„ç¬¬3ã€4æ­¥éƒ½ä¸ä¼šè¿›è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šå‘èµ·çœŸæ­£è¯·æ±‚</p></blockquote><p>ä¸ºä»€ä¹ˆåªå¯¹å¤æ‚è¯·æ±‚åšé¢„æ£€ï¼Ÿä¸Šæ–‡æåˆ°ï¼Œåˆ’åˆ†ç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚çš„ä¾æ®æ˜¯â€œæ˜¯å¦äº§ç”Ÿå‰¯ä½œç”¨â€ã€‚è¿™é‡Œçš„å‰¯ä½œç”¨æŒ‡å¯¹ <strong>æ•°æ®åº“åšå‡ºä¿®æ”¹</strong>ï¼šä½¿ç”¨GETè¯·æ±‚è·å–æ–°é—»åˆ—è¡¨ï¼Œæ•°æ®åº“ä¸­çš„è®°å½•ä¸ä¼šåšå‡ºæ”¹å˜ï¼Œè€Œä½¿ç”¨PUTè¯·æ±‚å»ä¿®æ”¹ä¸€æ¡è®°å½•ï¼Œæ•°æ®åº“ä¸­çš„è®°å½•å°±å‘ç”Ÿäº†æ”¹å˜ã€‚</p><p>å‡è®¾ç½‘ç«™è¢«CSRFæ”»å‡»äº†â€”â€”é»‘å®¢ç½‘ç«™å‘é“¶è¡Œçš„æœåŠ¡å™¨å‘èµ·è·¨åŸŸè¯·æ±‚ï¼Œå¹¶ä¸”è¿™ä¸ªé“¶è¡Œçš„å®‰å…¨æ„è¯†å¾ˆå¼±ï¼Œåªè¦æœ‰ç™»å½•å‡­è¯cookieå°±å¯ä»¥æˆåŠŸå“åº”ï¼Œè€ƒè™‘ä¸‹é¢ä¸¤ç§æƒ…å†µï¼š</p><ul><li>é»‘å®¢ç½‘ç«™å‘èµ·ä¸€ä¸ªGETè¯·æ±‚ï¼Œç›®çš„æ˜¯æŸ¥çœ‹å—å®³ç”¨æˆ·æœ¬æœˆçš„è´¦å•ã€‚é“¶è¡Œçš„æœåŠ¡å™¨ä¼šè¿”å›æ­£ç¡®çš„æ•°æ®ï¼Œä¸è¿‡å½±å“å¹¶ä¸å¤§ï¼Œè€Œä¸”ç”±äºæµè§ˆå™¨çš„æ‹¦æˆªï¼Œæœ€åé»‘å®¢ä¹Ÿæ²¡æœ‰æ‹¿åˆ°è¿™ä»½æ•°æ®ï¼›</li><li>é»‘å®¢ç½‘ç«™å‘èµ·ä¸€ä¸ªPUTè¯·æ±‚ï¼Œç›®çš„æ˜¯æŠŠå—å®³ç”¨æˆ·çš„è´¦æˆ·ä½™é¢æ¸…é›¶ã€‚æµè§ˆå™¨ä¼šé¦–å…ˆåšä¸€æ¬¡é¢„æ£€ï¼Œå‘ç°æ”¶åˆ°çš„å“åº”å¹¶æ²¡æœ‰å¸¦ä¸ŠCORSå“åº”å¤´ï¼Œäºæ˜¯çœŸæ­£çš„PUTè¯·æ±‚ä¸ä¼šå‘å‡ºï¼›</li></ul><p>å¹¸å¥½æœ‰é¢„æ£€æœºåˆ¶ï¼Œå¦åˆ™PUTè¯·æ±‚ä¸€æ—¦å‘å‡ºï¼Œé»‘å®¢çš„æ”»å‡»å°±æˆåŠŸäº†ã€‚</p><blockquote><p>è¿™ç§æƒ…å†µä¸‹ï¼Œåç«¯ä¹Ÿéœ€è¦éµå¾ª RESTful è§„èŒƒï¼Œå¦åˆ™è¦ä¹ˆé¢ä¸´æ”»å‡»é£é™©ï¼Œè¦ä¹ˆä¼šå¤šå‘ä¸€æ¬¡é¢„æ£€è¯·æ±‚</p></blockquote><p><a href="https://juejin.cn/post/7081539471585312805" target="_blank" rel="noopener noreferrer">è…¾è®¯ä¸€é¢ï¼šCORSä¸ºä»€ä¹ˆèƒ½ä¿éšœå®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆåªå¯¹å¤æ‚è¯·æ±‚åšé¢„æ£€</a></p><p><a href="https://juejin.cn/post/7087206796351242248" target="_blank" rel="noopener noreferrer">è…¾è®¯ä¸‰é¢ï¼šCookieçš„SameSiteäº†è§£å§ï¼Œé‚£SamePartyå‘¢</a></p><p>ğŸ“’ Axios ä¸‰ä¸ªä¼˜ç‚¹</p><ul><li>Promisify</li><li>è´£ä»»é“¾ï¼ˆæ‹¦æˆªå™¨æœºåˆ¶ï¼‰</li><li>é€‚é…å™¨ï¼ˆåŒæ—¶æ”¯æŒæµè§ˆå™¨å’Œ node ç¯å¢ƒï¼‰</li></ul><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/_gDIO6YCswAS2dICllMG0A" target="_blank" rel="noopener noreferrer">æ·±å…¥ç†è§£ Promise ä¹‹æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ç‰ˆ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/ckskF06PD43KHpKAGaYmRA" target="_blank" rel="noopener noreferrer">2022 å¹´ JavaScript å¼€å‘å·¥å…·çš„ç”Ÿæ€</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/-WHafu5z-Ap4tjrbWesnmA" target="_blank" rel="noopener noreferrer">è‡ªåŠ¨åŒ–ç”Ÿæˆéª¨æ¶å±çš„æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ä¸è½åœ°</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/4æœˆ24æ—¥å†…å®¹æ±‡æ€»">4æœˆ24æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-24T00:00:00.000Z" itemprop="datePublished">April 24, 2022</time> Â· <!-- -->14 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ Ubuntu 22.04 LTS å®‰è£…</p><p><a href="https://phoenixnap.com/kb/ubuntu-22-04-lts" target="_blank" rel="noopener noreferrer">https://phoenixnap.com/kb/ubuntu-22-04-lts</a></p><p><a href="https://releases.ubuntu.com/jammy/" target="_blank" rel="noopener noreferrer">https://releases.ubuntu.com/jammy/</a></p><p>ğŸ“’ è®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Š â€” JavaScript ç‰ˆ</p><p>è¿™æœ¬ç”±éº»çœç†å·¥å­¦é™¢å‡ºç‰ˆçš„è‘—ä½œç»ˆäºæœ‰äº† JavaScript è¯­è¨€ç‰ˆæœ¬ï¼Œå¯ä»¥å¸®åŠ©ä½ å»ºç«‹å¯¹è®¡ç®—æœºç¨‹åºçš„å¿ƒæ™ºæ¨¡å‹ã€‚</p><blockquote><p><a href="https://github.com/source-academy/sicp" target="_blank" rel="noopener noreferrer">https://github.com/source-academy/sicp</a></p></blockquote><p>ğŸ“’ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Redux Toolkit</p><p>Redux å®˜æ–¹å‘å¸ƒçš„è¿™ç¯‡åšå®¢è®²è§£äº† Redux Toolkit çš„ Why å’Œ Howï¼Œå¹¶å¼ºçƒˆæ¨èä½¿ç”¨ã€‚</p><p>ä¸€å¥è¯æ€»ç»“ï¼šRedux Toolkit æ˜¯ä½¿ç”¨ Redux çš„æœ€ä½³å®è·µã€‚</p><blockquote><p><a href="https://redux.js.org/introduction/why-rtk-is-redux-today" target="_blank" rel="noopener noreferrer">https://redux.js.org/introduction/why-rtk-is-redux-today</a></p></blockquote><p>â­ï¸ <a href="https://zhuanlan.zhihu.com/p/502951532" target="_blank" rel="noopener noreferrer">Node.js 18 æ–°ç‰¹æ€§è§£è¯»</a></p><p>ğŸ“’ <a href="https://zhuanlan.zhihu.com/p/415361629" target="_blank" rel="noopener noreferrer">é‚£äº›ä½ åº”è¯¥è¯´å†è§çš„ npm ç¥–ä¼ è€åº“</a></p><p>ğŸ“’ å¦‚ä½•å®ç°æ•°ç»„è½¬å¯¹è±¡</p><p>ä¼ å…¥ä¸€ä¸ª <code>paramKeys</code> æ•°ç»„ï¼Œè·å– query å‚æ•°çš„å€¼ï¼Œç„¶åä»¥å¯¹è±¡å½¢å¼è¿”å›ï¼Œä½¿ç”¨ <code>reduce</code> æ–¹æ³•ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">paramKeys</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> searchParams </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">search</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> paramKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">reduce</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name maybe-class-name">Record</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accu</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> searchParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> accu</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> searchParams </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;age&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šæµç¨‹è¿˜å¯ä»¥å°è£…æˆè‡ªå®šä¹‰ hookï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">paramKeys</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">search</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> searchParams </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> paramKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">reduce</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name maybe-class-name">Record</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accu</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> searchParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> accu</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">paramKeys</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> query</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>çœ‹äº† antfu å¤§ä½¬çš„ä»£ç ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>Object.fromEntries()</code> æ–¹æ³•ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">paramKeys</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> searchParams </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">search</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fromEntries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    paramKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> searchParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ³¨æ„ï¼š<code>Object.fromEntries()</code> æ˜¯ ES2019 ä¸­çš„è¯­æ³•ï¼Œå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ˆChrome &gt;= 73ï¼‰ï¼Œä¸è¿‡åªè¦æ­£ç¡®é…ç½® polyfill å°±å¯ä»¥æ”¾å¿ƒä½¿ç”¨</p></blockquote><p>ğŸ“’ ä½¿ç”¨ <code>defineConfig</code> çº¦æŸé…ç½®å¯¹è±¡</p><p>åœ¨é¡¹ç›®ä¸­ç»å¸¸éœ€è¦ç”¨åˆ°é…ç½®å¯¹è±¡ï¼Œä¾‹å¦‚ Webpackã€rollup çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ TS æ¥çº¦æŸé…ç½®å¯¹è±¡çš„ API schemaï¼Œå‘ŠçŸ¥ç”¨æˆ·åº”è¯¥ä¼ å“ªäº›å­—æ®µä»¥åŠå¯¹åº”çš„ç±»å‹ï¼Œè¿™æ ·æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p><ul><li>å¯¹ç”¨æˆ·æ›´åŠ å‹å¥½ï¼Œä¸éœ€è¦çœ‹æ–‡æ¡£å°±èƒ½ç›´æ¥ä¸Šæ‰‹</li><li>åœ¨å¼€å‘é˜¶æ®µå°±èƒ½æå‰æ£€æŸ¥å‡ºé…ç½®é¡¹é”™è¯¯ï¼Œä¸ç”¨åˆ°è¿è¡Œé˜¶æ®µå†å»æ ¡éªŒäº†</li></ul><p>ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éœ€è¦å¯¼å‡ºä¸€ä¸ªæ¥å£ç±»å‹ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IConfig</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sex</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”¨æˆ·åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å¯¼å…¥ç±»å‹ï¼Œç„¶åè‡ªå·±æ·»åŠ æ³¨è§£ï¼Œè¿™æ ·ç¼–å†™é…ç½®å¯¹è±¡å°±èƒ½å¾—åˆ°ç±»å‹æç¤ºäº†ï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">IConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxx&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">IConfig</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dbydm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½†æ˜¯è¿™æ ·å¯¹ç”¨æˆ·æ¥è¯´è¿˜æ˜¯å¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>defineConfig</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠæ¥æ”¶åˆ°çš„å‚æ•°åŸå°ä¸åŠ¨åœ°è¿”å›ï¼Œä½†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå°±å¯ä»¥å®ç°å‚æ•°ç±»å‹çš„æ ¡éªŒï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IConfig</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sex</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">IConfig</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”¨æˆ·åªéœ€å¯¼å…¥ <code>defineConfig</code> ç¼–å†™é…ç½®å°±å¯ä»¥å®ç°å‚æ•°ç±»å‹çš„æ ¡éªŒï¼š</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxx&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dbydm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/GG_zrQlaiP2nfPOxzx_j9w" target="_blank" rel="noopener noreferrer">Elasticsearch åŸºç¡€å…¥é—¨è¯¦æ–‡</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7086735198942920712" target="_blank" rel="noopener noreferrer">å¦‚ä½•æŠŠå‰ç«¯é¡¹ç›®å†™æˆä¸€åº§å±å±±</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/uxSoXkmi5KIGNPsyd5cXrA" target="_blank" rel="noopener noreferrer">æµ…è°ˆJSå†…å­˜æœºåˆ¶</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7087933643821154312" target="_blank" rel="noopener noreferrer">æ·±å…¥ç†è§£ scheduler åŸç†</a></p><p>ğŸ“’ å‰ç«¯æ¡†æ¶å¦‚ä½•å®ç°é¢„æ¸²æŸ“</p><p>é¦–å…ˆé¢„æ¸²æŸ“æ ¹æ®æ¸²æŸ“æ—¶æœºåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><ul><li>é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰ï¼Œæ„å»ºçš„æ—¶å€™è·å–æ•°æ®è¿›è¡Œæ¸²æŸ“ï¼Œæ•°æ®ä¸ä¸€å®šæ˜¯æœ€æ–°çš„</li><li>æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼Œç”¨æˆ·è®¿é—®çš„æ—¶å€™æœåŠ¡ç«¯è·å–æ•°æ®è¿›è¡Œæ¸²æŸ“ï¼Œæ•°æ®å®æ—¶è·å–</li></ul><blockquote><p>ä¸¤ç§æ¸²æŸ“æ–¹æ¡ˆéƒ½å¯ä»¥å®ç° <strong>é¦–å±æ€§èƒ½ä¼˜åŒ–</strong>ã€<strong>SEO ä¼˜åŒ–</strong>ï¼Œä¸åŒçš„æ˜¯ SSR éœ€è¦åœ¨æœåŠ¡ç«¯è¿è¡Œ JSï¼Œå¹¶ä¸”æ¯æ¬¡ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™éƒ½ä¼šè¿›è¡Œæ¸²æŸ“ï¼›SSG å·²ç»å°†æ¯ä¸ªé¡µé¢æ¸²æŸ“æˆé™æ€ htmlï¼Œå› æ­¤å¯ä»¥å°†èµ„æºæ‰˜ç®¡åˆ° CDN ä¸Š</p></blockquote><p>è·å–æ•°æ®åˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p><ul><li>æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè¯»å–</li><li>è°ƒæ¥å£è·å–</li><li>æŸ¥è¯¢æ•°æ®åº“è·å–</li></ul><p>å®é™…ä¸Šï¼ŒReact æœ¬èº«å·²ç»æä¾›äº†æœåŠ¡ç«¯æ¸²æŸ“å’Œé™æ€ç”Ÿæˆç›¸å…³çš„ APIã€‚åœ¨å‰ç«¯é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨ä¸‹é¢çš„ API æŒ‚è½½ React ç»„ä»¶ï¼š</p><div class="language-jsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-jsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">ReactDOM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸ºäº†å®ç° SSR æ¸²æŸ“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ API å°† React ç»„ä»¶ç›´æ¥æ¸²æŸ“ä¸º HTML å­—ç¬¦ä¸²ï¼š</p><div class="language-jsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-jsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">ReactDOMServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">renderToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨ <code>renderToString</code> æ–¹æ³•æ¸²æŸ“å‡ºçš„ HTML å­—ç¬¦ä¸²ä¼šå¸¦æœ‰ç‰¹å®šæ ‡è®°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ API åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ¿€æ´»ï¼Œå¯¹æ ‡è®°çš„èŠ‚ç‚¹æŒ‚è½½ç›¸åº”çš„äº‹ä»¶ç›‘å¬å™¨ï¼š</p><div class="language-jsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-jsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">ReactDOM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hydrate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ SSG æ¸²æŸ“ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ¿€æ´»ï¼Œå› æ­¤ä¸ç”¨åœ¨ HTML å­—ç¬¦ä¸²ä¸­æ·»åŠ æ ‡è®°ï¼Œåªéœ€æ¸²æŸ“å‡ºçº¯çš„ HTML å­—ç¬¦ä¸²ï¼š</p><div class="language-jsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-jsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">ReactDOMServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">renderToStaticMarkup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <a href="https://juejin.cn/post/6938385978004340744" target="_blank" rel="noopener noreferrer">2ä¸‡å­—ç³»ç»Ÿæ€»ç»“ï¼Œå¸¦ä½ å®ç° Linux å‘½ä»¤è‡ªç”±</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/ebCRE9RXB66X0pe4lsX0tg" target="_blank" rel="noopener noreferrer">è¿˜åœ¨æ‰‹æ’¸ Nginx é…ç½®ï¼Ÿè¯•è¯•è¿™æ¬¾å¯è§†åŒ–é…ç½®å·¥å…·å§ï¼ŒçœŸå¿ƒå¼ºå¤§</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/3aVYGfahv5rZJbWBhaI3BA" target="_blank" rel="noopener noreferrer">esnoï¼ŒåŸºäº Esbuild çš„ç¥å™¨</a></p><p>ğŸ“’ ã€ŒReactè¿›é˜¶ã€æ¢ä¸ªå§¿åŠ¿çœ‹ hooks ï¼ çµæ„Ÿæ¥æºç»„åˆå’ŒHOC æ¨¡å¼ä¸‹é€»è¾‘è§†å›¾åˆ†ç¦»æ–°åˆ›æ„</p><p><code>useMemo</code> ç±»ä¼¼ Vue ä¸­çš„è®¡ç®—å±æ€§ï¼Œå½“ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–ï¼Œä¼šé‡æ–°è®¡ç®—ã€‚ä½†å®é™…ä¸Š <code>useMemo</code> æ¯”è®¡ç®—å±æ€§æ›´å¼ºå¤§ï¼Œé™¤äº†ç¼“å­˜å€¼ä¹‹å¤–ï¼Œè¿˜èƒ½ç¼“å­˜ç»„ä»¶ï¼š</p><div class="language-jsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-jsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> value </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setNumber</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">useMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Test</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">setNumber</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">number </span><span class="token tag script language-javascript operator" style="color:#393A34">+</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript number" style="color:#36acaa">1</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">ç‚¹å‡» </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">number</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æœ‰æ—¶å€™åœ¨çˆ¶ç»„ä»¶å®šä¹‰çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œéœ€è¦ä½œä¸º prop ä¼ å…¥å­ç»„ä»¶ã€‚å¦‚æœçˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¼šå¯¼è‡´å‡½æ•°é‡æ–°ç”Ÿæˆï¼Œç›¸å½“äº prop å‘ç”Ÿå˜åŒ–ï¼Œå³ä½¿å­ç»„ä»¶å†…éƒ¨ä½¿ç”¨ <code>React.memo()</code> åŒ…è£¹ä¹Ÿä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚å¸¸è§„åšæ³•æ˜¯ä½¿ç”¨ <code>React.useCallback()</code> åŒ…è£¹äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä½†å®é™…ä¸Šç”¨ <code>React.useRef()</code> åŒ…è£¹ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œéƒ½æ˜¯æŠŠäº‹ä»¶å¤„ç†å‡½æ•°ç¼“å­˜åˆ° Fiber èŠ‚ç‚¹ä¸Šã€‚</p><div class="language-jsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-jsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onClickRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;666&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// const onClick = React.useCallback(() =&gt; {}, []);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Welcome to my app</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">MyButton</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">onClickRef</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">current</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://juejin.cn/post/7088829366490120205" target="_blank" rel="noopener noreferrer">ã€ŒReactè¿›é˜¶ã€æ¢ä¸ªå§¿åŠ¿çœ‹ hooks ï¼ çµæ„Ÿæ¥æºç»„åˆå’ŒHOC æ¨¡å¼ä¸‹é€»è¾‘è§†å›¾åˆ†ç¦»æ–°åˆ›æ„</a></p><p>ğŸ“’ React 18 å‡çº§è¸©å‘æ±‡æ€»</p><p><strong>1. React.StrictMode å¯¼è‡´æ‰€æœ‰ç»„ä»¶é‡å¤æŒ‚è½½ä¸¤æ¬¡</strong></p><p>ä½¿ç”¨ CRA 5.0.1 æ­å»º React é¡¹ç›®ï¼Œé»˜è®¤çš„é¡¹ç›®æ¨¡æ¿ä¸­ï¼Œæ ¹ç»„ä»¶ä½¿ç”¨äº† <code>React.StrictMode</code> åŒ…è£¹ï¼Œç»“æœå‡ºç°äº†æ‰€æœ‰ç»„ä»¶éƒ½é‡å¤æŒ‚è½½çš„æƒ…å†µï¼Œå¯¼è‡´ç»„ä»¶ä¸­æ¥å£è°ƒäº†ä¸¤æ¬¡ã€‚çœ‹äº†ä¸‹æ–‡æ¡£ï¼Œç¡®å®æ˜¯ React 18 ä¸­å¼•å…¥çš„ Breaking Changeï¼Œå¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¼šå¯¼è‡´æ‰€æœ‰ç»„ä»¶é‡å¤æŒ‚è½½ä¸¤æ¬¡ï¼ˆå³ä½¿ç”¨äº† <code>React.memo</code> ä¹Ÿä¼šé‡å¤æŒ‚è½½ï¼‰ï¼š</p><blockquote><p>Stricter Strict Mode: In the future, React will provide a feature that lets components preserve state between unmounts. To prepare for it, React 18 introduces a new development-only check to Strict Mode. React will automatically unmount and remount every component, whenever a component mounts for the first time, restoring the previous state on the second mount. If this breaks your app, consider removing Strict Mode until you can fix the components to be resilient to remounting with existing state</p></blockquote><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>ä½¿ç”¨ CRA åˆ›å»ºçš„ React 18 é¡¹ç›®ï¼Œå»ºè®®ç§»é™¤ <code>React.StrictMode</code></p></div></div><p><strong>2. React 18 ä¸­ä½¿ç”¨äº† antd çš„ message ç»„ä»¶æ§åˆ¶å°æ‰“å°è­¦å‘Šä¿¡æ¯</strong></p><p>React 18 ä½¿ç”¨äº†æ–°çš„ <code>ReactDOM.createRoot()</code> API æŒ‚è½½æ ¹èŠ‚ç‚¹ï¼ŒConcurrent Mode éœ€è¦é€šè¿‡æ­¤ API å¼€å¯ï¼Œä½†æ˜¯ antd ä¸­çš„ message ç­‰ç»„ä»¶å†…éƒ¨ä»ä½¿ç”¨ <code>ReactDOM.render()</code> æŒ‚è½½æ ¹èŠ‚ç‚¹ï¼Œæ­¤æ—¶åœ¨æ§åˆ¶å°ä¼šæ‰“å°è­¦å‘Šï¼Œæ³¨æ„è¿™å¹¶ä¸æ˜¯æŠ¥é”™ï¼Œä»…ä»…åªæ˜¯ fallback åˆ° legacy mode è€Œå·²ã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>å‡çº§å‰æœ€å¥½ä»”ç»†çœ‹ä¸€éå®˜æ–¹çš„è¯´æ˜ï¼Œç‰¹åˆ«æ˜¯ Breaking Changeï¼š</p><blockquote><p><a href="https://github.com/facebook/react/releases/tag/v18.0.0" target="_blank" rel="noopener noreferrer">https://github.com/facebook/react/releases/tag/v18.0.0</a></p></blockquote></div></div><p>ğŸ“’ ä¸ºä»€ä¹ˆéœ€è¦ peerDependencies</p><p>ä¾‹å¦‚å¼€å‘ä¸€ä¸ª React ç»„ä»¶åº“çš„æ—¶å€™ï¼Œæœ‰ä¸‰ä¸ªè¯‰æ±‚ï¼š</p><ul><li>è¯¥ç»„ä»¶åº“å¼€å‘çš„æ—¶å€™éœ€è¦å®‰è£… Reactï¼›</li><li>ç”¨æˆ·å¼•å…¥è¯¥ç»„ä»¶åº“çš„æ—¶å€™ä¸èƒ½é‡å¤å®‰è£… Reactï¼›</li><li>ç»„ä»¶åº“çš„ React ç‰ˆæœ¬ä¸ç›®æ ‡ç¯å¢ƒä¸ä¸€è‡´çš„æ—¶å€™éœ€è¦è¢«åŒ…ç®¡ç†å™¨å‘ç°å¹¶æ‰“å°è­¦å‘Šï¼›</li></ul><p>å¦‚æœå®‰è£…åˆ° dependencies ä¸‹ï¼Œæ˜¾ç„¶ä¼šå¯¼è‡´é‡å¤å®‰è£…ï¼›å¦‚æœå®‰è£…åˆ° devDependencies ä¸‹è™½ç„¶ä¸ä¼šå¯¼è‡´é‡å¤å®‰è£…ï¼Œä½†åŒ…ç®¡ç†å™¨ä¸ä¼šæ£€æŸ¥ç‰ˆæœ¬ï¼Œå½“ç‰ˆæœ¬ä¸ä¸€è‡´çš„æ—¶å€™ä¸ä¼šæ‰“å°è­¦å‘Šã€‚æ‰€ä»¥ peerDependencies æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚</p><blockquote><p>åœ¨è€ç‰ˆæœ¬ React é¡¹ç›®ä¸­å¼•å…¥æŸäº›ä¾èµ–åº“ï¼ˆä¾‹å¦‚ <code>antd</code>ã€<code>react-transition-group</code>ï¼‰ï¼Œä¸€èˆ¬ä¸èƒ½ç›´æ¥å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ï¼ˆå¤§æ¦‚ç‡ä¼šæŠ¥é”™ï¼‰ï¼Œæ­¤æ—¶åº”è¯¥æ ¹æ®ä¾èµ–åº“çš„ package.json ä¸­æŒ‡å®šçš„ <code>peerDependencies</code> å­—æ®µé€‰æ‹©åˆé€‚çš„ä¾èµ–åº“ç‰ˆæœ¬</p></blockquote><p>â­ï¸ ä»€ä¹ˆæ˜¯ JavaScript çš„å‡½æ•°ç»„åˆ</p><p>æœ¬ç¯‡æ–‡ç« ä»¥ä¸€ä¸ªç®€ç•¥çš„ Markdown çš„ä¾‹å­ä¸ºä¸»çº¿ï¼Œè®²è¿°äº†ä»€ä¹ˆæ˜¯å‡½æ•°ç»„åˆï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å‡½æ•°ç»„åˆçš„æ€æƒ³ç¼–å†™ä»£ç ï¼Œæ˜¯ä¸€ç¯‡éå¸¸ä¸é”™çš„ç¼–ç¨‹æ€æƒ³ç±»æ–‡ç« ã€‚</p><blockquote><p><a href="https://jrsinclair.com/articles/2022/javascript-function-composition-whats-the-big-deal/" target="_blank" rel="noopener noreferrer">https://jrsinclair.com/articles/2022/javascript-function-composition-whats-the-big-deal/</a></p></blockquote><p>ğŸ“’ <a href="https://segmentfault.com/a/1190000041683421" target="_blank" rel="noopener noreferrer">ä¸€äº›å…³äºreactçš„keep-aliveåŠŸèƒ½ç›¸å…³çŸ¥è¯†åœ¨è¿™é‡Œ(ä¸‹)</a></p><p>ğŸ“’ <a href="https://segmentfault.com/a/1190000041683300" target="_blank" rel="noopener noreferrer">ä¸€äº›å…³äºreactçš„keep-aliveåŠŸèƒ½ç›¸å…³çŸ¥è¯†åœ¨è¿™é‡Œ(ä¸Š)</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7088417070009810981" target="_blank" rel="noopener noreferrer">ç†æ¸… HTTP ä¸‹çš„ TCP æµç¨‹ï¼Œè®©ä½ çš„ HTTP æ°´å¹³æ›´ä¸Šä¸€å±‚</a></p><p>ğŸ“’ React 18 ç³»åˆ—</p><p><a href="https://mp.weixin.qq.com/s/t3dYc3Md1dpiv1vaFa5plA" target="_blank" rel="noopener noreferrer">React 18 å…¨è§ˆ</a></p><p><a href="https://mp.weixin.qq.com/s/fgT7Kxs_0feRx4TkBe6G5Q" target="_blank" rel="noopener noreferrer">React 18 å¯¹ Hooks çš„å½±å“</a></p><p><a href="https://mp.weixin.qq.com/s/GatHpP3BRLV_I48MfpzR4A" target="_blank" rel="noopener noreferrer">React çš„å¿ƒæ™ºæ¨¡å‹</a></p><p><a href="https://mp.weixin.qq.com/s/qyr6MnPtvnELDSbPJ2VtIw" target="_blank" rel="noopener noreferrer">ä½ ä¸çŸ¥é“çš„ React v18 çš„ä»»åŠ¡è°ƒåº¦æœºåˆ¶</a></p><p>ğŸ“’ React å‡ ä¸ªå°æŠ€å·§</p><p><strong>1. React å†…ç½®å·¥å…·ç±»å‹</strong></p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨ React.ComponentType åŒæ—¶è¡¨ç¤ºç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ComponentType</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">P</span><span class="token class-name"> </span><span class="token class-name operator" style="color:#393A34">=</span><span class="token class-name"> </span><span class="token class-name punctuation" style="color:#393A34">{</span><span class="token class-name punctuation" style="color:#393A34">}</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">ComponentClass</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">P</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">FunctionComponent</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">P</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨ React.Key æ¥è¡¨ç¤ºåˆ—è¡¨æ¸²æŸ“ key çš„ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Key</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å‚è€ƒï¼š</p><p><a href="https://juejin.cn/post/6844904122550845448" target="_blank" rel="noopener noreferrer">ç²¾è¯»ã€Š@types react å€¼å¾—æ³¨æ„çš„ TS æŠ€å·§ã€‹</a></p><p><a href="https://juejin.cn/post/7079449083919728671" target="_blank" rel="noopener noreferrer">ä» @types/react çš„ç±»å‹å®šä¹‰ä¸­ï¼Œæˆ‘å­¦åˆ°äº†ä»€ä¹ˆ</a></p><p><a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/v17/index.d.ts" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/v17/index.d.ts</a></p><p><strong>2. è‡ªå®šä¹‰ç»„ä»¶å¦‚ä½•ç»‘å®š className</strong></p><p>å°† <code>className</code> ä½œä¸º prop ä¼ å…¥ï¼Œå†…éƒ¨ä½¿ç”¨ classnames è¿™ä¸ªåº“è¿›è¡Œæ‹¼æ¥ï¼š</p><div class="language-tsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-tsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> cx </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;classnames&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> s </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./style.module.less&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IProps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  className</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FC</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">IProps</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> className </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript function" style="color:#d73a49">cx</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">s</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">wrapper</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"> className</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´è¿›ä¸€æ­¥ï¼ŒæŠŠä»¥ä¸Šæµç¨‹å°è£…æˆé«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼š</p><div class="language-tsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-tsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">withClassName</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">T</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token maybe-class-name">ComponentType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FC</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> className</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> className</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">restProps </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">className</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Component</span><span class="token tag" style="color:#00009f"> </span><span class="token tag spread punctuation" style="color:#393A34">{</span><span class="token tag spread operator" style="color:#393A34">...</span><span class="token tag spread" style="color:#00009f">restProps</span><span class="token tag spread punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>3. Input å¦‚ä½•å˜ä¸ºå—æ§ç»„ä»¶</strong></p><p>Antd ä¸­çš„ Input é»˜è®¤æ˜¯éå—æ§ç»„ä»¶ï¼Œå¯ä»¥ç»‘å®š <code>value</code>ï¼Œç„¶åç›‘å¬ <code>onChange</code> ä¿®æ”¹ <code>value</code> å®ç°å—æ§ï¼ˆ<code>v-model</code> çš„åŸç†ï¼‰ï¼š</p><div class="language-tsx codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-tsx codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FC</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setNum</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">InputNumber</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">num</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">setNum</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <a href="https://juejin.cn/post/7085674288933502984" target="_blank" rel="noopener noreferrer">æˆ‘å¸®ä¸€æœ‹å‹é‡æ„äº†ç‚¹ä»£ç ï¼Œä»–ç›´å‘¼ç‰›æ‰¹ï¼Œä½†åŸºæ“å‹¿å…­</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/imxPGpN_EXq4St_EpcA2eg" target="_blank" rel="noopener noreferrer">React + TypeScriptï¼šå¦‚ä½•å¤„ç†å¸¸è§äº‹ä»¶</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/Ua03qsLcrVURtxhSnuU_6w" target="_blank" rel="noopener noreferrer">å•ä¾‹æ¨¡å¼ 4 ç§ç»å…¸å®ç°æ–¹æ³•</a></p><p>ğŸ“’ å¦‚ä½•å®ç° <code>useClickAway</code></p><p>å¦‚ä½•ç›‘å¬å…ƒç´ å¤–çš„ç‚¹å‡»ï¼Œç±»ä¼¼ Vue çš„ ClickOutSide æŒ‡ä»¤</p><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://ahooks.js.org/hooks/use-click-away" target="_blank" rel="noopener noreferrer">https://ahooks.js.org/hooks/use-click-away</a></p></blockquote><blockquote><p>æºç ï¼š<a href="https://github.com/alibaba/hooks/blob/master/packages/hooks/src/useClickAway/index.ts" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/hooks/blob/master/packages/hooks/src/useClickAway/index.ts</a></p></blockquote><p>ğŸ“’ <a href="https://juejin.cn/post/7087906504308850701" target="_blank" rel="noopener noreferrer">å¿«é€Ÿç†è§£ TypeScript çš„é€†å˜ã€åå˜</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7087811040591675428" target="_blank" rel="noopener noreferrer">éƒ½ 2022 å¹´äº†ï¼Œæ‰‹åŠ¨æ­å»º React å¼€å‘ç¯å¢ƒå¾ˆéš¾å—</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7085298532365631501" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ‰‹å†™ Promise ä½ ä¸€å®šè¦åº·åº·</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/JZbsIqsqNeJmc__QFKpo1Q" target="_blank" rel="noopener noreferrer">è¶…å…¨é¢çš„å‰ç«¯æ–°ä¸€ä»£æ„å»ºå·¥å…·å¯¹æ¯”: esbuildã€Snowpackã€Viteã€wmr</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/4æœˆ17æ—¥å†…å®¹æ±‡æ€»">4æœˆ17æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-17T00:00:00.000Z" itemprop="datePublished">April 17, 2022</time> Â· <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ JS ç›¸å…³æŠ€å·§</p><div class="language-ts codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-ts codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 1. æ•°ç»„è½¬å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dict</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fromEntries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2. ä½¿ç”¨ Array.from åˆå§‹åŒ–æ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> digits </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 3. å­—ç¬¦ä¸²è½¬æ•°ç»„ï¼Œç„¶åç”¨æ•°ç»„æ–¹æ³•éå†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¸¸è§„æ–¹æ³•æ˜¯ç”¨ split()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç”±äºå­—ç¬¦ä¸²å®ç°äº† iterator æ¥å£ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å±•å¼€åˆ°æ•°ç»„ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token spread operator" style="color:#393A34">...</span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <a href="https://zhuanlan.zhihu.com/p/417534662" target="_blank" rel="noopener noreferrer">ç”¨Rusté”ˆåŒ–Vue Compiler</a></p><p>ğŸ“’ TS ç±»å‹ä½“æ“æ€§èƒ½åˆ†æ</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">$ tsc index.ts â€“-diagnostics</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ å‰ç«¯åŠ¨ç”»å®ç°æ–¹æ¡ˆ</p><ul><li>CSS æ–¹æ¡ˆï¼š<code>transition</code>ã€<code>animation</code></li><li>JS æ–¹æ¡ˆï¼š<code>setTimeout</code>ã€<code>requestAnimationFrame</code></li></ul><p>ä¸€ä¸ªå®éªŒæ€§ API <code>Element.animate()</code>ï¼Œå¯ä»¥åœ¨æ¸²æŸ“è¿›ç¨‹çš„æ—¶å€™å°±æ‰§è¡Œï¼Œæ€§èƒ½æ›´å¥½ã€‚</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate</a></p></blockquote><p>ğŸ“’ <a href="https://juejin.cn/post/7085257325165936648" target="_blank" rel="noopener noreferrer">æˆ‘æ˜¯å¦‚ä½•å¸¦é¢†å›¢é˜Ÿä»é›¶åˆ°ä¸€å»ºç«‹å‰ç«¯è§„èŒƒçš„</a></p><p>ğŸ“’ <a href="https://zhuanlan.zhihu.com/p/250493093" target="_blank" rel="noopener noreferrer">è¡€æ³ªæ•™è®­ä¹‹è¯·ä¸è¦å†è½»è§†Git â€”â€” æˆ‘åœ¨å·¥ä½œä¸­æ˜¯å¦‚ä½•ä½¿ç”¨ Git çš„</a></p><p>ğŸ“’ <a href="https://nextjs.org/learn/basics/create-nextjs-app" target="_blank" rel="noopener noreferrer">https://nextjs.org/learn/basics/create-nextjs-app</a></p><p>ğŸ“’ <a href="https://nextjs.org/docs" target="_blank" rel="noopener noreferrer">https://nextjs.org/docs</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/6844903944343273485" target="_blank" rel="noopener noreferrer">æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ç¥å™¨nextjsä¸€é”®å¯¼å‡ºä½ çš„githubåšå®¢æ–‡ç« ç”Ÿæˆé™æ€html</a></p><p>ğŸ“’ Golang ä¸‰æ•°ä¹‹å’Œ</p><div class="language-go codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-go codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> algorithm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;sort&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ThreeSum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ans </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ•°ç»„å…ƒç´ ä¸ªæ•°å°äº 3ï¼Œç›´æ¥è¿”å›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ’åº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sort</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Ints</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// éå†åˆ°å€’æ•°ç¬¬äºŒä¸ªï¼Œå› ä¸ºæ˜¯ä¸‰ä¸ªæ•°æ€»å’Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// è§„å®š nums[i] &lt; nums[left] &lt; nums[right]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœ nums[i] &gt; 0 åˆ™ä¸å­˜åœ¨å¦å¤–ä¸¤ä¸ªå€¼ä½¿å¾—ç›¸åŠ ç­‰äº 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¤§äº 0 å¯ä»¥ç›´æ¥è·³å‡ºå¾ªç¯äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// è¿‡æ»¤ nums[i] é‡å¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å…ˆç¡®å®šä¸€ä¸ªå€¼ nums[i]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å†å»æ‰¾å¦å¤–ä¸¤ä¸ªå€¼ nums[left] å’Œ nums[right]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// éœ€è¦æ»¡è¶³ nums[i] &lt; nums[left] &lt; nums[right]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨åŒæŒ‡é’ˆæ³•ç¡®å®šå‰©ä¸‹ä¸¤ä¸ªå€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> left </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> right </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sum </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> sum </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> target </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                left</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> sum </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> target </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                right</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> sum </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> target </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ans</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå·¦å³æŒ‡é’ˆåˆ†åˆ«ç§»åŠ¨ä¸€ä½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                left</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                right</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// è¿‡æ»¤ nums[left] é‡å¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> left </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> right </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">left</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    left</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// è¿‡æ»¤ nums[right] é‡å¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> left </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> right </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">right</span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    right</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ Golang æ‰‹å†™æ•°ç»„æ–¹æ³•</p><div class="language-go codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-go codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ForEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fn </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> nums </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">fn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fn </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> nums </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fn </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> nums </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fn </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initValue </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> initValue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> nums </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">ForEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;===forEach&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapped </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mapped</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filtered </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filtered</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduced </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> accu </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reduced</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/kGMsNmIXlT25NfRrifjnTQ" target="_blank" rel="noopener noreferrer">é€‰æ‹©ç¬¬ä¸‰æ–¹ NPM åŒ…æ—¶çš„ 5 æ¡æœ€ä½³å®è·µ</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7072321805792313357" target="_blank" rel="noopener noreferrer">Vue3.2 vDOM diffæµç¨‹åˆ†æä¹‹ä¸€ï¼šdiffç®—æ³•</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/pNossFUtJrDHshXbWLb4vA" target="_blank" rel="noopener noreferrer">ä»é›¶åˆ°ä¸€ï¼Œæˆ‘ä»¬æ¥ä¸€èµ·é€ ä¸ª JS çš„ç¼–è¯‘å™¨</a></p><p>â­ï¸ <a href="https://juejin.cn/post/7085542534943883301" target="_blank" rel="noopener noreferrer">2022 å¹´çš„ React ç”Ÿæ€</a></p><p>ğŸ“’ <a href="https://zhuanlan.zhihu.com/p/163481957" target="_blank" rel="noopener noreferrer">linuxåå°å¼€å‘å…·å¤‡èƒ½åŠ›é›†é”¦</a></p><p>ğŸ“’ <a href="https://zhuanlan.zhihu.com/p/439279854" target="_blank" rel="noopener noreferrer">Linuxä¸‹C++åå°æœåŠ¡å™¨å¼€å‘</a></p><p>ğŸ“’ <a href="https://zhuanlan.zhihu.com/p/471317280" target="_blank" rel="noopener noreferrer">Go è¯­è¨€ä¸å¹¶å‘ç¼–ç¨‹</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7085224136980561927" target="_blank" rel="noopener noreferrer">æ‰“é€ è½»é‡çº§ WebIDEï¼Œçœ‹è¿™ä¸€ç¯‡æ–‡ç« å°±å¤Ÿå•¦</a></p><p>ğŸ“’ developer-roadmap</p><p>developer-roadmap æ˜¯ä¸€ä¸ªå¼€å‘äººå‘˜è·¯çº¿å›¾ï¼ŒåŒ…å«äº†å‰ç«¯è·¯çº¿å›¾ã€åç«¯è·¯çº¿å›¾ã€DevOps è·¯çº¿å›¾ã€React è·¯çº¿å›¾ã€Angular è·¯çº¿å›¾ã€Android è·¯çº¿å›¾ã€Python è·¯çº¿å›¾ã€Go è·¯çº¿å›¾ã€Java è·¯çº¿å›¾ã€DBA è·¯çº¿å›¾ã€‚</p><blockquote><p><a href="https://github.com/kamranahmedse/developer-roadmap" target="_blank" rel="noopener noreferrer">https://github.com/kamranahmedse/developer-roadmap</a></p></blockquote><p>ğŸ“’ <a href="https://github.com/vercel/pkg" target="_blank" rel="noopener noreferrer">pkg: æŠŠ Node.js é¡¹ç›®æ‰“åŒ…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/frontend-weekly/blog/4æœˆ10æ—¥å†…å®¹æ±‡æ€»">4æœˆ10æ—¥å†…å®¹æ±‡æ€»</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-10T00:00:00.000Z" itemprop="datePublished">April 10, 2022</time> Â· <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43509711?v=4" alt="åŠ è²çŒ«"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jiacheng787" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">åŠ è²çŒ«</span></a></div><small class="avatar__subtitle" itemprop="description">å‰ç«¯å¼€å‘ @NETEASE</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>ğŸ“’ <a href="https://juejin.cn/post/7084882650233569317" target="_blank" rel="noopener noreferrer">ç¼–è¯‘ ts ä»£ç ç”¨ tsc è¿˜æ˜¯ babel</a></p><p>ğŸ“’ ç¬¬ä¸‰æ–¹åº“æ˜¯å¦åº”è¯¥æäº¤ lockfile</p><p>åœ¨ä¸šåŠ¡é¡¹ç›®ä¸­ï¼Œæ¯æ¬¡ä¾èµ–å®‰è£…çš„ç‰ˆæœ¬å·éƒ½ä» lock æ–‡ä»¶ä¸­è¿›è¡Œè·å–ï¼Œé”å®šä¾èµ–å’Œä¾èµ–çš„ä¾èµ–ï¼Œé¿å…äº†ä¸å¯æµ‹çš„ä¾èµ–é£é™©ã€‚ä½†æ˜¯ä»ç„¶å­˜åœ¨é—´æ¥ä¾èµ–ä¸å¯æ§çš„é—®é¢˜ï¼Œä¾‹å¦‚ React ä¾èµ– object-assignï¼Œåœ¨ React ä¸­ lockfile é”å®šçš„ç‰ˆæœ¬ä¸º <code>object-assign@4.1.0</code>ï¼Œä½†æ˜¯å‰ç«¯é¡¹ç›®å®é™…å®‰è£…çš„ç‰ˆæœ¬ä¸º <code>object-assign@4.99.99</code>ã€‚</p><ul><li>ç¬¬ä¸‰æ–¹åº“çš„ <code>devDependencies</code> å¿…é¡»é”å®šï¼Œè¿™æ · Contributor å¯æ ¹æ® lockfile å¾ˆå®¹æ˜“å°†é¡¹ç›®è·‘èµ·æ¥</li><li>ç¬¬ä¸‰æ–¹åº“çš„ <code>dependencies</code> è™½ç„¶æœ‰å¯èƒ½å­˜åœ¨ä¸å¯æ§é—®é¢˜ï¼Œä½†æ˜¯å¯é€šè¿‡é”æ­»ä¾èµ–æˆ–è€…å‹¤åŠ æ›´æ–°çš„æ–¹å¼æ¥è§£å†³</li></ul><p><a href="https://juejin.cn/post/7031122959637217310" target="_blank" rel="noopener noreferrer">å¦‚æœæ²¡æœ‰ package-lock.jsonï¼Œé‚£å°†å¦‚ä½•</a></p><p>ğŸ“’ å·¥ç¨‹åŒ–çŸ¥è¯†å¡ç‰‡ 023ï¼šnode_modules ç‰ˆæœ¬é‡å¤çš„å›°å¢ƒ</p><p>åœ¨ <code>npmv3</code> ä¹‹å <code>node_modules</code> ä¸ºå¹³é“ºç»“æ„ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨ä¾èµ–é‡å¤å®‰è£…çš„é—®é¢˜ã€‚</p><p><a href="https://juejin.cn/post/7030084290989948935s" target="_blank" rel="noopener noreferrer">å·¥ç¨‹åŒ–çŸ¥è¯†å¡ç‰‡ 023ï¼šnode_modules ç‰ˆæœ¬é‡å¤çš„å›°å¢ƒ</a></p><p>ğŸ“’ Vue å¼€å‘å°æŠ€å·§</p><p><a href="https://juejin.cn/post/7084536432731095048" target="_blank" rel="noopener noreferrer">åˆ†äº« 15 ä¸ª Vue3 å…¨å®¶æ¡¶å¼€å‘çš„é¿å‘ç»éªŒ</a></p><p><a href="https://juejin.cn/post/7080875763162939429" target="_blank" rel="noopener noreferrer">vue3ä¸­å¯ä»¥å¸®åŠ©ä½ æ—©ç‚¹ä¸‹ç­çš„9ä¸ªå¼€å‘æŠ€å·§</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7083468345579667493" target="_blank" rel="noopener noreferrer">ã€æ··æ·†ç³»åˆ—ã€‘ä¸‰é—®ï¼šnpxã€npmã€cnpmã€pnpmåŒºåˆ«ä½ ææ¸…æ¥šäº†å—ï¼Ÿ</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7082738107237433375" target="_blank" rel="noopener noreferrer">Webpackç»„ä»¶åº“æ‰“åŒ…è¶…è¯¦ç»†æŒ‡å—</a></p><p>ğŸ“’ Node.js æŠ€æœ¯æ¶æ„</p><p>Node æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿç®€è¨€ä¹‹ï¼šç”¨ V8 è¿è¡Œ JSã€ç”¨ bindings å®ç° JS ä¸ C/C++ æ²Ÿé€šã€ç”¨ C/C++ åº“é«˜æ•ˆå¤„ç† IOã€ç”¨ Node.js æ ‡å‡†åº“ç®€åŒ– JS ä»£ç ã€ç”¨ Event Loop ç®¡ç†äº‹ä»¶å¤„ç†é¡ºåºã€ç”¨ libuv å®ç°å¼‚æ­¥ I/O æ“ä½œã€‚</p><p><a href="https://juejin.cn/post/7081891057918558221" target="_blank" rel="noopener noreferrer">Node.js æŠ€æœ¯æ¶æ„</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/_eDFlWBJHxf4oar6Fpye2Q" target="_blank" rel="noopener noreferrer">Web æ¡†æ¶çš„æ›¿ä»£æ–¹æ¡ˆ</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/XWZsKQECcsHAlE9cyqi9Eg" target="_blank" rel="noopener noreferrer">å†™å¥½ JavaScript å¼‚æ­¥ä»£ç çš„å‡ ä¸ªæ¨èåšæ³•</a></p><p>ğŸ“’ Node.js è¿›é˜¶ - å¤šæ–‡ä»¶ Stream åˆå¹¶ï¼Œä¸²è¡Œå’Œå¹¶å‘ä¸¤ç§æ¨¡å¼å®ç°</p><p>é‡è¦çš„äº‹æƒ…å†è¯´ä¸€éï¼Œ<code>pipe</code> æ–¹æ³•é»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨å…³é—­å¯å†™æµï¼Œä½†æ˜¯å¦‚æœå¯è¯»æµæœŸé—´å‘ç”Ÿé”™è¯¯ï¼Œåˆ™å†™å…¥çš„ç›®æ ‡æµå°†ä¸ä¼šå…³é—­ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨ <code>pipe</code> éœ€è¦ç›‘å¬é”™è¯¯äº‹ä»¶ï¼Œæ‰‹åŠ¨å…³é—­å¯å†™æµï¼Œé˜²æ­¢æ–‡ä»¶å¥æŸ„æ³„éœ²ã€‚</p><p><a href="https://mp.weixin.qq.com/s/WisEGFz2yn_ZeekViofMnA" target="_blank" rel="noopener noreferrer">Node.js è¿›é˜¶ - å¤šæ–‡ä»¶ Stream åˆå¹¶ï¼Œä¸²è¡Œå’Œå¹¶å‘ä¸¤ç§æ¨¡å¼å®ç°</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7046898330000949285" target="_blank" rel="noopener noreferrer">æœåŠ¡ç«¯æ¸²æŸ“SSRåŠå®ç°åŸç†</a></p><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/lyff2svfHh4rdsWRL4H5uA" target="_blank" rel="noopener noreferrer">æ‰‹æ‘¸æ‰‹æœåŠ¡ç«¯æ¸²æŸ“-react</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7058868160706904078" target="_blank" rel="noopener noreferrer">å¦‚ä½•åœ¨é¡¹ç›®ä¸­ç”¨å¥½ TypeScript</a></p><p>ğŸ“’ Golang å’Œ JS åˆ›å»ºå¯¹è±¡æ–¹å¼å¯¹æ¯”</p><p>Golang ä¸ JS åˆ›å»ºå¯¹è±¡éå¸¸ç±»ä¼¼ï¼ŒGolang åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™éœ€è¦å®šä¹‰ schema è¿›è¡Œç±»å‹çº¦æŸï¼š</p><div class="language-go codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-go codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Person </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Name    </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Age     </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Sex     </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dbydm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Sex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Golang åˆ›å»ºå¯¹è±¡æ•°ç»„ï¼š</p><div class="language-go codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-go codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">list </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dbydm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Person</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2333</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ Node.js å¸¸è§çš„ç³»ç»Ÿä¿¡å·</p><ul><li>SIGHUPï¼šä¸é€šè¿‡ ctrl+c åœæ­¢è¿›ç¨‹ï¼Œè€Œæ˜¯ç›´æ¥å…³é—­å‘½ä»¤è¡Œç»ˆç«¯ï¼Œä¼šè§¦å‘è¯¥ä¿¡å·</li><li>SIGINTï¼šæŒ‰ä¸‹ ctrl+c åœæ­¢è¿›ç¨‹æ—¶è§¦å‘ï¼›pm2 é‡å¯æˆ–è€…åœæ­¢å­è¿›ç¨‹æ—¶ï¼Œä¹Ÿä¼šå‘å­è¿›ç¨‹å‘é€è¯¥ä¿¡å·</li><li>SIGTERMï¼šä¸€èˆ¬ç”¨äºé€šçŸ¥è¿›ç¨‹ä¼˜é›…é€€å‡ºï¼Œå¦‚ k8s åˆ é™¤ pod æ—¶ï¼Œå°±ä¼šå‘ pod å‘é€ SIGTERM ä¿¡å·ï¼Œpod å¯ä»¥åœ¨è¶…æ—¶æ—¶é—´å†…ï¼ˆé»˜è®¤ 30sï¼‰åšä¸€äº›é€€å‡ºæ¸…ç†åŠ¨ä½œ</li><li>SIGBREAKï¼šåœ¨ window ç³»ç»Ÿä¸Šï¼ŒæŒ‰ä¸‹ ctrl+break ä¼šè§¦å‘è¯¥ä¿¡å·</li><li>SIGKILLï¼šå¼ºåˆ¶é€€å‡ºè¿›ç¨‹ï¼Œè¿›ç¨‹æ— æ³•åšä»»ä½•æ¸…ç†åŠ¨ä½œï¼Œæ‰§è¡Œå‘½ä»¤ kill -9 pidï¼Œè¿›ç¨‹ä¼šæ”¶åˆ°è¯¥ä¿¡å·ã€‚k8s åˆ é™¤ pod æ—¶ï¼Œå¦‚æœè¶…è¿‡ 30sï¼Œpod è¿˜æ²¡é€€å‡ºï¼Œk8s ä¼šå‘ pod å‘é€ SIGKILL ä¿¡å·ï¼Œç«‹å³é€€å‡º pod è¿›ç¨‹ï¼›pm2 åœ¨é‡å¯æˆ–è€…åœæ­¢è¿›ç¨‹æ—¶ï¼Œå¦‚æœè¶…è¿‡ 1.6sï¼Œè¿›ç¨‹è¿˜æ²¡é€€å‡ºï¼Œä¹Ÿä¼šå‘é€ SIGKILL ä¿¡å·</li></ul><p>ğŸ“’ <a href="https://mp.weixin.qq.com/s/JCIyV-_VfQ9iScd_xOuP8g" target="_blank" rel="noopener noreferrer">2022 å¹´ï¼ŒBabel vs TypeScriptï¼Œè°æ›´é€‚åˆä»£ç ç¼–è¯‘</a></p><p>ğŸ“’ React å¸¸ç”¨çŠ¶æ€ç®¡ç†åº“</p><ul><li>Redux</li><li>Mobx</li><li>Recoil</li><li>Hookstate</li><li>Rematch</li><li>Jotai</li><li>Zustand</li></ul><p>ğŸ“’ <a href="https://juejin.cn/post/7083230365027926053" target="_blank" rel="noopener noreferrer">ä»æºç ç†æ¸… useEffect ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ€ä¹ˆå¤„ç†çš„</a></p><p>ğŸ“’ <a href="https://juejin.cn/post/7081539471585312805" target="_blank" rel="noopener noreferrer">è…¾è®¯ä¸€é¢ï¼šCORSä¸ºä»€ä¹ˆèƒ½ä¿éšœå®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆåªå¯¹å¤æ‚è¯·æ±‚åšé¢„æ£€ï¼Ÿ</a></p><p>ğŸ“’ å¦‚ä½•åœ¨ Node ç¯å¢ƒä½¿ç”¨ ESM æ¨¡å—è§„èŒƒ</p><p>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼ŒNode ç¯å¢ƒå¹¶éä¸æ”¯æŒ ESM è§„èŒƒï¼Œåªæ˜¯æ²¡æœ‰å¯ç”¨è€Œå·²ï¼Œé»˜è®¤ä½¿ç”¨ CJS è§„èŒƒï¼Œå¯é€šè¿‡å¦‚ä¸‹æ–¹å¼å¯ç”¨ï¼š</p><ul><li>å•æ–‡ä»¶ä½¿ç”¨ ESM è§„èŒƒï¼Œå¯ä»¥å°†è¯¥æ–‡ä»¶åç¼€æ”¹ä¸º <code>.mjs</code>ï¼›</li><li>æ•´ä¸ªå·¥ç¨‹ä½¿ç”¨ ESM è§„èŒƒï¼Œå¯ä»¥åœ¨ <code>package.json</code> ä¸­é…ç½® <code>&quot;type&quot;: &quot;module&quot;</code>ï¼›</li></ul><p>å‡å¦‚ä¸æƒ³é€šè¿‡ä¸Šè¿°æ–¹å¼å¯ç”¨ï¼Œè¿˜æœ‰ä¸€äº›æ–¹æ³•ï¼š</p><ul><li>é€šè¿‡ Webpack ç­‰æ‰“åŒ…å·¥å…·æ”¯æŒ ESM æ¨¡å—ï¼ˆWebpack é»˜è®¤ä½¿ç”¨ <code>web</code> ç¯å¢ƒæ„å»ºï¼Œéœ€è¦é…ç½® <code>target: &quot;node&quot;</code> é¿å…æ‰“åŒ… Node å†…ç½®æ¨¡å—ï¼‰ï¼›</li><li>è¿˜å¯ä»¥ä½¿ç”¨ <code>ts-node</code>ã€<code>jiti</code> ç­‰ runtime æ”¯æŒ ESM æ¨¡å—ï¼ˆå†…éƒ¨ä½¿ç”¨ <code>tsc</code> æˆ–è€… <code>babel</code> è¿›è¡Œç¼–è¯‘ï¼‰ï¼›</li></ul><p>ğŸ“’ å¦‚ä½•ç”Ÿæˆéšæœº ID</p><p>ä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨ <code>Math.random()</code>ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">randomId</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦ä¸€ç§æ˜¯ä½¿ç”¨æŸ¥è¡¨çš„æ–¹å¼ï¼š</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ç”Ÿæˆ [0..9] çš„æ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä» nums æ•°ç»„ä¸­éšæœºé€‰å–å…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">sample</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">arr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">randomId</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nums</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ğŸ“’ è·¨åŸŸå¦‚ä½•æºå¸¦ Cookie</p><ul><li>å¦‚æœé€šè¿‡ç½‘å…³å±‚ä»£ç†ï¼ˆä¾‹å¦‚ nginxï¼‰åˆ™ä¸ç”¨æ‹…å¿ƒï¼Œå¯¹äºæµè§ˆå™¨æ¥è¯´å®é™…ä¸Šå¹¶æ²¡æœ‰è·¨åŸŸï¼Œå¯æ­£å¸¸æºå¸¦ Cookie</li><li>å¦‚æœé€šè¿‡ CORS è·¨åŸŸï¼Œæµè§ˆå™¨é»˜è®¤ä¸ä¼šæºå¸¦ Cookieï¼Œæ­¤æ—¶æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š<ul><li>åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  <code>Authorization</code> å­—æ®µå‘é€ Cookieï¼ˆåœ¨ axios ä¸­é…ç½®è¯·æ±‚æ‹¦æˆªæ·»åŠ ï¼‰</li><li>åç«¯å“åº”å¤´æ·»åŠ  <code>Access-Control-Allow-Credentials</code>ï¼Œå‰ç«¯å‘é€è¯·æ±‚æ—¶é…ç½® <code>xhr.withCredentials = true</code></li></ul></li></ul></div></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/frontend-weekly/blog/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/frontend-weekly/blog">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/garfield-dev-team/Garfield-cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">Garfield-cli å‰ç«¯å·¥ç¨‹åŒ–<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Jiacheng787/Garfield-utils" target="_blank" rel="noopener noreferrer" class="footer__link-item">NPM å·¥ç¨‹åŒ–è§„èŒƒ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Jiacheng787/React-zero-to-one" target="_blank" rel="noopener noreferrer" class="footer__link-item">React ä»é›¶åˆ°ä¸€å·¥ç¨‹åŒ–æŒ‡åŒ—<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Jiacheng787/go-by-example" target="_blank" rel="noopener noreferrer" class="footer__link-item">Golang å­¦ä¹ <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Jiacheng787/Bytedance-interview" target="_blank" rel="noopener noreferrer" class="footer__link-item">é¢è¯•å†…å®¹æ±‡æ€»<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Garfield Dev Team. Built with Docusaurus. Deploys on GitHub Pages.</div></div></div></footer></div>
<script src="/frontend-weekly/assets/js/runtime~main.84fc11e4.js"></script>
<script src="/frontend-weekly/assets/js/main.ed827796.js"></script>
</body>
</html>